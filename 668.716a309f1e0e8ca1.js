"use strict";(self.webpackChunkapp_shell=self.webpackChunkapp_shell||[]).push([[668],{668:(Je,bt,C)=>{C.r(bt),C.d(bt,{UsersModule:()=>Ve,createApollo:()=>ae});var ue=C(4907),Ct=C(8212),at=C(1368),$=C(7048),fe=C(5904),y=C(1316),k=C(5940),P=C(2216),V=C(6304),J=C(3900),X=C(9936),le=C(2412),Ot=C(2220),Et=function(){function i(){this.assumeImmutableResults=!1,this.getFragmentDoc=(0,P.em)(J.S,{max:X.Y["cache.fragmentQueryDocuments"]||1e3,cache:le.W})}return i.prototype.batch=function(e){var n,t=this;return this.performTransaction(function(){return n=e.update(t)},"string"==typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0),n},i.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},i.prototype.transformDocument=function(e){return e},i.prototype.transformForLink=function(e){return e},i.prototype.identify=function(e){},i.prototype.gc=function(){return[]},i.prototype.modify=function(e){return!1},i.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,y.C3)((0,y.C3)({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},i.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,y.C3)((0,y.C3)({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},i.prototype.writeQuery=function(e){var t=e.id,r=e.data,n=(0,y.sX)(e,["id","data"]);return this.write(Object.assign(n,{dataId:t||"ROOT_QUERY",result:r}))},i.prototype.writeFragment=function(e){var t=e.id,r=e.data,n=e.fragment,a=e.fragmentName,s=(0,y.sX)(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(n,a),dataId:t,result:r}))},i.prototype.updateQuery=function(e,t){return this.batch({update:function(r){var n=r.readQuery(e),a=t(n);return null==a?n:(r.writeQuery((0,y.C3)((0,y.C3)({},e),{data:a})),a)}})},i.prototype.updateFragment=function(e,t){return this.batch({update:function(r){var n=r.readFragment(e),a=t(n);return null==a?n:(r.writeFragment((0,y.C3)((0,y.C3)({},e),{data:a})),a)}})},i}();!1!==globalThis.__DEV__&&(Et.prototype.getMemoryInternals=Ot.Cw);var St=function(i){function e(t,r,n,a){var s,o=i.call(this,t)||this;if(o.message=t,o.path=r,o.query=n,o.variables=a,Array.isArray(o.path)){o.missing=o.message;for(var u=o.path.length-1;u>=0;--u)o.missing=((s={})[o.path[u]]=o.missing,s)}else o.missing=o.path;return o.__proto__=e.prototype,o}return(0,y.ct)(e,i),e}(Error),he=C(316),st=C(1220),N=C(304),pe=C(4736),m=C(3924),Tt=C(7632),_=C(92),Rt=C(7288),L=C(4876),G=C(3824),ot=C(40),U=C(8144);function ct(i){return!1!==globalThis.__DEV__&&function de(i){var e=new Set([i]);return e.forEach(function(t){(0,U.a)(t)&&function ye(i){if(!1!==globalThis.__DEV__&&!Object.isFrozen(i))try{Object.freeze(i)}catch(e){if(e instanceof TypeError)return null;throw e}return i}(t)===t&&Object.getOwnPropertyNames(t).forEach(function(r){(0,U.a)(t[r])&&e.add(t[r])})}),i}(i),i}var q=C(9200),T=C(204),F=Object.prototype.hasOwnProperty;function K(i){return null==i}function Dt(i,e){var t=i.__typename,r=i.id,n=i._id;if("string"==typeof t&&(e&&(e.keyObject=K(r)?K(n)?void 0:{_id:n}:{id:r}),K(r)&&!K(n)&&(r=n),!K(r)))return"".concat(t,":").concat("number"==typeof r||"string"==typeof r?r:JSON.stringify(r))}var Ft={dataIdFromObject:Dt,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Mt(i){var e=i.canonizeResults;return void 0===e?Ft.canonizeResults:e}var wt=/^[_a-z][_0-9a-z]*/i;function z(i){var e=i.match(wt);return e?e[0]:i}function ut(i,e,t){return!!(0,U.a)(e)&&((0,T.c)(e)?e.every(function(r){return ut(i,r,t)}):i.selections.every(function(r){if((0,m.sh)(r)&&(0,ot.UN)(r,t)){var n=(0,m.ue)(r);return F.call(e,n)&&(!r.selectionSet||ut(r.selectionSet,e[n],t))}return!0}))}function Q(i){return(0,U.a)(i)&&!(0,m.Ez)(i)&&!(0,T.c)(i)}function kt(i,e){var t=(0,J.uC)((0,L._A)(i));return{fragmentMap:t,lookupFragment:function(r){var n=t[r];return!n&&e&&(n=e.lookup(r)),n||null}}}var i,e,Z=Object.create(null),ft=function(){return Z},Ut=Object.create(null),H=function(){function i(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(n,a){return ct((0,m.Ez)(n)?r.get(n.__ref,a):n&&n[a])},this.canRead=function(n){return(0,m.Ez)(n)?r.has(n.__ref):"object"==typeof n},this.toReference=function(n,a){if("string"==typeof n)return(0,m.Yz)(n);if((0,m.Ez)(n))return n;var s=r.policies.identify(n)[0];if(s){var o=(0,m.Yz)(s);return a&&r.merge(s,n),o}}}return i.prototype.toObject=function(){return(0,y.C3)({},this.data)},i.prototype.has=function(e){return void 0!==this.lookup(e,!0)},i.prototype.get=function(e,t){if(this.group.depend(e,t),F.call(this.data,e)){var r=this.data[e];if(r&&F.call(r,t))return r[t]}return"__typename"===t&&F.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof I?this.parent.get(e,t):void 0},i.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),F.call(this.data,e)?this.data[e]:this instanceof I?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},i.prototype.merge=function(e,t){var n,r=this;(0,m.Ez)(e)&&(e=e.__ref),(0,m.Ez)(t)&&(t=t.__ref);var a="string"==typeof e?this.lookup(n=e):e,s="string"==typeof t?this.lookup(n=t):t;if(s){(0,k.ON)("string"==typeof n,1);var o=new G.kL(Ce).merge(a,s);if(this.data[n]=o,o!==a&&(delete this.refs[n],this.group.caching)){var u=Object.create(null);a||(u.__exists=1),Object.keys(s).forEach(function(c){if(!a||a[c]!==o[c]){u[c]=1;var f=z(c);f!==c&&!r.policies.hasKeyArgs(o.__typename,f)&&(u[f]=1),void 0===o[c]&&!(r instanceof I)&&delete o[c]}}),u.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[n]===o.__typename&&delete u.__typename,Object.keys(u).forEach(function(c){return r.group.dirty(n,c)})}}},i.prototype.modify=function(e,t){var r=this,n=this.lookup(e);if(n){var a=Object.create(null),s=!1,o=!0,u={DELETE:Z,INVALIDATE:Ut,isReference:m.Ez,toReference:this.toReference,canRead:this.canRead,readField:function(c,f){return r.policies.readField("string"==typeof c?{fieldName:c,from:f||(0,m.Yz)(e)}:c,{store:r})}};if(Object.keys(n).forEach(function(c){var f=z(c),l=n[c];if(void 0!==l){var h="function"==typeof t?t:t[c]||t[f];if(h){var p=h===ft?Z:h(ct(l),(0,y.C3)((0,y.C3)({},u),{fieldName:f,storeFieldName:c,storage:r.getStorage(e,c)}));if(p===Ut)r.group.dirty(e,c);else if(p===Z&&(p=void 0),p!==l&&(a[c]=p,s=!0,l=p,!1!==globalThis.__DEV__)){var v=function(D){if(void 0===r.lookup(D.__ref))return!1!==globalThis.__DEV__&&k.ON.warn(2,D),!0};if((0,m.Ez)(p))v(p);else if(Array.isArray(p))for(var b=!1,O=void 0,R=0,E=p;R<E.length;R++){var g=E[R];if((0,m.Ez)(g)){if(b=!0,v(g))break}else"object"==typeof g&&g&&r.policies.identify(g)[0]&&(O=g);if(b&&void 0!==O){!1!==globalThis.__DEV__&&k.ON.warn(3,O);break}}}}void 0!==l&&(o=!1)}}),s)return this.merge(e,a),o&&(this instanceof I?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},i.prototype.delete=function(e,t,r){var n,a=this.lookup(e);if(a){var s=this.getFieldValue(a,"__typename"),o=t&&r?this.policies.getStoreFieldName({typename:s,fieldName:t,args:r}):t;return this.modify(e,o?((n={})[o]=ft,n):ft)}return!1},i.prototype.evict=function(e,t){var r=!1;return e.id&&(F.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof I&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},i.prototype.clear=function(){this.replace(null)},i.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach(function(n){F.call(e.policies.rootTypenamesById,n)||r.push(n)}),r.length&&(t.__META={extraRootIds:r.sort()}),t},i.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(a){e&&F.call(e,a)||t.delete(a)}),e){var r=e.__META,n=(0,y.sX)(e,["__META"]);Object.keys(n).forEach(function(a){t.merge(a,n[a])}),r&&r.extraRootIds.forEach(this.retain,this)}},i.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},i.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},i.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof I?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},i.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach(function(s){F.call(r,s)&&(Object.keys(e.findChildRefIds(s)).forEach(t.add,t),delete r[s])});var n=Object.keys(r);if(n.length){for(var a=this;a instanceof I;)a=a.parent;n.forEach(function(s){return a.delete(s)})}return n},i.prototype.findChildRefIds=function(e){if(!F.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var n=new Set([r]);n.forEach(function(a){(0,m.Ez)(a)&&(t[a.__ref]=!0),(0,U.a)(a)&&Object.keys(a).forEach(function(s){var o=a[s];(0,U.a)(o)&&n.add(o)})})}return this.refs[e]},i.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},i}(),jt=function(){function i(e,t){void 0===t&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return i.prototype.resetCaching=function(){this.d=this.caching?(0,P.S6)():null,this.keyMaker=new q.f(_.Oc)},i.prototype.depend=function(e,t){if(this.d){this.d(lt(e,t));var r=z(t);r!==t&&this.d(lt(e,r)),this.parent&&this.parent.depend(e,t)}},i.prototype.dirty=function(e,t){this.d&&this.d.dirty(lt(e,t),"__exists"===t?"forget":"setDirty")},i}();function lt(i,e){return e+"#"+i}function zt(i,e){W(i)&&i.group.depend(e,"__exists")}e=function(t){function r(n){var s=n.resultCaching,u=n.seed,c=t.call(this,n.policies,new jt(void 0===s||s))||this;return c.stump=new be(c),c.storageTrie=new q.f(_.Oc),u&&c.replace(u),c}return(0,y.ct)(r,t),r.prototype.addLayer=function(n,a){return this.stump.addLayer(n,a)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(i=H||(H={})),i.Root=e;var I=function(i){function e(t,r,n,a){var s=i.call(this,r.policies,a)||this;return s.id=t,s.parent=r,s.replay=n,s.group=a,n(s),s}return(0,y.ct)(e,i),e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var r=this,n=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var s=r.data[a],o=n.lookup(a);o?s?s!==o&&Object.keys(s).forEach(function(u){(0,V.y)(s[u],o[u])||r.group.dirty(a,u)}):(r.group.dirty(a,"__exists"),Object.keys(o).forEach(function(u){r.group.dirty(a,u)})):r.delete(a)}),n):n===this.parent?this:n.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return(0,y.C3)((0,y.C3)({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return F.call(this.data,t)?(0,y.C3)((0,y.C3)({},r),i.prototype.findChildRefIds.call(this,t)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(H),be=function(i){function e(t){return i.call(this,"EntityStore.Stump",t,function(){},new jt(t.group.caching,t.group))||this}return(0,y.ct)(e,i),e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,r){return this.parent.merge(t,r)},e}(I);function Ce(i,e,t){var r=i[t],n=e[t];return(0,V.y)(r,n)?r:n}function W(i){return!!(i instanceof H&&i.group.caching)}var It=function(){function i(){this.known=new(_.qK?WeakSet:Set),this.pool=new q.f(_.Oc),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return i.prototype.isKnown=function(e){return(0,U.a)(e)&&this.known.has(e)},i.prototype.pass=function(e){if((0,U.a)(e)){var t=function Oe(i){return(0,U.a)(i)?(0,T.c)(i)?i.slice(0):(0,y.C3)({__proto__:Object.getPrototypeOf(i)},i):i}(e);return this.passes.set(t,e),t}return e},i.prototype.admit=function(e){var t=this;if((0,U.a)(e)){var r=this.passes.get(e);if(r)return r;switch(Object.getPrototypeOf(e)){case Array.prototype:if(this.known.has(e))return e;var a=e.map(this.admit,this);return(s=this.pool.lookupArray(a)).array||(this.known.add(s.array=a),!1!==globalThis.__DEV__&&Object.freeze(a)),s.array;case null:case Object.prototype:if(this.known.has(e))return e;var o=Object.getPrototypeOf(e),u=[o],c=this.sortedKeys(e);u.push(c.json);var s,f=u.length;if(c.sorted.forEach(function(p){u.push(t.admit(e[p]))}),!(s=this.pool.lookupArray(u)).object){var l=s.object=Object.create(o);this.known.add(l),c.sorted.forEach(function(p,v){l[p]=u[f+v]}),!1!==globalThis.__DEV__&&Object.freeze(l)}return s.object}}return e},i.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var n=JSON.stringify(t);(r.keys=this.keysByJSON.get(n))||this.keysByJSON.set(n,r.keys={sorted:t,json:n})}return r.keys},i}();function xt(i){return[i.selectionSet,i.objectOrReference,i.context,i.context.canonizeResults]}var Ee=function(){function i(e){var t=this;this.knownResults=new(_.Oc?WeakMap:Map),this.config=(0,Rt.g)(e,{addTypename:!1!==e.addTypename,canonizeResults:Mt(e)}),this.canon=e.canon||new It,this.executeSelectionSet=(0,P.em)(function(r){var n,a=r.context.canonizeResults,s=xt(r);s[3]=!a;var o=(n=t.executeSelectionSet).peek.apply(n,s);return o?a?(0,y.C3)((0,y.C3)({},o),{result:t.canon.admit(o.result)}):o:(zt(r.context.store,r.enclosingRef.__ref),t.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize||X.Y["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:xt,makeCacheKey:function(r,n,a,s){if(W(a.store))return a.store.makeCacheKey(r,(0,m.Ez)(n)?n.__ref:n,a.varString,s)}}),this.executeSubSelectedArray=(0,P.em)(function(r){return zt(r.context.store,r.enclosingRef.__ref),t.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize||X.Y["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(r){var n=r.field,a=r.array,s=r.context;if(W(s.store))return s.store.makeCacheKey(n,a,s.varString)}})}return i.prototype.resetCanon=function(){this.canon=new It},i.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,n=e.rootId,a=void 0===n?"ROOT_QUERY":n,s=e.variables,o=e.returnPartialData,u=void 0===o||o,c=e.canonizeResults,f=void 0===c?this.config.canonizeResults:c,l=this.config.cache.policies;s=(0,y.C3)((0,y.C3)({},(0,L._W)((0,L.QR)(r))),s);var v,h=(0,m.Yz)(a),p=this.executeSelectionSet({selectionSet:(0,L.aG)(r).selectionSet,objectOrReference:h,enclosingRef:h,context:(0,y.C3)({store:t,query:r,policies:l,variables:s,varString:(0,N.s)(s),canonizeResults:f},kt(r,this.config.fragments))});if(p.missing&&(v=[new St(Se(p.missing),p.missing,r,s)],!u))throw v[0];return{result:p.result,complete:!v,missing:v}},i.prototype.isFresh=function(e,t,r,n){if(W(n.store)&&this.knownResults.get(e)===r){var a=this.executeSelectionSet.peek(r,t,n,this.canon.isKnown(e));if(a&&e===a.result)return!0}return!1},i.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,n=e.objectOrReference,a=e.enclosingRef,s=e.context;if((0,m.Ez)(n)&&!s.policies.rootTypenamesById[n.__ref]&&!s.store.has(n.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(n.__ref," object")};var h,o=s.variables,u=s.policies,f=s.store.getFieldValue(n,"__typename"),l=[],p=new G.kL;function v(g,S){var D;return g.missing&&(h=p.merge(h,((D={})[S]=g.missing,D))),g.result}this.config.addTypename&&"string"==typeof f&&!u.rootIdsByTypename[f]&&l.push({__typename:f});var b=new Set(r.selections);b.forEach(function(g){var S,D;if((0,ot.UN)(g,o))if((0,m.sh)(g)){var w=u.readField({fieldName:g.name.value,field:g,variables:s.variables,from:n},s),M=(0,m.ue)(g);void 0===w?st.Go.added(g)||(h=p.merge(h,((S={})[M]="Can't find field '".concat(g.name.value,"' on ").concat((0,m.Ez)(n)?n.__ref+" object":"object "+JSON.stringify(n,null,2)),S))):(0,T.c)(w)?w=v(t.executeSubSelectedArray({field:g,array:w,enclosingRef:a,context:s}),M):g.selectionSet?null!=w&&(w=v(t.executeSelectionSet({selectionSet:g.selectionSet,objectOrReference:w,enclosingRef:(0,m.Ez)(w)?w:a,context:s}),M)):s.canonizeResults&&(w=t.canon.pass(w)),void 0!==w&&l.push(((D={})[M]=w,D))}else{var j=(0,J.gV)(g,s.lookupFragment);if(!j&&g.kind===Tt.U.FRAGMENT_SPREAD)throw(0,k.w1)(9,g.name.value);j&&u.fragmentMatches(j,f)&&j.selectionSet.selections.forEach(b.add,b)}});var R={result:(0,G.k5)(l),missing:h},E=s.canonizeResults?this.canon.admit(R):ct(R);return E.result&&this.knownResults.set(E.result,r),E},i.prototype.execSubSelectedArrayImpl=function(e){var o,t=this,r=e.field,n=e.array,a=e.enclosingRef,s=e.context,u=new G.kL;function c(f,l){var h;return f.missing&&(o=u.merge(o,((h={})[l]=f.missing,h))),f.result}return r.selectionSet&&(n=n.filter(s.store.canRead)),n=n.map(function(f,l){return null===f?null:(0,T.c)(f)?c(t.executeSubSelectedArray({field:r,array:f,enclosingRef:a,context:s}),l):r.selectionSet?c(t.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:f,enclosingRef:(0,m.Ez)(f)?f:a,context:s}),l):(!1!==globalThis.__DEV__&&function Te(i,e,t){if(!e.selectionSet){var r=new Set([t]);r.forEach(function(n){(0,U.a)(n)&&((0,k.ON)(!(0,m.Ez)(n),10,function me(i,e){return(0,m.Ez)(e)?i.get(e.__ref,"__typename"):e&&e.__typename}(i,n),e.name.value),Object.values(n).forEach(r.add,r))})}}(s.store,r,f),f)}),{result:s.canonizeResults?this.canon.admit(n):n,missing:o}},i}();function Se(i){try{JSON.stringify(i,function(e,t){if("string"==typeof t)throw t;return t})}catch(e){return e}}var Re=C(5680),De=C(6952),Y=C(1648),Bt=Object.create(null);function ht(i){var e=JSON.stringify(i);return Bt[e]||(Bt[e]=Object.create(null))}function Lt(i){var e=ht(i);return e.keyFieldsFn||(e.keyFieldsFn=function(t,r){var n=function(s,o){return r.readField(o,s)},a=r.keyObject=pt(i,function(s){var o=A(r.storeObject,s,n);return void 0===o&&t!==r.storeObject&&F.call(t,s[0])&&(o=A(t,s,At)),(0,k.ON)(void 0!==o,4,s.join("."),t),o});return"".concat(r.typename,":").concat(JSON.stringify(a))})}function Gt(i){var e=ht(i);return e.keyArgsFn||(e.keyArgsFn=function(t,r){var n=r.field,a=r.variables,s=r.fieldName,o=pt(i,function(c){var f=c[0],l=f.charAt(0);if("@"!==l)if("$"!==l){if(t)return A(t,c)}else{var b=f.slice(1);if(a&&F.call(a,b)){var O=c.slice(0);return O[0]=b,A(a,O)}}else if(n&&(0,T.g)(n.directives)){var h=f.slice(1),p=n.directives.find(function(R){return R.name.value===h}),v=p&&(0,m.IL)(p,a);return v&&A(v,c.slice(1))}}),u=JSON.stringify(o);return(t||"{}"!==u)&&(s+=":"+u),s})}function pt(i,e){var t=new G.kL;return Qt(i).reduce(function(r,n){var a,s=e(n);if(void 0!==s){for(var o=n.length-1;o>=0;--o)(a={})[n[o]]=s,s=a;r=t.merge(r,s)}return r},Object.create(null))}function Qt(i){var e=ht(i);if(!e.paths){var t=e.paths=[],r=[];i.forEach(function(n,a){(0,T.c)(n)?(Qt(n).forEach(function(s){return t.push(r.concat(s))}),r.length=0):(r.push(n),(0,T.c)(i[a+1])||(t.push(r.slice(0)),r.length=0))})}return e.paths}function At(i,e){return i[e]}function A(i,e,t){return t=t||At,Pt(e.reduce(function r(n,a){return(0,T.c)(n)?n.map(function(s){return r(s,a)}):n&&t(n,a)},i))}function Pt(i){return(0,U.a)(i)?(0,T.c)(i)?i.map(Pt):pt(Object.keys(i).sort(),function(e){return A(i,e)}):i}function dt(i){return void 0!==i.args?i.args:i.field?(0,m.IL)(i.field,i.variables):null}var Fe=function(){},Nt=function(i,e){return e.fieldName},_t=function(i,e,t){return(0,t.mergeObjects)(i,e)},Kt=function(i,e){return e},Me=function(){function i(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,y.C3)({dataIdFromObject:Dt},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return i.prototype.identify=function(e,t){var r,n=this,a=t&&(t.typename||(null===(r=t.storeObject)||void 0===r?void 0:r.__typename))||e.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var u,s=t&&t.storeObject||e,o=(0,y.C3)((0,y.C3)({},t),{typename:a,storeObject:s,readField:t&&t.readField||function(){var h=yt(arguments,s);return n.readField(h,{store:n.cache.data,variables:h.variables})}}),c=a&&this.getTypePolicy(a),f=c&&c.keyFn||this.config.dataIdFromObject;f;){var l=f((0,y.C3)((0,y.C3)({},e),s),o);if(!(0,T.c)(l)){u=l;break}f=Lt(l)}return u=u?String(u):void 0,o.keyObject?[u,o.keyObject]:[u]},i.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(r){var n=e[r],a=n.queryType,s=n.mutationType,o=n.subscriptionType,u=(0,y.sX)(n,["queryType","mutationType","subscriptionType"]);a&&t.setRootTypename("Query",r),s&&t.setRootTypename("Mutation",r),o&&t.setRootTypename("Subscription",r),F.call(t.toBeAdded,r)?t.toBeAdded[r].push(u):t.toBeAdded[r]=[u]})},i.prototype.updateTypePolicy=function(e,t){var r=this,n=this.getTypePolicy(e),a=t.keyFields,s=t.fields;function o(u,c){u.merge="function"==typeof c?c:!0===c?_t:!1===c?Kt:u.merge}o(n,t.merge),n.keyFn=!1===a?Fe:(0,T.c)(a)?Lt(a):"function"==typeof a?a:n.keyFn,s&&Object.keys(s).forEach(function(u){var c=r.getFieldPolicy(e,u,!0),f=s[u];if("function"==typeof f)c.read=f;else{var l=f.keyArgs,h=f.read,p=f.merge;c.keyFn=!1===l?Nt:(0,T.c)(l)?Gt(l):"function"==typeof l?l:c.keyFn,"function"==typeof h&&(c.read=h),o(c,p)}c.read&&c.merge&&(c.keyFn=c.keyFn||Nt)})},i.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var r="ROOT_"+e.toUpperCase(),n=this.rootTypenamesById[r];t!==n&&((0,k.ON)(!n||n===e,5,e),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},i.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(r){t.getSupertypeSet(r,!0),e[r].forEach(function(n){t.getSupertypeSet(n,!0).add(r);var a=n.match(wt);(!a||a[0]!==n)&&t.fuzzySubtypes.set(n,new RegExp(n))})})},i.prototype.getTypePolicy=function(e){var t=this;if(!F.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var n=this.supertypeMap.get(e);!n&&this.fuzzySubtypes.size&&(n=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(function(s,o){if(s.test(e)){var u=t.supertypeMap.get(o);u&&u.forEach(function(c){return n.add(c)})}})),n&&n.size&&n.forEach(function(s){var o=t.getTypePolicy(s),u=o.fields,c=(0,y.sX)(o,["fields"]);Object.assign(r,c),Object.assign(r.fields,u)})}var a=this.toBeAdded[e];return a&&a.length&&a.splice(0).forEach(function(s){t.updateTypePolicy(e,s)}),this.typePolicies[e]},i.prototype.getFieldPolicy=function(e,t,r){if(e){var n=this.getTypePolicy(e).fields;return n[t]||r&&(n[t]=Object.create(null))}},i.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},i.prototype.fragmentMatches=function(e,t,r,n){var a=this;if(!e.typeCondition)return!0;if(!t)return!1;var s=e.typeCondition.name.value;if(t===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var o=this.getSupertypeSet(t,!0),u=[o],c=function(v){var b=a.getSupertypeSet(v,!1);b&&b.size&&u.indexOf(b)<0&&u.push(b)},f=!(!r||!this.fuzzySubtypes.size),l=!1,h=0;h<u.length;++h){var p=u[h];if(p.has(s))return o.has(s)||(l&&!1!==globalThis.__DEV__&&k.ON.warn(6,t,s),o.add(s)),!0;p.forEach(c),f&&h===u.length-1&&ut(e.selectionSet,r,n)&&(f=!1,l=!0,this.fuzzySubtypes.forEach(function(v,b){var O=t.match(v);O&&O[0]===t&&c(b)}))}return!1},i.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!(!r||!r.keyFn)},i.prototype.getStoreFieldName=function(e){var a,t=e.typename,r=e.fieldName,n=this.getFieldPolicy(t,r,!1),s=n&&n.keyFn;if(s&&t)for(var o={typename:t,fieldName:r,field:e.field||null,variables:e.variables},u=dt(e);s;){var c=s(u,o);if(!(0,T.c)(c)){a=c||r;break}s=Gt(c)}return void 0===a&&(a=e.field?(0,m.CE)(e.field,e.variables):(0,m.k7)(r,dt(e))),!1===a?r:r===z(a)?a:r+":"+a},i.prototype.readField=function(e,t){var r=e.from;if(r&&(e.field||e.fieldName)){if(void 0===e.typename){var a=t.store.getFieldValue(r,"__typename");a&&(e.typename=a)}var s=this.getStoreFieldName(e),o=z(s),u=t.store.getFieldValue(r,s),c=this.getFieldPolicy(e.typename,o,!1),f=c&&c.read;if(f){var l=Ht(this,r,e,t,t.store.getStorage((0,m.Ez)(r)?r.__ref:r,s));return Y.M1.withValue(this.cache,f,[u,l])}return u}},i.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t,!1);return r&&r.read},i.prototype.getMergeFunction=function(e,t,r){var n=this.getFieldPolicy(e,t,!1),a=n&&n.merge;return!a&&r&&(a=(n=this.getTypePolicy(r))&&n.merge),a},i.prototype.runMergeFunction=function(e,t,r,n,a){var s=r.field,o=r.typename,u=r.merge;return u===_t?Wt(n.store)(e,t):u===Kt?t:(n.overwrite&&(e=void 0),u(e,t,Ht(this,void 0,{typename:o,fieldName:s.name.value,field:s,variables:n.variables},n,a||Object.create(null))))},i}();function Ht(i,e,t,r,n){var a=i.getStoreFieldName(t),s=z(a),o=t.variables||r.variables,u=r.store,c=u.toReference,f=u.canRead;return{args:dt(t),field:t.field||null,fieldName:s,storeFieldName:a,variables:o,isReference:m.Ez,toReference:c,storage:n,cache:i.cache,canRead:f,readField:function(){return i.readField(yt(arguments,e,o),r)},mergeObjects:Wt(r.store)}}function yt(i,e,t){var s,r=i[0];return"string"==typeof r?s={fieldName:r,from:i.length>1?i[1]:e}:(s=(0,y.C3)({},r),F.call(s,"from")||(s.from=e)),!1!==globalThis.__DEV__&&void 0===s.from&&!1!==globalThis.__DEV__&&k.ON.warn(7,(0,De._)(Array.from(i))),void 0===s.variables&&(s.variables=t),s}function Wt(i){return function(t,r){if((0,T.c)(t)||(0,T.c)(r))throw(0,k.w1)(8);if((0,U.a)(t)&&(0,U.a)(r)){var n=i.getFieldValue(t,"__typename"),a=i.getFieldValue(r,"__typename");if(n&&a&&n!==a)return r;if((0,m.Ez)(t)&&Q(r))return i.merge(t.__ref,r),t;if(Q(t)&&(0,m.Ez)(r))return i.merge(t,r.__ref),r;if(Q(t)&&Q(r))return(0,y.C3)((0,y.C3)({},t),r)}return r}}function vt(i,e,t){var r="".concat(e).concat(t),n=i.flavors.get(r);return n||i.flavors.set(r,n=i.clientOnly===e&&i.deferred===t?i:(0,y.C3)((0,y.C3)({},i),{clientOnly:e,deferred:t})),n}var we=function(){function i(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return i.prototype.writeToStore=function(e,t){var r=this,n=t.query,a=t.result,s=t.dataId,o=t.variables,u=t.overwrite,c=(0,L.ED)(n),f=function ge(){return new G.kL}();o=(0,y.C3)((0,y.C3)({},(0,L._W)(c)),o);var l=(0,y.C3)((0,y.C3)({store:e,written:Object.create(null),merge:function(p,v){return f.merge(p,v)},variables:o,varString:(0,N.s)(o)},kt(n,this.fragments)),{overwrite:!!u,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),h=this.processSelectionSet({result:a||Object.create(null),dataId:s,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:l});if(!(0,m.Ez)(h))throw(0,k.w1)(11,a);return l.incomingById.forEach(function(p,v){var b=p.storeObject,O=p.mergeTree,R=p.fieldNodeSet,E=(0,m.Yz)(v);if(O&&O.map.size){var g=r.applyMerges(O,E,b,l);if((0,m.Ez)(g))return;b=g}if(!1!==globalThis.__DEV__&&!l.overwrite){var S=Object.create(null);R.forEach(function(M){M.selectionSet&&(S[M.name.value]=!0)}),Object.keys(b).forEach(function(M){(function(M){return!0===S[z(M)]})(M)&&!function(M){var j=O&&O.map.get(M);return!!(j&&j.info&&j.info.merge)}(M)&&function ke(i,e,t,r){var n=function(l){var h=r.getFieldValue(l,t);return"object"==typeof h&&h},a=n(i);if(a){var s=n(e);if(s&&!(0,m.Ez)(a)&&!(0,V.y)(a,s)&&!Object.keys(a).every(function(l){return void 0!==r.getFieldValue(s,l)})){var o=r.getFieldValue(i,"__typename")||r.getFieldValue(e,"__typename"),u=z(t),c="".concat(o,".").concat(u);if(!Jt.has(c)){Jt.add(c);var f=[];!(0,T.c)(a)&&!(0,T.c)(s)&&[a,s].forEach(function(l){var h=r.getFieldValue(l,"__typename");"string"==typeof h&&!f.includes(h)&&f.push(h)}),!1!==globalThis.__DEV__&&k.ON.warn(14,u,o,f.length?"either ensure all objects of type "+f.join(" and ")+" have an ID or a custom merge function, or ":"",c,a,s)}}}}(E,b,M,l.store)})}e.merge(v,b)}),e.retain(h.__ref),h},i.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,n=e.result,a=e.selectionSet,s=e.context,o=e.mergeTree,u=this.cache.policies,c=Object.create(null),f=r&&u.rootTypenamesById[r]||(0,m.A1)(n,a,s.fragmentMap)||r&&s.store.get(r,"__typename");"string"==typeof f&&(c.__typename=f);var l=function(){var g=yt(arguments,c,s.variables);if((0,m.Ez)(g.from)){var S=s.incomingById.get(g.from.__ref);if(S){var D=u.readField((0,y.C3)((0,y.C3)({},g),{from:S.storeObject}),s);if(void 0!==D)return D}}return u.readField(g,s)},h=new Set;this.flattenFields(a,n,s,f).forEach(function(g,S){var D,w=(0,m.ue)(S),M=n[w];if(h.add(S),void 0!==M){var j=u.getStoreFieldName({typename:f,fieldName:S.name.value,field:S,variables:g.variables}),se=$t(o,j),nt=t.processFieldValue(M,S,S.selectionSet?vt(g,!1,!1):g,se),oe=void 0;S.selectionSet&&((0,m.Ez)(nt)||Q(nt))&&(oe=l("__typename",nt));var ce=u.getMergeFunction(f,S.name.value,oe);ce?se.info={field:S,typename:f,merge:ce}:Vt(o,j),c=g.merge(c,((D={})[j]=nt,D))}else!1!==globalThis.__DEV__&&!g.clientOnly&&!g.deferred&&!st.Go.added(S)&&!u.getReadFunction(f,S.name.value)&&!1!==globalThis.__DEV__&&k.ON.error(12,(0,m.ue)(S),n)});try{var p=u.identify(n,{typename:f,selectionSet:a,fragmentMap:s.fragmentMap,storeObject:c,readField:l}),b=p[1];r=r||p[0],b&&(c=s.merge(c,b))}catch(g){if(!r)throw g}if("string"==typeof r){var O=(0,m.Yz)(r),R=s.written[r]||(s.written[r]=[]);if(R.indexOf(a)>=0||(R.push(a),this.reader&&this.reader.isFresh(n,O,a,s)))return O;var E=s.incomingById.get(r);return E?(E.storeObject=s.merge(E.storeObject,c),E.mergeTree=mt(E.mergeTree,o),h.forEach(function(g){return E.fieldNodeSet.add(g)})):s.incomingById.set(r,{storeObject:c,mergeTree:tt(o)?void 0:o,fieldNodeSet:h}),O}return c},i.prototype.processFieldValue=function(e,t,r,n){var a=this;return t.selectionSet&&null!==e?(0,T.c)(e)?e.map(function(s,o){var u=a.processFieldValue(s,t,r,$t(n,o));return Vt(n,o),u}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:n}):!1!==globalThis.__DEV__?(0,Re.U)(e):e},i.prototype.flattenFields=function(e,t,r,n){void 0===n&&(n=(0,m.A1)(t,e,r.fragmentMap));var a=new Map,s=this.cache.policies,o=new q.f(!1);return function u(c,f){var l=o.lookup(c,f.clientOnly,f.deferred);l.visited||(l.visited=!0,c.selections.forEach(function(h){if((0,ot.UN)(h,r.variables)){var p=f.clientOnly,v=f.deferred;if(!(p&&v)&&(0,T.g)(h.directives)&&h.directives.forEach(function(R){var E=R.name.value;if("client"===E&&(p=!0),"defer"===E){var g=(0,m.IL)(R,r.variables);(!g||!1!==g.if)&&(v=!0)}}),(0,m.sh)(h)){var b=a.get(h);b&&(p=p&&b.clientOnly,v=v&&b.deferred),a.set(h,vt(r,p,v))}else{var O=(0,J.gV)(h,r.lookupFragment);if(!O&&h.kind===Tt.U.FRAGMENT_SPREAD)throw(0,k.w1)(13,h.name.value);O&&s.fragmentMatches(O,n,t,r.variables)&&u(O.selectionSet,vt(r,p,v))}}}))}(e,r),a},i.prototype.applyMerges=function(e,t,r,n,a){var s,o=this;if(e.map.size&&!(0,m.Ez)(r)){var u=(0,T.c)(r)||!(0,m.Ez)(t)&&!Q(t)?void 0:t,c=r;u&&!a&&(a=[(0,m.Ez)(u)?u.__ref:u]);var f,l=function(h,p){return(0,T.c)(h)?"number"==typeof p?h[p]:void 0:n.store.getFieldValue(h,String(p))};e.map.forEach(function(h,p){var v=l(u,p),b=l(c,p);if(void 0!==b){a&&a.push(p);var O=o.applyMerges(h,v,b,n,a);O!==b&&(f=f||new Map).set(p,O),a&&(0,k.ON)(a.pop()===p)}}),f&&(r=(0,T.c)(c)?c.slice(0):(0,y.C3)({},c),f.forEach(function(h,p){r[p]=h}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,n,a&&(s=n.store).getStorage.apply(s,a)):r},i}(),Yt=[];function $t(i,e){var t=i.map;return t.has(e)||t.set(e,Yt.pop()||{map:new Map}),t.get(e)}function mt(i,e){if(i===e||!e||tt(e))return i;if(!i||tt(i))return e;var t=i.info&&e.info?(0,y.C3)((0,y.C3)({},i.info),e.info):i.info||e.info,r=i.map.size&&e.map.size,a={info:t,map:r?new Map:i.map.size?i.map:e.map};if(r){var s=new Set(e.map.keys());i.map.forEach(function(o,u){a.map.set(u,mt(o,e.map.get(u))),s.delete(u)}),s.forEach(function(o){a.map.set(o,mt(e.map.get(o),i.map.get(o)))})}return a}function tt(i){return!i||!(i.info||i.map.size)}function Vt(i,e){var t=i.map,r=t.get(e);r&&tt(r)&&(Yt.push(r),t.delete(e))}var Jt=new Set,Xt=function(i){function e(t){void 0===t&&(t={});var r=i.call(this)||this;return r.watches=new Set,r.addTypenameTransform=new he._(st.Go),r.assumeImmutableResults=!0,r.makeVar=Y.UT,r.txCount=0,r.config=function ve(i){return(0,Rt.g)(Ft,i)}(t),r.addTypename=!!r.config.addTypename,r.policies=new Me({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return(0,y.ct)(e,i),e.prototype.init=function(){var t=this.data=new H.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var r=this,n=this.storeReader,a=this.config.fragments;this.storeWriter=new we(this,this.storeReader=new Ee({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Mt(this.config),canon:t?void 0:n&&n.canon,fragments:a}),a),this.maybeBroadcastWatch=(0,P.em)(function(s,o){return r.broadcastWatch(s,o)},{max:this.config.resultCacheMaxSize||X.Y["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(s){var o=s.optimistic?r.optimisticData:r.data;if(W(o))return o.makeCacheKey(s.query,s.callback,(0,N.s)({optimistic:s.optimistic,id:s.id,variables:s.variables}))}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(s){return s.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return void 0===t&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var r=t.returnPartialData,n=void 0!==r&&r;try{return this.storeReader.diffQueryAgainstStore((0,y.C3)((0,y.C3)({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:n})).result||null}catch(a){if(a instanceof St)return null;throw a}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{! --this.txCount&&!1!==t.broadcast&&this.broadcastWatches()}},e.prototype.modify=function(t){if(F.call(t,"id")&&!t.id)return!1;var r=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(t.id||"ROOT_QUERY",t.fields)}finally{! --this.txCount&&!1!==t.broadcast&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore((0,y.C3)((0,y.C3)({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var r=this;return this.watches.size||(0,Y.wT)(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&(0,Y.Om)(r),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){var r;N.s.reset(),pe.S.reset(),this.addTypenameTransform.resetCache(),null===(r=this.config.fragments)||void 0===r||r.resetCaches();var n=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),n},e.prototype.retain=function(t,r){return(r?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,r){return(r?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if((0,m.Ez)(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(r){!1!==globalThis.__DEV__&&k.ON.warn(r)}},e.prototype.evict=function(t){if(!t.id){if(F.call(t,"id"))return!1;t=(0,y.C3)((0,y.C3)({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{! --this.txCount&&!1!==t.broadcast&&this.broadcastWatches()}},e.prototype.reset=function(t){var r=this;return this.init(),N.s.reset(),t&&t.discardWatches?(this.watches.forEach(function(n){return r.maybeBroadcastWatch.forget(n)}),this.watches.clear(),(0,Y.Om)(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var r=this.optimisticData.removeLayer(t);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},e.prototype.batch=function(t){var c,r=this,n=t.update,a=t.optimistic,s=void 0===a||a,o=t.removeOptimistic,u=t.onWatchUpdated,f=function(h){var v=r.data,b=r.optimisticData;++r.txCount,h&&(r.data=r.optimisticData=h);try{return c=n(r)}finally{--r.txCount,r.data=v,r.optimisticData=b}},l=new Set;return u&&!this.txCount&&this.broadcastWatches((0,y.C3)((0,y.C3)({},t),{onWatchUpdated:function(h){return l.add(h),!1}})),"string"==typeof s?this.optimisticData=this.optimisticData.addLayer(s,f):!1===s?f(this.data):f(),"string"==typeof o&&(this.optimisticData=this.optimisticData.removeLayer(o)),u&&l.size?(this.broadcastWatches((0,y.C3)((0,y.C3)({},t),{onWatchUpdated:function(h,p){var v=u.call(this,h,p);return!1!==v&&l.delete(h),v}})),l.size&&l.forEach(function(h){return r.maybeBroadcastWatch.dirty(h)})):this.broadcastWatches(t),c},e.prototype.performTransaction=function(t,r){return this.batch({update:t,optimistic:r||null!==r})},e.prototype.transformDocument=function(t){return this.addTypenameToDocument(this.addFragmentsToDocument(t))},e.prototype.broadcastWatches=function(t){var r=this;this.txCount||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n,t)})},e.prototype.addFragmentsToDocument=function(t){var r=this.config.fragments;return r?r.transform(t):t},e.prototype.addTypenameToDocument=function(t){return this.addTypename?this.addTypenameTransform.transformDocument(t):t},e.prototype.broadcastWatch=function(t,r){var n=t.lastDiff,a=this.diff(t);r&&(t.optimistic&&"string"==typeof r.optimistic&&(a.fromOptimisticTransaction=!0),r.onWatchUpdated&&!1===r.onWatchUpdated.call(this,t,a,n))||(!n||!(0,V.y)(n.result,a.result))&&t.callback(t.lastDiff=a,n)},e}(Et);!1!==globalThis.__DEV__&&(Xt.prototype.getMemoryInternals=Ot.QX);var x=C(1468),qt=C(2300),d=C(4496),gt=C(5488),et=C(4160),rt=C(3252),Ue=function(){function i(e){var t=e.batchDebounce,r=e.batchInterval,n=e.batchMax,a=e.batchHandler,s=e.batchKey;this.batchesByKey=new Map,this.scheduledBatchTimerByKey=new Map,this.batchDebounce=t,this.batchInterval=r,this.batchMax=n||0,this.batchHandler=a,this.batchKey=s||function(){return""}}return i.prototype.enqueueRequest=function(e){var t=this,r=(0,y.C3)((0,y.C3)({},e),{next:[],error:[],complete:[],subscribers:new Set}),n=this.batchKey(e.operation);return r.observable||(r.observable=new et._(function(a){var s=t.batchesByKey.get(n);s||t.batchesByKey.set(n,s=new Set);var o=0===s.size,u=0===r.subscribers.size;return r.subscribers.add(a),u&&s.add(r),a.next&&r.next.push(a.next.bind(a)),a.error&&r.error.push(a.error.bind(a)),a.complete&&r.complete.push(a.complete.bind(a)),(o||t.batchDebounce)&&t.scheduleQueueConsumption(n),s.size===t.batchMax&&t.consumeQueue(n),function(){var c;r.subscribers.delete(a)&&r.subscribers.size<1&&s.delete(r)&&s.size<1&&(t.consumeQueue(n),null===(c=s.subscription)||void 0===c||c.unsubscribe())}})),r.observable},i.prototype.consumeQueue=function(e){void 0===e&&(e="");var t=this.batchesByKey.get(e);if(this.batchesByKey.delete(e),t&&t.size){var r=[],n=[],a=[],s=[],o=[],u=[];t.forEach(function(l){r.push(l.operation),n.push(l.forward),a.push(l.observable),s.push(l.next),o.push(l.error),u.push(l.complete)});var c=this.batchHandler(r,n)||et._.of(),f=function(l){o.forEach(function(h){h&&h.forEach(function(p){return p(l)})})};return t.subscription=c.subscribe({next:function(l){if(Array.isArray(l)||(l=[l]),s.length!==l.length){var h=new Error("server returned results with length ".concat(l.length,", expected length of ").concat(s.length));return h.result=l,f(h)}l.forEach(function(p,v){s[v]&&s[v].forEach(function(b){return b(p)})})},error:f,complete:function(){u.forEach(function(l){l&&l.forEach(function(h){return h()})})}}),a}},i.prototype.scheduleQueueConsumption=function(e){var t=this;clearTimeout(this.scheduledBatchTimerByKey.get(e)),this.scheduledBatchTimerByKey.set(e,setTimeout(function(){t.consumeQueue(e),t.scheduledBatchTimerByKey.delete(e)},this.batchInterval))},i}();!function(i){function e(t){var r=i.call(this)||this,n=t||{},s=n.batchInterval,u=n.batchMax,f=n.batchHandler,h=n.batchKey;return r.batcher=new Ue({batchDebounce:n.batchDebounce,batchInterval:void 0===s?10:s,batchMax:void 0===u?0:u,batchHandler:void 0===f?function(){return null}:f,batchKey:void 0===h?function(){return""}:h}),t.batchHandler.length<=1&&(r.request=function(v){return r.batcher.enqueueRequest({operation:v})}),r}(0,y.ct)(e,i),e.prototype.request=function(t,r){return this.batcher.enqueueRequest({operation:t,forward:r})}}(gt.A);class ze extends gt.A{httpClient;options;requester;print=qt.S;constructor(e,t){super(),this.httpClient=e,this.options=t,this.options.operationPrinter&&(this.print=this.options.operationPrinter),this.requester=r=>new et._(n=>{const a=r.getContext(),s=(E,g)=>function B(...i){const e=i.find(t=>typeof t<"u");return typeof e>"u"?i[i.length-1]:e}(a[E],this.options[E],g);let o=s("method","POST");const u=s("includeQuery",!0),c=s("includeExtensions",!1),f=s("uri","graphql"),l=s("withCredentials"),h=s("useMultipart"),p=!0===this.options.useGETForQueries,v=r.query.definitions.some(E=>"OperationDefinition"===E.kind&&"query"===E.operation);p&&v&&(o="GET");const b={method:o,url:"function"==typeof f?f(r):f,body:{operationName:r.operationName,variables:r.variables},options:{withCredentials:l,useMultipart:h,headers:this.options.headers}};c&&(b.body.extensions=r.extensions),u&&(b.body.query=this.print(r.query));const O=function ee(i){let e=i.headers&&i.headers instanceof $.HttpHeaders?i.headers:new $.HttpHeaders(i.headers);if(i.clientAwareness){const{name:t,version:r}=i.clientAwareness;t&&!e.has("apollographql-client-name")&&(e=e.set("apollographql-client-name",t)),r&&!e.has("apollographql-client-version")&&(e=e.set("apollographql-client-version",r))}return e}(a);b.options.headers=((i,e)=>i&&e?e.keys().reduce((r,n)=>r.set(n,e.getAll(n)),i):e||i)(b.options.headers,O);const R=((i,e,t)=>{const r=-1!==["POST","PUT","PATCH"].indexOf(i.method.toUpperCase()),a=i.body.length;let o,s=i.options&&i.options.useMultipart;if(s){if(a)return new rt._(c=>c.error(new Error("File upload is not available when combined with Batching")));if(!r)return new rt._(c=>c.error(new Error("File upload is not available when GET is used")));if(!t)return new rt._(c=>c.error(new Error('To use File upload you need to pass "extractFiles" function from "extract-files" library to HttpLink\'s options')));o=t(i.body),s=!!o.files.size}let u={};if(a){if(!r)return new rt._(c=>c.error(new Error("Batching is not available for GET requests")));u={body:i.body}}else u=r?{body:s?o.clone:i.body}:{params:Object.keys(i.body).reduce((l,h)=>{const p=i.body[h];return l[h]=-1!==["variables","extensions"].indexOf(h.toLowerCase())?JSON.stringify(p):p,l},{})};if(s&&r){const c=new FormData;c.append("operations",JSON.stringify(u.body));const f={},l=o.files;let h=0;l.forEach(p=>{f[++h]=p}),c.append("map",JSON.stringify(f)),h=0,l.forEach((p,v)=>{c.append(++h+"",v,v.name)}),u.body=c}return e.request(i.method,i.url,{observe:"response",responseType:"json",reportProgress:!1,...u,...i.options})})(b,this.httpClient,this.options.extractFiles).subscribe({next:E=>{r.setContext({response:E}),n.next(E.body)},error:E=>n.error(E),complete:()=>n.complete()});return()=>{R.closed||R.unsubscribe()}})}request(e){return this.requester(e)}}let Ie=(()=>{class i{httpClient;constructor(t){this.httpClient=t}create(t){return new ze(this.httpClient,t)}static \u0275fac=function(r){return new(r||i)(d.CoB($.HttpClient))};static \u0275prov=d.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var xe=C(6700),Be=C(3992),Le=C(9212);const re=x.gql`
  query GetUsers($options: PageQueryOptions) {
    users(options: $options) {
      data {
        id
        name
        phone
        username
        email
        address {
          geo {
            lat
            lng
          }
        }
      }
      meta {
        totalCount
      }
    }
  }
`,Ae=x.gql`
  mutation CreateUser($input: CreateUserInput!) {
    createUser(input: $input) {
      id
      name
      phone
      username
      email
      address {
        geo {
          lat
          lng
        }
      }
    }
  }
`,Pe=x.gql`
  mutation UpdateUser($id: ID!, $input: UpdateUserInput!) {
    updateUser(id: $id, input: $input) {
      id
      name
      phone
      username
      email
      address {
        geo {
          lat
          lng
        }
      }
    }
  }
`,Ne=x.gql`
  mutation DeleteUser($id: ID!) {
    deleteUser(id: $id)
  }
`;let ie=(()=>{class i{constructor(t,r){this.apollo=t,this.graphSvc=r,this._state$=new xe.g({loading:!1,error:null,modifying:!1,errorModify:null}),this.usersStore=this.graphSvc.createEntityStore({primaryKey:"id",getQuery:re,createQuery:Ae,updateQuery:Pe,deleteQuery:Ne,getResultKey:"users",createResultKey:"createUser",updateResultKey:"updateUser",deleteResultKey:"deleteUser"}),this.state$=this.usersStore.state$}stateChange(t){this._state$.pipe((0,Be.U)(1)).subscribe(r=>this._state$.next({...r,...t}))}usersGet(){return this.stateChange({loading:!0}),this.apollo.watchQuery({query:re}).valueChanges.pipe((0,Le.y)(()=>this.stateChange({loading:!1})))}userCreate(t){this.usersStore.createData(t).subscribe()}userUpdate(t,r){this.usersStore.updateData(t,r).subscribe()}static#t=this.\u0275fac=function(r){return new(r||i)(d.CoB(x.Apollo),d.CoB(Ct.GraphQLStoreCreatorService))};static#e=this.\u0275prov=d.wxM({token:i,factory:i.\u0275fac})}return i})();var _e=C(48);const Ke=(i,e)=>null==e?null:e.id;function He(i,e){if(1&i&&(d.I0R(0,"tr")(1,"td"),d.OEk(2),d.C$Y(),d.I0R(3,"td"),d.OEk(4),d.C$Y(),d.I0R(5,"td"),d.OEk(6),d.C$Y(),d.I0R(7,"td"),d.OEk(8),d.C$Y()()),2&i){const t=e.$implicit;d.yG2(2),d.cNF(null==t?null:t.name),d.yG2(2),d.cNF(null==t?null:t.username),d.yG2(2),d.cNF(null==t?null:t.phone),d.yG2(2),d.cNF(null==t?null:t.email)}}function We(i,e){if(1&i){const t=d.KQA();d.I0R(0,"div",1)(1,"h1"),d.OEk(2,"Users"),d.C$Y(),d.I0R(3,"div",2)(4,"div",3)(5,"table",4)(6,"tbody"),d.c53(7,He,9,4,"tr",null,Ke),d.C$Y()()(),d.I0R(9,"div",5)(10,"button",6),d.qCj("click",function(){d.usT(t);const n=d.GaO();return d.CGJ(n.userAdd())}),d.OEk(11,"Add User"),d.C$Y(),d.OEk(12," | "),d.I0R(13,"button",6),d.qCj("click",function(){d.usT(t);const n=d.GaO();return d.CGJ(n.userUpdate())}),d.OEk(14,"Update User"),d.C$Y(),d.OEk(15," | "),d.I0R(16,"button",6),d.qCj("click",function(){d.usT(t);const n=d.GaO();return d.CGJ(n.refresh())}),d.OEk(17,"Refresh Users"),d.C$Y(),d.I0R(18,"button",6),d.qCj("click",function(){d.usT(t);const n=d.GaO();return d.CGJ(n.userDelete())}),d.OEk(19,"Delete User"),d.C$Y()()()()}if(2&i){const t=e.ngIf;d.yG2(7),d.oho(t.data)}}let ne=(()=>{class i{constructor(t){this.svc=t}ngOnInit(){this.svc.state$.subscribe(t=>{console.warn(t.data)})}userAdd(){this.svc.usersStore.createData({username:"Test",name:"Test",email:"test@test.com"}).subscribe()}refresh(){}userUpdate(){this.svc.usersStore.updateData("1",{email:"eat@joes.com",username:"test@test.com"}).subscribe()}userDelete(){this.svc.usersStore.deleteData("1").subscribe()}static#t=this.\u0275fac=function(r){return new(r||i)(d.GI1(ie))};static#e=this.\u0275cmp=d.In1({type:i,selectors:[["app-users"]],decls:3,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col","col-12","col-md-8"],[1,"table","table-striped"],[1,"col","col-12","col-md-4"],["p-button","",3,"click"]],template:function(r,n){1&r&&(d.I0R(0,"lib-masterpage"),d.yuY(1,We,20,0,"div",0),d.wVc(2,"async"),d.C$Y()),2&r&&(d.yG2(),d.E7m("ngIf",d.kDX(2,1,n.svc.state$)))},dependencies:[at.u_,_e.I,at.a]})}return i})();const Ye=[{path:"",component:ne}],$e="https://graphqlzero.almansi.me/api";function ae(i){return{link:i.create({uri:$e}),cache:new Xt}}let Ve=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=d.a4G({type:i,bootstrap:[ne]});static#r=this.\u0275inj=d.s3X({providers:[ie,{provide:x.APOLLO_OPTIONS,useFactory:ae,deps:[Ie]}],imports:[$.HttpClientModule,at.MD,fe.qQ.forChild(Ye),ue.u,Ct.StateManagementModule,x.ApolloModule]})}return i})()}}]);