<div
  class="form-generator-formfield"
  *ngIf="visible$ | async"
  [attr.id]="formField?.id || null"
  [ngClass]="formField?.cssClasses ?? ''"
  [ngStyle]="formField?.inlineStyles ?? null"
>
  <ng-container *ngIf="formField">
    <!-- Text Field -->
    <lib-text
      *ngIf="formField.formFieldType === 'text'"
      [label]="formField.label"
      [placeholder]="formField.placeholder"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [minLength]="formField.minLength"
      [maxLength]="formField.maxLength"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-text>

    <!-- Password Field -->
    <lib-password
      *ngIf="formField.formFieldType === 'password'"
      [label]="formField.label"
      [placeholder]="formField.placeholder"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [minLength]="formField.minLength"
      [maxLength]="formField.maxLength"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-password>

    <!-- TextArea Field -->
    <lib-textarea
      *ngIf="formField.formFieldType === 'textarea'"
      [label]="formField.label"
      [placeholder]="formField.placeholder"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [rows]="formField.rows"
      [columns]="formField.columns"
      [maxlength]="formField.maxlength"
      [autoResize]="formField.autoResize"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-textarea>

    <!-- Date Field -->
    <lib-date
      *ngIf="formField.formFieldType === 'date'"
      [label]="formField.label"
      [placeholder]="formField.placeholder"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [inline]="formField.inline"
      [showIcon]="formField.showIcon"
      [dateFormat]="formField.dateFormat"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-date>

    <lib-select-button
      *ngIf="formField.formFieldType === 'selectButton'"
      [options]="formField.options"
      [label]="formField.label"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [multiple]="formField.multiple"
      [canUnselect]="formField.canUnselect"
      [dataKey]="formField.dataKey"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-select-button>

    <lib-dropdown
      *ngIf="formField.formFieldType === 'dropdown'"
      [options]="
        formField.datafield && datafields && datafields[formField.datafield]
          ? datafields[formField.datafield]
          : formField.options
      "
      [label]="formField.label"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [validators]="formField.validators"
      [scrollHeight]="formField.scrollHeight"
      [appendTo]="formField.appendTo"
      [virtualScroll]="formField.virtualScroll"
      [showClear]="formField.showClear"
      [insertEmptyOption]="formField.insertEmptyOption"
      [disabled]="disabled$ | async"
    ></lib-dropdown>

    <lib-phonenumber
      *ngIf="formField.formFieldType === 'phoneNumber'"
      [label]="formField.label"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [placeholder]="formField.placeholder"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-phonenumber>

    <lib-email
      *ngIf="formField.formFieldType === 'email'"
      [label]="formField.label"
      [placeholder]="formField.placeholder"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-email>
    <lib-number
      *ngIf="formField.formFieldType === 'number'"
      [label]="formField.label"
      [placeholder]="formField.placeholder"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [maxLength]="formField.maxLength"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [mode]="formField.mode"
      [currencySymbol]="formField.currencySymbol"
      [min]="formField.min"
      [max]="formField.max"
      [useGrouping]="formField.useGrouping"
      [minFractionDigits]="formField.minFractionDigits"
      [maxFractionDigits]="formField.maxFractionDigits"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    ></lib-number>

    <lib-radio
      *ngIf="formField.formFieldType === 'radio'"
      [options]="
        formField.datafield && datafields && datafields[formField.datafield]
          ? datafields[formField.datafield]
          : formField.options
      "
      [label]="formField.label"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [control]="formGroup.get(formField.field)"
      [id]="formField.id"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
      [formGroup]="formGroup"
    ></lib-radio>

    <lib-zipcode
      *ngIf="formField.formFieldType === 'zipcode'"
      [label]="formField.label"
      [placeholder]="formField.placeholder"
      [prefix]="formField.prefix"
      [suffix]="formField.suffix"
      [hint]="formField.hint"
      [automationId]="formField.automationId"
      [id]="formField.id"
      [name]="formField.name"
      [allowNineDigitCodes]="formField.allowNineDigitCodes"
      [dataType]="formField.dataType"
      [control]="formGroup.get(formField.field)"
      [formGroup]="formGroup"
      [validators]="formField.validators"
      [disabled]="disabled$ | async"
    >
    </lib-zipcode>

    <div style="color: red" *ngIf="!formGroup.get(formField.field)">
      Unable to find a form control at <strong>{{ formField.field }}</strong>
    </div>
  </ng-container>
</div>
