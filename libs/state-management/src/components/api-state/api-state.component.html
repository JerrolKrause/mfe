<div class="lib-state">
  <!-- Loading, no data -->
  <ng-container
    *ngIf="!stateSrc || (showLoading && stateSrc?.loading && !stateSrc?.data)"
  >
    <p-progressBar
      mode="indeterminate"
      class="lib-state-spacer"
      [style]="{ height: '12px' }"
    ></p-progressBar>
  </ng-container>

  <!-- Loading with data OR modifying -->
  <ng-container
    *ngIf="
      (showLoading && stateSrc?.loading && stateSrc?.data) ||
      (showModifying && stateSrc?.modifying)
    "
  >
    <p-progressBar
      mode="indeterminate"
      class="lib-state-spacer"
      [style]="{ height: '2px' }"
    ></p-progressBar>
  </ng-container>

  <!-- Loading error -->
  <ng-container *ngIf="showLoading && showErrorLoading && stateSrc?.error">
    <lib-error [error]="stateSrc?.error" [canClose]="false"></lib-error>
  </ng-container>

  <!-- Modifying error -->
  <ng-container
    *ngIf="
      showModifying &&
      showErrorModifying &&
      stateSrc?.errorModify &&
      !stateSrc?.error
    "
  >
    <lib-error [error]="stateSrc?.errorModify" [canClose]="false"></lib-error>
  </ng-container>

  <!-- Content from parent -->
  <ng-content *ngIf="stateSrc?.data !== null"></ng-content>
</div>
