<lib-masterpage
  [showNav]="false"
  *ngIf="{ state: state$ | async, params: routeParams$ | async } as comp"
>
  <div class="container py-4">
    <div style="margin: auto; max-width: 480px">
      <p-card *ngIf="!!comp.state?.finished">
        <div class="py-5 text-center">
          <h1 style="font-size: 1.8rem">User Updated Successfully</h1>
          <a class="clickable" (click)="openClassLink()">
            Back to the Future of CLASS for Branch:
            {{ comp.params?.branchId }}, App No:
            {{ comp.params?.userId }}
            <img
              src="assets/back-to-class-button.webp"
              style="max-width: 200px"
            />
          </a>
        </div>
      </p-card>
      <p-card *ngIf="!comp.state?.finished">
        <ng-template pTemplate="header">
          <div style="height: 6px">
            <p-progressBar
              mode="indeterminate"
              [style]="{ height: '6px' }"
              *ngIf="comp.state?.loading"
            ></p-progressBar>
          </div>
        </ng-template>

        <div class="p-card-title">
          Customer Information ({{ comp.params?.userId }})<br />
          Branch: {{ comp.params?.branchId }}
        </div>

        <form (submit)="submit()" [formGroup]="form">
          <table class="table table-sm table-striped">
            <tbody>
              <tr *ngIf="form.value.CUST_FIRST_NAME_X">
                <td>First Name</td>
                <td>{{ form.value.CUST_FIRST_NAME_X }}</td>
              </tr>
              <tr *ngIf="form.value.CUST_LAST_NAME_X">
                <td>Last Name</td>
                <td>{{ form.value.CUST_LAST_NAME_X }}</td>
              </tr>
              <tr>
                <td>Middle Initial</td>
                <td>
                  <input
                    id="name"
                    pInputText
                    formControlName="CUST_MIDDLE_INIT_X"
                    class="w-100"
                  />
                </td>
              </tr>
              <tr *ngIf="form.value.OTHER_NAMES_USED_X">
                <td>Other Names Used</td>
                <td>{{ form.value.OTHER_NAMES_USED_X }}</td>
              </tr>
            </tbody>
          </table>

          <div class="mb-3 text-end">
            <button pButton type="submit" [disabled]="comp.state?.loading">
              Update User
            </button>
          </div>
          <div class="text-end">
            <a class="clickable" (click)="openClassLink()">
              Back to the Future of CLASS for Branch:
              {{ comp.params?.branchId }}, App No:
              {{ comp.params?.userId }}
              <img
                src="assets/back-to-class-button.webp"
                style="max-width: 200px"
              />
            </a>
            <!-- <button class="p-button p-button-text" (click)="openClassLink()">
              <lib-icons icon="external-link-alt" class="me-2"></lib-icons> Open
              In Class
            </button> -->
          </div>
        </form>
      </p-card>
    </div>
  </div>
</lib-masterpage>
<p-toast></p-toast>
