"use strict";(self.webpackChunkapp_shell=self.webpackChunkapp_shell||[]).push([[183],{6183:(ve,R,l)=>{l.r(R),l.d(R,{LoanProductsModule:()=>ye,createApollo:()=>w});var B=l(4236),V=l(2929),X=l(6718),Y=l(8937),d=l(177),c=l(4341),Q=l(345),f=l(430),y=l(1141),G=l(491),$=l(5430),m=l(660),v=l(1631),H=l(2242),U=l(7983),A=l(3682),b=l(1452),I=l(4945),E=l(7802),t=l(3953),p=l(6354),k=l(1397),L=l(7673),j=l(2026);let W=(()=>{class e{constructor(n,i,o){this.fb=n,this.ref=i,this.config=o,this.creditProductForm=this.fb.group({id:null,parentId:null,label:null,insured:null,type:null,benefitAmount:null,fee:null,dateEffective:null,term:null}),this.formOptions={},this.formModel=[{type:"row",columns:[{type:"column",width:6,content:[{label:"Insured Name",type:"formField",formFieldType:"radio",field:"insured",options:[{label:"Colleen Denning",value:"Colleen Denning"}],validators:{required:!0}},{label:"Product Type",type:"formField",formFieldType:"radio",field:"label",options:[{label:"Life Insurance",value:"Life Insurance"},{label:"Loan Insurance",value:"Loan Insurance"},{label:"Unemployment Insurance",value:"Unemployment Insurance"}],validators:{required:!0}}]},{type:"column",width:6,content:[{label:"Benefit Amount",type:"formField",formFieldType:"number",field:"benefitAmount",placeholder:"$1,000",mode:"currency",validators:{required:!0}},{label:"Premium or Fee",type:"formField",formFieldType:"number",mode:"currency",field:"fee",placeholder:"$100",validators:{required:!0}},{label:"Effective Date",type:"formField",formFieldType:"date",field:"dateEffective",validators:{required:!0}},{label:"Term",type:"formField",formFieldType:"number",field:"term",placeholder:"24",validators:{required:!0}}]}]}]}ngOnInit(){this.config.data&&this.creditProductForm.patchValue(this.config.data)}submit(){this.ref.close(this.creditProductForm.getRawValue())}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(c.FormBuilder),t.rXU(m.Pw),t.rXU(m.sb))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-credit-products-builder"]],decls:1,vars:3,consts:[[3,"completed","formModel","formGroup","options"]],template:function(i,o){1&i&&(t.j41(0,"lib-form-generator",0),t.bIt("completed",function(){return o.submit()}),t.k0s()),2&i&&t.Y8G("formModel",o.formModel)("formGroup",o.creditProductForm)("options",o.formOptions)},dependencies:[j.v,c.NgControlStatusGroup,c.FormGroupDirective],changeDetection:0})}return e})(),J=(()=>{class e{constructor(n,i,o){this.fb=n,this.ref=i,this.config=o,this.nonCreditProductForm=this.fb.group({id:null,parentId:null,label:null,insured:null,type:null,benefitAmount:null,fee:null,dateEffective:null,term:null}),this.formOptions={},this.formModel=[{type:"row",columns:[{type:"column",width:6,content:[{label:"Insured Name",type:"formField",formFieldType:"radio",field:"insured",options:[{label:"Colleen Denning",value:"Colleen Denning"}],validators:{required:!0}},{label:"Product Type",type:"formField",formFieldType:"radio",field:"label",options:[{label:"Auto Plan",value:"Auto Plan"},{label:"Home & Auto Plan",value:"Home & Auto Plan"},{label:"Silver Safeguard Plan",value:"Silver Safeguard Plan"}],validators:{required:!0}}]},{type:"column",width:6,content:[{label:"Benefit Amount",type:"formField",formFieldType:"number",field:"benefitAmount",placeholder:"$1,000",mode:"currency",validators:{required:!0}},{label:"Premium or Fee",type:"formField",formFieldType:"number",mode:"currency",field:"fee",placeholder:"$100",validators:{required:!0}},{label:"Effective Date",type:"formField",formFieldType:"date",field:"dateEffective",validators:{required:!0}},{label:"Term",type:"formField",formFieldType:"number",field:"term",placeholder:"24",validators:{required:!0}}]}]}]}ngOnInit(){this.config.data&&this.nonCreditProductForm.patchValue(this.config.data)}submit(){this.ref.close(this.nonCreditProductForm.getRawValue())}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(c.FormBuilder),t.rXU(m.Pw),t.rXU(m.sb))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-non-credit-products-builder"]],decls:1,vars:3,consts:[[3,"completed","formModel","formGroup","options"]],template:function(i,o){1&i&&(t.j41(0,"lib-form-generator",0),t.bIt("completed",function(){return o.submit()}),t.k0s()),2&i&&t.Y8G("formModel",o.formModel)("formGroup",o.nonCreditProductForm)("options",o.formOptions)},dependencies:[j.v,c.NgControlStatusGroup,c.FormGroupDirective],changeDetection:0})}return e})();var u;!function(e){let a;var o;(o=a=e.SubProductType||(e.SubProductType={}))[o.Credit=0]="Credit",o[o.Noncredit=1]="Noncredit",e.isCreditProduct=function n(o){return o.type===a.Credit},e.isNonCreditProduct=function i(o){return o.type===a.Noncredit}}(u||(u={}));var M=l(1331),F=l(4412),g=l(6697);const K=[{id:"1",cashOut:18500,loanAmount:22100,monthlyPayment:432,paymentImpact:250,term:66,apr:16.16,ndi:1325,status:{systemGenerated:!0,secured:!0},vehicles:["2020 TOYOTA RAV4"],creditors:[],payoffs:1288,baseCashAdvance:16e3,fees:500,creditProducts:[],nonCreditProducts:[{id:"0",parentId:"1",type:u.SubProductType.Noncredit,label:"Auto Plan",benefitAmount:1e3,insured:"Colleen Denning",term:66,fee:49.99,dateEffective:"04/11/24"},{id:"1",parentId:"1",type:u.SubProductType.Noncredit,label:"Silver Safeguard Plan",insured:"Colleen Denning",benefitAmount:750,term:33,fee:9.99,dateEffective:"03/08/24"}]},{id:"2",cashOut:19200,loanAmount:24200,monthlyPayment:455,paymentImpact:175,term:54,apr:17.28,ndi:1211,creditProducts:[],nonCreditProducts:[],status:{systemGenerated:!0,secured:!0},vehicles:["MULTI VEHICLE"],creditors:[],payoffs:6588,baseCashAdvance:12110,fees:254},{id:"3",cashOut:8500,loanAmount:12100,monthlyPayment:125,paymentImpact:-52,term:36,apr:22.96,ndi:980,status:{invalid:"Doesn't meet minumum NDI requirements"},vehicles:["2010 CHEVROLET SILVERADO"],payoffs:674,baseCashAdvance:2300,fees:97}],z=[{id:"0",label:"DISCOVER FIN SVCS",totalOwed:673,monthlyPayment:33,apr:29,selected:!1},{id:"1",label:"BANK CREDIT CARD",totalOwed:6430,monthlyPayment:33,apr:18,selected:!1},{id:"2",label:"ULTRAMAR DIAMOND S",totalOwed:1250,monthlyPayment:45,apr:21,selected:!1},{id:"3",label:"EXXON/MBGA",totalOwed:345,monthlyPayment:30,apr:14,selected:!1}],Z=[{id:"1",label:"2020 TOYOTA RAV4",assetValue:36e3,totalOwed:0,monthlyPayment:0,apr:0,selected:!1},{id:"2",label:"2010 CHEVROLET SILVERADO",assetValue:10905,totalOwed:4e3,monthlyPayment:0,apr:0,selected:!1}];var x=l(6772);const ut=x.gql`
  query PingQuery {
    ping
  }
`,pt=x.gql`
  query Link($input: LinkInput!) {
    plaid {
      link(input: $input) {
        expiration
        reason
        status
        token
      }
    }
  }
`;let _=(()=>{class e{constructor(n,i,o){this.graphSvc=n,this.dialogService=i,this.storage=o,this.state$=new F.t({isCentral:!1,hasCustomerUpdate:!1,loanIsBeingWorkedOn:!0,isLocked:!1}),this.loanProducts$=new F.t(K.map(r=>this.creditProductsAdd(r))),this.assets$=new F.t(Z),this.creditors$=new F.t(z),this.pingStore=this.graphSvc.createEntityStore({autoLoad:!1,getQuery:ut}),this.plaidStore=this.graphSvc.createEntityStore({autoLoad:!1,getQuery:pt}),this.pingStore.getData().subscribe()}stateChange(n){this.state$.pipe((0,g.s)(1)).subscribe(i=>this.state$.next({...i,...n}))}loanProductAdd(n){if(n.id)this.loanProducts$.pipe((0,g.s)(1)).subscribe(i=>{const o=i.map(r=>r.id===n.id?{...r,...n}:r);this.loanProducts$.next(o)});else{const i=n.assets?.filter(s=>s.selected).map(s=>s.label),o=n.creditors.filter(s=>s.selected).map(s=>s.totalOwed).reduce((s,h)=>s+h,0),r={...n,id:String(this.getRandomNumberInRange(100,1e6)),apr:this.getRandomNumberInRange(14,24),monthlyPayment:this.getRandomNumberInRange(200,400),paymentImpact:this.getRandomNumberInRange(50,300),ndi:this.getRandomNumberInRange(100,1200),loanAmount:(n.cashOut??0)+o,vehicles:(i??[])?.length>1?"MULTI-VEHICLE":i,status:{}};this.loanProducts$.pipe((0,g.s)(1)).subscribe(s=>this.loanProducts$.next([...s,this.creditProductsAdd(r)]))}}loanProductStatusChange(n,i){this.loanProducts$.pipe((0,g.s)(1)).subscribe(o=>{const r=o.map(s=>s.id===n?{...s,status:{...s.status,...i}}:s);this.loanProducts$.next(r)})}loanProductDelete(n){confirm("Are you sure you want to delete this loan product?")&&this.loanProducts$.pipe((0,g.s)(1)).subscribe(o=>this.loanProducts$.next(o.filter(r=>r.id!==n)))}nonCreditProductSave(n){n?.parentId&&this.loanProducts$.next(this.loanProducts$.value.map(i=>{if(i.id===n.parentId){let o=i.nonCreditProducts??[];return o=n.id?o?.map(r=>n.id===r.id?n:r):[...o,{...n,id:String(this.getRandomNumberInRange(1e3,1e7))}],{...i,nonCreditProducts:o}}return i}))}nonCreditProductDelete(n){!n?.parentId||!n.id||!confirm("Are you sure you want to delete this non-credit product?")||this.loanProducts$.next(this.loanProducts$.value.map(o=>{if(o.id===n.parentId){const s=(o.nonCreditProducts??[]).filter(h=>h.id!==n.id);return{...o,nonCreditProducts:s}}return o}))}modifyLoanAmount(n){this.loanProducts$.pipe((0,g.s)(1)).subscribe(i=>this.loanProducts$.next(i.map(o=>({...o,cashOut:(o.cashOut??0)+n,loanAmount:(o.loanAmount??0)+n}))))}creditProductsAdd(n){return{...n,creditProducts:[{id:"0",parentId:n.id??"0",type:u.SubProductType.Credit,label:"Life Insurance",insured:"Colleen Denning",benefitAmount:n.loanAmount,term:n.term,fee:(n.loanAmount??0)/200,dateEffective:new Date,selected:!0},{id:"1",parentId:n.id??"0",type:u.SubProductType.Credit,label:"Disability",insured:"Colleen Denning",benefitAmount:n.loanAmount,term:n.term,fee:(n.loanAmount??0)/300,dateEffective:new Date,selected:!0},{id:"2",parentId:n.id??"0",type:u.SubProductType.Credit,label:"Unemployment",insured:"Colleen Denning",benefitAmount:n.loanAmount,term:n.term,fee:(n.loanAmount??0)/600,dateEffective:new Date,selected:!0}]}}modalOpen(n){this.dialogService.open(n.component,{header:n.header,modal:!0,closable:!0,data:n.data??null,dismissableMask:!0}).onClose.subscribe(i=>n?.callback&&n?.callback(i))}toggleOptionalProduct(n,i,o){!i||!o||this.loanProducts$.next(this.loanProducts$.value.map(r=>{if(r.id===i){const s=o.type===u.SubProductType.Credit?(r.creditProducts??[])?.map(P=>P.id===o.id?o:P):r.creditProducts,h=o.type===u.SubProductType.Noncredit?(r.nonCreditProducts??[])?.map(P=>P.id===o.id?o:P):r.nonCreditProducts;return{...r,creditProducts:s,nonCreditProducts:h}}return r}))}quoteSetActive(n){this.storage.quoteActive=n}getRandomNumberInRange(n,i){const o=Math.random()*(i-n)+n;return parseFloat(o.toFixed(2))}static#t=this.\u0275fac=function(i){return new(i||e)(t.KVO(M.GraphQLStoreCreatorService),t.KVO(m.o3),t.KVO(E.w5))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var C=l(2961),mt=l(3401),N=l(8480),O=l(5779),ht=l(3294);function ft(e,a){1&e&&(t.j41(0,"div",6),t.nrm(1,"lib-icons",7),t.j41(2,"div",8)(3,"div",9),t.EFF(4,"Being worked on by:"),t.k0s(),t.j41(5,"div")(6,"a",10),t.EFF(7,"Adrianne Williams"),t.k0s()()()())}let bt=(()=>{class e{constructor(n,i){this.route=n,this.lpSvc=i,this.title$=this.route.params.pipe((0,p.T)(o=>{const r=o.loanId;return r?"533854"===r?`#${r} | Colleen Denning`:`#${r} | John Smith`:"No Loan ID Found"})),this.loanIsBeingWorkedOn$=this.lpSvc.state$.pipe((0,p.T)(o=>o.loanIsBeingWorkedOn),(0,ht.F)())}isCentral(n){this.lpSvc.stateChange({isCentral:n.checked})}isLocked(n){this.lpSvc.stateChange({isLocked:n.checked})}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(f.nX),t.rXU(_))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-title-bar"]],decls:13,vars:6,consts:[[1,"title-bar"],[1,"d-flex"],[1,"title"],[1,"align","ms-3"],[1,"ms-2",3,"onChange"],["class","align",4,"ngIf"],[1,"align"],["icon","exclamation-triangle",1,"red","title-icon"],[1,"title-workedon"],[1,"title-sub"],["href","tel:+1234567890"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.nI1(4,"async"),t.k0s(),t.j41(5,"div",3),t.EFF(6," Is Central: "),t.j41(7,"p-inputSwitch",4),t.bIt("onChange",function(s){return o.isCentral(s)}),t.k0s()(),t.j41(8,"div",3),t.EFF(9," Is Locked: "),t.j41(10,"p-inputSwitch",4),t.bIt("onChange",function(s){return o.isLocked(s)}),t.k0s()()(),t.DNE(11,ft,8,0,"div",5),t.nI1(12,"async"),t.k0s()),2&i&&(t.R7$(3),t.JRh(t.bMT(4,2,o.title$)),t.R7$(8),t.Y8G("ngIf",t.bMT(12,4,o.loanIsBeingWorkedOn$)))},dependencies:[d.bT,C.G,v.HW,d.Jj],styles:[".title-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:.5rem}.title-bar[_ngcontent-%COMP%]   .align[_ngcontent-%COMP%]{display:flex;align-items:center}@media (min-width: 768px){.title-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}}.title-bar[_ngcontent-%COMP%]   .title-workedon[_ngcontent-%COMP%]{line-height:14px}.title-bar[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:22px;margin-right:.5rem;position:relative;top:2px}.title-bar[_ngcontent-%COMP%]   .title-sub[_ngcontent-%COMP%]{font-size:10px}"],changeDetection:0})}return e})(),gt=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loan-details"]],decls:2,vars:0,template:function(i,o){1&i&&(t.j41(0,"p"),t.EFF(1,"loan-details works!"),t.k0s())}})}return e})();var _t=l(8542);function Ct(e,a){1&e&&(t.j41(0,"tr")(1,"th",3),t.EFF(2,"Product"),t.k0s(),t.j41(3,"th",4),t.EFF(4,"Type"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Insured"),t.k0s(),t.j41(7,"th",6),t.EFF(8,"Term"),t.k0s(),t.j41(9,"th",7),t.EFF(10,"Benefit"),t.k0s(),t.j41(11,"th",7),t.EFF(12,"Premium/Fee"),t.k0s(),t.j41(13,"th",8),t.EFF(14,"Effective Date"),t.k0s(),t.j41(15,"th",8),t.EFF(16,"Included"),t.k0s(),t.j41(17,"th",9),t.EFF(18,"Actions"),t.k0s()())}function Pt(e,a){if(1&e){const n=t.RV6();t.j41(0,"a",12),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.edit(o))}),t.nrm(1,"lib-icons",13),t.k0s(),t.j41(2,"a",14),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.lpSvc.nonCreditProductDelete(o))}),t.nrm(3,"lib-icons",15),t.k0s()}}function yt(e,a){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.nI1(11,"currency"),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"currency"),t.k0s(),t.j41(15,"td"),t.EFF(16),t.nI1(17,"date"),t.k0s(),t.j41(18,"td")(19,"p-inputSwitch",10),t.mxI("ngModelChange",function(o){const r=t.eBV(n).$implicit;return t.DH7(r.selected,o)||(r.selected=o),t.Njj(o)}),t.bIt("onChange",function(o){const r=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.lpSvc.toggleOptionalProduct(o,s.parentId(),r))}),t.k0s()(),t.j41(20,"td",11),t.DNE(21,Pt,4,0),t.k0s()()}if(2&e){const n=a.$implicit,i=t.XpG(2);t.R7$(2),t.JRh(n.type?"Non-Credit":"Credit"),t.R7$(2),t.JRh(n.label),t.R7$(2),t.JRh(n.insured),t.R7$(2),t.SpI("",n.term," mo"),t.R7$(2),t.JRh(t.i5U(11,9,n.benefitAmount,"USD")),t.R7$(3),t.JRh(t.i5U(14,12,n.fee,"USD")),t.R7$(3),t.JRh(t.i5U(17,15,n.dateEffective,"M/dd/yy")),t.R7$(3),t.R50("ngModel",n.selected),t.R7$(2),t.vxM(n.type!==i.subProductType.Credit?21:-1)}}function vt(e,a){if(1&e&&(t.j41(0,"p-table",0),t.DNE(1,Ct,19,0,"ng-template",1)(2,yt,22,18,"ng-template",2),t.k0s()),2&e){const n=t.XpG();t.Y8G("value",n.products())}}let Ft=(()=>{class e{constructor(n){this.lpSvc=n,this.parentId=(0,t.hFB)(null),this.creditProducts=(0,t.hFB)(null),this.nonCreditProducts=(0,t.hFB)(null),this.colLength=(0,t.hFB)(7),this.products=(0,t.EWP)(()=>[...this.creditProducts()??[],...this.nonCreditProducts()??[]].sort((i,o)=>i.type-o.type)),this.subProductType=u.SubProductType,this.modalOpen=new t.bkB}edit(n){this.modalOpen.emit({type:this.subProductType.Noncredit,parentId:n.parentId,product:n})}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(_))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-optional-products-grid"]],inputs:{parentId:[1,"parentId"],creditProducts:[1,"creditProducts"],nonCreditProducts:[1,"nonCreditProducts"],colLength:[1,"colLength"]},outputs:{modalOpen:"modalOpen"},decls:1,vars:1,consts:[["dataKey","id","styleClass","mb-3",3,"value"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","type"],["pSortableColumn","label"],["pSortableColumn","insured"],["pSortableColumn","term"],["pSortableColumn","fee"],["pSortableColumn","dateEffective"],["pSortableColumn","",1,"text-end"],[3,"ngModelChange","onChange","ngModel"],[1,"text-end"],["title","Edit this product",1,"me-2",3,"click"],["icon","cog",1,"me-1"],["title","Delete this product",3,"click"],["icon","trash",1,"me-1"]],template:function(i,o){1&i&&t.DNE(0,vt,3,1,"p-table",0),2&i&&t.vxM(o.products().length?0:-1)},dependencies:[C.G,v.HW,c.NgControlStatus,c.NgModel,O.Ei,b.Table,b.SortableColumn,d.oe,d.vh],styles:[".toggle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}"],changeDetection:0})}return e})();const Tt=()=>[],It=()=>({"min-width":"50rem"}),Et=e=>({"text-end":e}),kt=e=>({"row-selected":e});function Lt(e,a){if(1&e&&(t.j41(0,"th",6),t.nrm(1,"span",7),t.k0s()),2&e){const n=a.$implicit,i=a.$index,o=t.XpG(2);t.Y8G("pSortableColumn",n.prop)("ngClass",t.eq3(3,Et,i===o.columns.length-1)),t.R7$(),t.Y8G("innerHTML",n.label,t.npT)}}function jt(e,a){if(1&e&&(t.j41(0,"tr"),t.Z7z(1,Lt,2,5,"th",6,t.fX1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Dyx(n.columns)}}function xt(e,a){1&e&&t.nrm(0,"lib-icons",10)}function Ot(e,a){1&e&&t.nrm(0,"lib-icons",11)}function St(e,a){if(1&e&&(t.EFF(0),t.nI1(1,"currency")),2&e){const n=t.XpG(),i=n.$implicit,o=n.rowIndex,r=t.XpG();t.SpI(" - ",t.ii3(1,1,i.monthlyPayment+r.monthlyPaymentRange()[o],"USD","symbol","1.2-2")," ")}}function Rt(e,a){if(1&e&&t.nrm(0,"lib-icons",12),2&e){const n=t.XpG().$implicit;t.Y8G("pTooltip","This loan product will save the customer $"+n.paymentImpact+" per month")}}function Gt(e,a){if(1&e&&t.nrm(0,"lib-icons",13),2&e){const n=t.XpG().$implicit;t.Y8G("pTooltip","Actual cost to the customer will be $"+-n.paymentImpact+" per month based on selected payoffs")}}function $t(e,a){1&e&&t.nrm(0,"lib-icons",14)}function At(e,a){1&e&&t.nrm(0,"lib-icons",15)}function Mt(e,a){1&e&&t.nrm(0,"lib-icons",16)}function Nt(e,a){1&e&&t.nrm(0,"lib-icons",17)}function Dt(e,a){if(1&e&&t.nrm(0,"lib-icons",18),2&e){const n=t.XpG().$implicit;t.Y8G("pTooltip",n.status.invalid)}}function wt(e,a){if(1&e){const n=t.RV6();t.j41(0,"tr",8)(1,"td"),t.nrm(2,"p-button",9),t.k0s(),t.j41(3,"td"),t.DNE(4,xt,1,0,"lib-icons",10)(5,Ot,1,0,"lib-icons",11),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"currency"),t.k0s(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"currency"),t.k0s(),t.j41(14,"td"),t.EFF(15),t.nI1(16,"currency"),t.DNE(17,St,2,6),t.k0s(),t.j41(18,"td"),t.EFF(19),t.nI1(20,"currency"),t.DNE(21,Rt,1,1,"lib-icons",12)(22,Gt,1,1,"lib-icons",13),t.k0s(),t.j41(23,"td"),t.EFF(24),t.k0s(),t.j41(25,"td"),t.EFF(26),t.k0s(),t.j41(27,"td"),t.EFF(28),t.nI1(29,"currency"),t.k0s(),t.j41(30,"td"),t.DNE(31,$t,1,0,"lib-icons",14)(32,At,1,0,"lib-icons",15)(33,Mt,1,0,"lib-icons",16)(34,Nt,1,0,"lib-icons",17)(35,Dt,1,1,"lib-icons",18),t.k0s(),t.j41(36,"td",19)(37,"p-splitButton",20),t.bIt("onClick",function(){const o=t.eBV(n).rowIndex,r=t.XpG();return t.Njj(r.quoteSelect(o))}),t.k0s()()()}if(2&e){const n=a.$implicit,i=a.expanded,o=a.rowIndex,r=t.XpG();t.Y8G("ngClass",t.eq3(50,kt,r.quoteSelected()===o)),t.R7$(2),t.Y8G("pRowToggler",n)("text",!0)("rounded",!0)("plain",!0)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),t.R7$(2),t.vxM(null!=n.status&&n.status.secured?4:5),t.R7$(3),t.JRh(n.vehicles.length?n.vehicles:"None"),t.R7$(2),t.JRh(t.ii3(10,25,n.cashOut,"USD","symbol","1.0-2")),t.R7$(3),t.SpI(" ",t.ii3(13,30,n.loanAmount,"USD","symbol","1.0-2")," "),t.R7$(3),t.SpI(" ",t.ii3(16,35,n.monthlyPayment,"USD","symbol","1.0-2")," "),t.R7$(2),t.vxM(r.monthlyPaymentRange()[o]?17:-1),t.R7$(2),t.SpI(" ",t.ii3(20,40,n.paymentImpact,"USD","symbol","1.0-2")," "),t.R7$(2),t.vxM(n.paymentImpact>0?21:22),t.R7$(3),t.SpI("",n.term," mos"),t.R7$(2),t.SpI("",n.apr,"%"),t.R7$(2),t.JRh(t.ii3(29,45,n.ndi,"USD","symbol","1.0-2")),t.R7$(3),t.vxM(n.status.systemGenerated?31:-1),t.R7$(),t.vxM(n.status.approved?32:-1),t.R7$(),t.vxM(n.status.rejected?33:-1),t.R7$(),t.vxM(n.status.customerSelected?34:-1),t.R7$(),t.vxM(n.status.invalid?35:-1),t.R7$(2),t.Y8G("label",(r.quoteSelected(),"Select"))("icon",r.quoteSelected()===o?"pi pi-check-square":"pi pi-stop")("model",r.actions()[o])}}function Bt(e,a){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td")(2,"div",21)(3,"app-optional-products-grid",22),t.bIt("modalOpen",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.modalOpen.emit(o))}),t.k0s(),t.j41(4,"div",19)(5,"p-button",23),t.bIt("click",function(){const o=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.modalOpen.emit({parentId:o.id,type:r.SubProductType.Noncredit}))}),t.EFF(6,"Add Non-Credit Product"),t.k0s()()()()()}if(2&e){const n=a.$implicit,i=t.XpG();t.R7$(),t.BMQ("colspan",i.columns.length+1),t.R7$(2),t.Y8G("parentId",n.id)("creditProducts",n.creditProducts)("nonCreditProducts",n.nonCreditProducts)("colLength",i.columns.length+1)}}function Vt(e,a){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2," No loan products have been created yet. "),t.k0s()()),2&e){const n=t.XpG();t.R7$(),t.BMQ("colspan",n.columns.length+1)}}let Xt=(()=>{class e{expandAll(){this.expandedRows.set((this.loanProducts()??[]).reduce((n,i)=>(n[i.id??""]=!0)&&n,{}))}constructor(n,i){this.lpSvc=n,this.dialogService=i,this.loanProducts=(0,t.hFB)(null),this.isLocked=(0,t.hFB)(null),this.columns=[{label:"",prop:"droprow"},{label:"Type",prop:"product"},{label:"Vehicle",prop:"vehicle"},{label:"Cash Out",prop:"cashOut"},{label:"Total<br/> Loan Amount",prop:"loanAmount"},{label:"Monthly<br/> Payment Range",prop:"monthlyPayment"},{label:"Payment<br/> Impact",prop:"paymentImpact"},{label:"Term",prop:"term"},{label:"APR",prop:"apr"},{label:"NDI",prop:"ndi"},{label:"Status",prop:"status"},{label:"Actions",prop:"actions"}],this.SubProductType=u.SubProductType,this.actions=(0,t.EWP)(()=>(this.loanProducts()??[]).map(o=>[{label:"Loan Details",icon:"pi pi-search",command:()=>this.lpSvc.modalOpen({component:gt,header:"Loan Details",data:o}),disabled:this.isLocked()??!1},{label:"Edit",icon:"pi pi-pencil",command:()=>this.loanProductEdit.emit(o),disabled:this.isLocked()??!1},{label:"Escalate",icon:"pi pi-exclamation-triangle"},{label:"Approve",icon:"pi pi-thumbs-up",command:()=>{o.id&&this.lpSvc.loanProductStatusChange(o.id,o.status?.approved?{approved:!1,rejected:!1}:{approved:!0,rejected:!1})}},{label:"Reject",icon:"pi pi-thumbs-down",command:()=>{o.id&&this.lpSvc.loanProductStatusChange(o.id,o.status?.rejected?{approved:!1,rejected:!1}:{approved:!1,rejected:!0})}},{label:"Set Customer Selection",icon:"pi pi-check-square",command:()=>{console.log(o)}},{label:"Delete",icon:"pi pi-trash",disabled:this.isLocked()??!1,command:()=>{o.id&&this.lpSvc.loanProductDelete(o.id)}}])),this.monthlyPaymentRange=(0,t.EWP)(()=>(this.loanProducts()??[]).map(o=>[...o.creditProducts??[],...o.nonCreditProducts??[]].filter(r=>r.selected).reduce((r,s)=>r+(s.fee??0),0))),this.expandedRows=(0,t.vPA)({}),this.quoteSelected=(0,t.vPA)(null),this.modalOpen=new t.bkB,this.loanProductEdit=new t.bkB,this.loanProductDelete=new t.bkB,this.loanProductStatusChange=new t.bkB}quoteSelect(n){this.quoteSelected.set(n===this.quoteSelected()?null:n),this.lpSvc.quoteSetActive(this.loanProducts()?.[n]??null)}openModal(n){this.dialogService.open(n.component,{header:n.header,modal:!0,closable:!0,data:n.data,dismissableMask:!0})}collapseAll(){this.expandedRows.set({})}onRowExpand(n){}onRowCollapse(n){}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(_),t.rXU(m.o3))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loan-products-grid"]],inputs:{loanProducts:[1,"loanProducts"],isLocked:[1,"isLocked"]},outputs:{modalOpen:"modalOpen",loanProductEdit:"loanProductEdit",loanProductDelete:"loanProductDelete",loanProductStatusChange:"loanProductStatusChange"},decls:6,vars:5,consts:[["id","loan-products-grid"],["dataKey","id",3,"onRowExpand","onRowCollapse","value","tableStyle","expandedRowKeys"],["pTemplate","header"],["pTemplate","body","pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"pSortableColumn","ngClass"],[1,"me-2",3,"innerHTML"],[3,"ngClass"],["type","button","pRipple","",3,"pRowToggler","text","rounded","plain","icon"],["icon","lock","pTooltip","Secured","tooltipPosition","bottom"],["icon","lock-open","pTooltip","Unsecured","tooltipPosition","bottom"],["icon","smile","tooltipPosition","bottom",3,"pTooltip"],["icon","arrow-down",3,"pTooltip"],["icon","info-circle","pTooltip","System generated quote, cannot be removed","tooltipPosition","bottom",1,"me-2","grey"],["icon","thumbsup","pTooltip","This quote is approved","tooltipPosition","bottom",1,"me-2","green"],["icon","thumbsdown","pTooltip","This quote is rejected","tooltipPosition","bottom",1,"me-2","orange"],["icon","user","pTooltip","This quote has been selected by the customer","tooltipPosition","bottom",1,"me-2","blue"],["icon","exclamation-triangle","tooltipPosition","bottom",1,"me-2","red",3,"pTooltip"],[1,"text-end"],["appendTo","body",3,"onClick","label","icon","model"],[1,"p-3"],[3,"modalOpen","parentId","creditProducts","nonCreditProducts","colLength"],[3,"click"]],template:function(i,o){if(1&i&&(t.j41(0,"div",0)(1,"p-table",1),t.bIt("onRowExpand",function(s){return o.onRowExpand(s)})("onRowCollapse",function(s){return o.onRowCollapse(s)}),t.DNE(2,jt,3,0,"ng-template",2)(3,wt,38,52,"ng-template",3)(4,Bt,7,5,"ng-template",4)(5,Vt,3,1,"ng-template",5),t.k0s()()),2&i){let r;t.R7$(),t.Y8G("value",null!==(r=o.loanProducts())&&void 0!==r?r:t.lJ4(3,Tt))("tableStyle",t.lJ4(4,It))("expandedRowKeys",o.expandedRows())}},dependencies:[d.YU,C.G,O.Ei,A.f,y.Button,_t.m,b.Table,b.SortableColumn,b.RowToggler,Ft,d.oe],styles:["#loan-products-grid .row-selected,#loan-products-grid .row-selected td{background:#c6d0f3}#loan-products-grid .p-splitbutton,#loan-products-grid .p-splitbutton .p-splitbutton-defaultbutton{padding:0}#loan-products-grid .p-splitbutton .p-splitbutton-menubutton.p-button-icon-only{padding:0 .75rem}#loan-products-grid .p-splitbutton .p-button-icon{font-size:12px;padding-left:.5rem;padding-right:0;margin:0}#loan-products-grid .p-splitbutton .p-button-label{padding:0 .5rem}#loan-products-grid .p-inputswitch-slider,#loan-products-grid .p-inputswitch .p-inputswitch-slider,#loan-products-grid .p-inputswitch .p-inputswitch-slider:before{transition:none!important}\n"],encapsulation:2,changeDetection:0})}return e})();var T=l(9172),Yt=l(152),Qt=l(4572);const Ut=e=>({isEditing:e}),Wt=e=>[e];function Jt(e,a){if(1&e){const n=t.RV6();t.j41(0,"div")(1,"a",17),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.reset())}),t.EFF(2,"Cancel"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Editing Loan Product"),t.k0s()()}}function Kt(e,a){if(1&e&&(t.j41(0,"div")(1,"strong"),t.EFF(2,"APR:"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",n.value.apr,"% ")}}function zt(e,a){if(1&e&&(t.j41(0,"div",19),t.nrm(1,"p-checkbox",20),t.j41(2,"div",21)(3,"div")(4,"strong"),t.EFF(5,"Valued:"),t.k0s(),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"div")(9,"strong"),t.EFF(10,"Equity:"),t.k0s(),t.EFF(11),t.nI1(12,"currency"),t.k0s(),t.DNE(13,Kt,4,1,"div",22),t.k0s()()),2&e){const n=a.$implicit;t.Y8G("formGroupName",a.index),t.R7$(),t.Y8G("binary",!0)("label",n.value.label),t.R7$(5),t.SpI(" ",t.ii3(7,6,n.value.assetValue,"USD","symbol","1.0-0")," "),t.R7$(5),t.SpI(" ",t.ii3(12,11,n.value.assetValue/2,"USD","symbol","1.0-0")," "),t.R7$(2),t.Y8G("ngIf",n.value.apr)}}function Zt(e,a){if(1&e&&(t.j41(0,"div",9),t.DNE(1,zt,14,16,"div",18),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.assetsFormArray.controls)}}function qt(e,a){1&e&&(t.j41(0,"p"),t.EFF(1,"No assets listed."),t.k0s())}function te(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",10)(1,"p-checkbox",24),t.bIt("onChange",function(){const o=t.eBV(n).index,r=t.XpG(3);return t.Njj(r.onSelectCreditor(o))}),t.k0s(),t.j41(2,"div",21)(3,"div")(4,"strong"),t.EFF(5,"Balance:"),t.k0s(),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"div")(9,"strong"),t.EFF(10,"Payment:"),t.k0s(),t.EFF(11),t.nI1(12,"currency"),t.k0s()()()}if(2&e){const n=a.$implicit,i=t.XpG(3);t.R7$(),t.Y8G("binary",!0)("label",n.value.label)("disabled",i.isLocked()),t.R7$(5),t.SpI(" ",t.ii3(7,5,n.value.totalOwed,"USD","symbol","1.0-0")," "),t.R7$(5),t.SpI(" ",t.ii3(12,10,n.value.monthlyPayment,"USD","symbol","1.0-0")," ")}}function ee(e,a){if(1&e&&t.DNE(0,te,13,15,"div",23),2&e){const n=t.XpG(2);t.Y8G("ngForOf",n.creditorsFormArray.controls)}}function ne(e,a){1&e&&(t.j41(0,"p"),t.EFF(1,"No creditors listed."),t.k0s())}function oe(e,a){if(1&e&&(t.j41(0,"div",12)(1,"p",25)(2,"small"),t.EFF(3,"Additional Info"),t.k0s()(),t.j41(4,"table",26)(5,"tbody")(6,"tr")(7,"td")(8,"strong"),t.EFF(9,"NDI"),t.k0s()(),t.j41(10,"td"),t.EFF(11),t.nI1(12,"async"),t.nI1(13,"currency"),t.k0s()(),t.j41(14,"tr")(15,"td")(16,"strong"),t.EFF(17,"PTI"),t.k0s()(),t.j41(18,"td"),t.EFF(19,"36%"),t.k0s()(),t.j41(20,"tr")(21,"td")(22,"strong"),t.EFF(23,"LTV"),t.k0s()(),t.j41(24,"td"),t.EFF(25,"120"),t.k0s()()()()()),2&e){const n=t.XpG(2);t.R7$(11),t.SpI(" ",t.ii3(13,3,t.bMT(12,1,n.ndi$),"USD","symbol","1.0-0")," ")}}function ie(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",1)(1,"form",2),t.bIt("ngSubmit",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.onSubmit())}),t.DNE(2,Jt,5,0,"div"),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),t.nI1(7,"async"),t.nrm(8,"lib-icons",7),t.EFF(9," Modify Assets"),t.k0s(),t.j41(10,"h2"),t.EFF(11,"Assets "),t.j41(12,"span",8),t.EFF(13,"Select for collateral"),t.k0s()(),t.DNE(14,Zt,2,1,"div",9)(15,qt,2,0,"p"),t.k0s(),t.j41(16,"div",5)(17,"h2"),t.EFF(18,"Creditors "),t.j41(19,"span",8),t.EFF(20,"Select for payoff"),t.k0s()(),t.DNE(21,ee,1,1,"div",10)(22,ne,2,0,"p"),t.nrm(23,"hr"),t.j41(24,"div",11)(25,"h2"),t.EFF(26,"Total Payoff:"),t.k0s(),t.j41(27,"h2"),t.EFF(28),t.nI1(29,"async"),t.nI1(30,"currency"),t.k0s()(),t.nrm(31,"hr"),t.j41(32,"div",11)(33,"h2"),t.EFF(34,"Base Cash Advance:"),t.k0s(),t.j41(35,"h2"),t.EFF(36),t.nI1(37,"async"),t.nI1(38,"currency"),t.k0s()()(),t.DNE(39,oe,26,8,"div",12),t.k0s(),t.j41(40,"div",13),t.nrm(41,"lib-form-generator",14),t.k0s()(),t.j41(42,"div",15),t.nrm(43,"p-button",16),t.k0s()()()}if(2&e){let n;const i=a.ngIf,o=t.XpG();t.R7$(),t.Y8G("formGroup",o.loanProductsForm),t.R7$(),t.vxM(i.isEditing?2:-1),t.R7$(4),t.Y8G("routerLink",t.eq3(30,Wt,"/loan/"+t.bMT(7,14,o.loanID$)+"/assets")),t.R7$(8),t.vxM(o.assetsFormArray.controls.length?14:15),t.R7$(7),t.vxM(o.creditorsFormArray.controls.length?21:22),t.R7$(7),t.SpI(" ",t.ii3(30,18,t.bMT(29,16,o.payoffsTotal$),"USD","symbol","1.0-0")," "),t.R7$(8),t.SpI(" ",t.ii3(38,25,t.bMT(37,23,o.baseCashAdvance$),"USD","symbol","1.0-0")," "),t.R7$(3),t.vxM(null!=(n=o.state())&&n.isCentral?39:-1),t.R7$(2),t.Y8G("formModel",o.loanProductsModel())("disabled",o.isLocked())("formGroup",o.loanProductsForm)("options",o.formOptions)("disableSubmit",!1),t.R7$(2),t.Y8G("label",i.isEditing?"Update Loan Product":"Add Loan Product")}}let re=(()=>{class e{constructor(n,i){this.fb=n,this.route=i,this.state=(0,t.hFB)(null),this.assets=(0,t.hFB)(null),this.creditors=(0,t.hFB)(null),this.maxValues=(0,t.hFB)({cashOut:22e3,payoffs:1e4,baseCashAdvance:2e4}),this.formDefaults=(0,t.hFB)({id:"",cashOut:1e3,loanAmount:0,monthlyPayment:0,paymentImpact:0,term:24,apr:0,payoffs:10,baseCashAdvance:2e3,fees:100}),this.isLocked=(0,t.hFB)(!1),this.loanProductsModel=(0,t.EWP)(()=>(e=>[{label:"Cash to Customer",type:"formField",formFieldType:"number",mode:"currency",field:"cashOut",placeholder:"$1,000",max:e?.cashOut??null,hint:e?.cashOut?`Max cash out is $${e?.cashOut}`:null,validators:{required:!0}},{type:"html",html:"<hr/>"},{label:"Term",type:"formField",formFieldType:"number",field:"term",placeholder:"24",validators:{required:!0}},{label:"Side Loan Override",type:"formField",formFieldType:"radio",field:"sideLoan",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},{type:"row",columns:[{type:"column",width:6,content:[{label:"Fees",type:"formField",formFieldType:"number",mode:"currency",field:"fees"}]},{type:"column",width:6,content:[{cssClasses:"p-button w-100 text-center mt-4",type:"button",label:"Select",cmd:()=>{}}]}]}])(this.maxValues())),this.loanProductsForm=this.fb.group({id:"",cashOut:0,loanAmount:0,monthlyPayment:0,paymentImpact:0,term:0,apr:0,payoffs:0,baseCashAdvance:0,fees:0,sideLoan:!1,assets:this.fb.array([]),creditors:this.fb.array([])}),this.payoffsTotal$=this.loanProductsForm.controls.creditors.valueChanges.pipe((0,T.Z)(this.loanProductsForm.controls.creditors.value),(0,Yt.B)(250),(0,p.T)(o=>o.filter(r=>r?.selected).reduce((r,s)=>r+(s?.totalOwed??0),0))),this.baseCashAdvance$=(0,Qt.z)([this.payoffsTotal$,this.loanProductsForm.controls.cashOut.valueChanges.pipe((0,T.Z)(this.loanProductsForm.controls.cashOut.value))]).pipe((0,p.T)(([o,r])=>o+(r??0))),this.loanID$=this.route.paramMap.pipe((0,p.T)(o=>o.get("loanId")??null)),this.isEditing$=this.loanProductsForm.valueChanges.pipe((0,T.Z)(this.loanProductsForm.value),(0,p.T)(o=>!!o.id)),this.formOptions={submitButton:{hide:!0}},this.ndi$=this.loanProductsForm.valueChanges.pipe((0,T.Z)(this.loanProductsForm.value),(0,p.T)(o=>4e3-(o.cashOut??0))),this.formSubmit=new t.bkB,this.reset(),(0,t.QZP)(()=>this.populateAssets(this.assets())),(0,t.QZP)(()=>this.populateCreditors(this.creditors())),(0,t.QZP)(()=>this.loanProductsForm.patchValue(this.formDefaults()??{}))}reset(){this.loanProductsForm.reset(),this.populateAssets(this.assets()),this.populateCreditors(this.creditors())}populateAssets(n){this.assetsFormArray.clear(),n?.forEach(i=>{let o=!1;(i.selected||this.formDefaults()?.vehicles?.includes("MULTI VEHICLE")||this.formDefaults()?.vehicles?.includes(i.label))&&(o=!0),this.assetsFormArray.push(this.fb.group({id:[i.id],label:[i.label],totalOwed:[i.totalOwed],assetValue:[i.assetValue],monthlyPayment:[i.monthlyPayment],apr:[i.apr],selected:[o]}))})}populateCreditors(n){this.creditorsFormArray.clear(),n?.forEach(i=>{this.creditorsFormArray.push(this.fb.group({id:[i.id],label:[i.label],totalOwed:[i.totalOwed],monthlyPayment:[i.monthlyPayment],apr:[i.apr],selected:[i.selected]}))})}get assetsFormArray(){return this.loanProductsForm.get("assets")}get creditorsFormArray(){return this.loanProductsForm.get("creditors")}onSelectAsset(n){const i=this.assetsFormArray.at(n);i.patchValue({selected:!i.value.selected})}onSelectCreditor(n){const i=this.creditorsFormArray.at(n);i.patchValue({selected:!i.value.selected})}onSubmit(){this.loanProductsForm.patchValue(this.loanProductsForm.value),this.loanProductsForm.markAllAsTouched(),!this.loanProductsForm.invalid&&(this.formSubmit.emit(this.loanProductsForm.value),this.reset())}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(c.FormBuilder),t.rXU(f.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loan-products-builder"]],inputs:{state:[1,"state"],assets:[1,"assets"],creditors:[1,"creditors"],maxValues:[1,"maxValues"],formDefaults:[1,"formDefaults"],isLocked:[1,"isLocked"]},outputs:{formSubmit:"formSubmit"},decls:2,vars:5,consts:[["class","loan-form-container",4,"ngIf"],[1,"loan-form-container"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col","col-12","col-md-7","mb-3"],[1,"section"],["title","Add/Edit/Delete assets for this loan",1,"float-end",3,"routerLink"],["icon","cog",1,"me-1"],[1,"sub-title"],["formArrayName","assets"],[1,"item"],[1,"d-flex","justify-content-between"],[1,"additional-info"],[1,"col","col-12","col-md-5","mb-3"],[3,"formModel","disabled","formGroup","options","disableSubmit"],[1,"text-end"],["type","submit",3,"label"],[1,"float-end",3,"click"],["class","item",3,"formGroupName",4,"ngFor","ngForOf"],[1,"item",3,"formGroupName"],["formControlName","selected",3,"binary","label"],[1,"sub-text"],[4,"ngIf"],["class","item",4,"ngFor","ngForOf"],[3,"onChange","binary","label","disabled"],[1,"mb-0"],[1,"table","table-sm","table-striped","mb-0"]],template:function(i,o){1&i&&(t.DNE(0,ie,44,32,"div",0),t.nI1(1,"async")),2&i&&t.Y8G("ngIf",t.eq3(3,Ut,t.bMT(1,1,o.isEditing$)))},dependencies:[d.Sq,d.bT,C.G,f.Wk,j.v,c.\u0275NgNoValidate,c.NgControlStatus,c.NgControlStatusGroup,$.Sc,y.Button,c.FormGroupDirective,c.FormControlName,c.FormGroupName,c.FormArrayName,d.Jj,d.oe],styles:["h2[_ngcontent-%COMP%]{margin-bottom:5px}.sub-title[_ngcontent-%COMP%]{font-size:12px;font-style:italic;font-weight:400}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:3px}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(odd){background:var(--color-bg-lt)}.sub-text[_ngcontent-%COMP%]{font-size:11px;padding-left:28px}.sub-text[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline;margin-right:.25rem}.additional-info[_ngcontent-%COMP%]{margin-top:1rem;border:1px solid #e2e8f0;padding:.5rem}"],changeDetection:0})}return e})();var ae=l(9859);let se=(()=>{class e{constructor(n,i){this.lpSvc=n,this.fb=i,this.modifyForm=this.fb.group({cashOut:null,maxPayment:null})}updateLoanAmount(){const n=this.modifyForm.value.cashOut;n&&(this.lpSvc.modifyLoanAmount(n),this.modifyForm.reset())}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(_),t.rXU(c.FormBuilder))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-modify-loan-products"]],decls:9,vars:1,consts:[[3,"formGroup"],[1,"d-flex","mb-3",2,"align-items","center"],["label","Cash Out","mode","currency","formControlName","cashOut","placeholder","$1,000","hint","Negative amounts are supported",1,"me-2"],["label","Add New Products",3,"click"],[1,"d-flex",2,"align-items","center"],["label","Max Payment","mode","currency","formControlName","maxPayment","placeholder","$500","hint","Max monthly payment",1,"me-2"]],template:function(i,o){1&i&&(t.j41(0,"h2"),t.EFF(1,"Modify All Loan Products"),t.k0s(),t.j41(2,"form",0)(3,"div",1),t.nrm(4,"lib-number",2),t.j41(5,"p-button",3),t.bIt("click",function(){return o.updateLoanAmount()}),t.k0s()(),t.j41(6,"div",4),t.nrm(7,"lib-number",5),t.j41(8,"p-button",3),t.bIt("click",function(){return o.updateLoanAmount()}),t.k0s()()()),2&i&&(t.R7$(2),t.Y8G("formGroup",o.modifyForm))},dependencies:[ae.j,c.\u0275NgNoValidate,c.NgControlStatus,c.NgControlStatusGroup,y.Button,c.FormGroupDirective,c.FormControlName]})}return e})();const le=e=>({state:e});function ce(e,a){1&e&&(t.nrm(0,"lib-icons",18),t.EFF(1," Loan Products "))}function de(e,a){1&e&&t.nrm(0,"span",20)}function ue(e,a){if(1&e&&(t.nrm(0,"lib-icons",19),t.EFF(1," Customer View "),t.DNE(2,de,1,0,"span",20)),2&e){const n=t.XpG().ngIf;t.R7$(2),t.vxM(null!=n.state&&n.state.hasCustomerUpdate?2:-1)}}function pe(e,a){1&e&&t.EFF(0," Online: ")}function me(e,a){1&e&&t.EFF(0," Offline: ")}function he(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",1)(1,"lib-masterpage",2)(2,"div"),t.nrm(3,"app-title-bar"),t.j41(4,"div",3)(5,"div",4)(6,"p-card",5)(7,"h1"),t.nrm(8,"lib-icons",6),t.EFF(9," Loan Products "),t.k0s(),t.j41(10,"app-loan-products-grid",7),t.nI1(11,"async"),t.bIt("modalOpen",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.modalOpen(o))})("loanProductEdit",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.loanProductEdit(o))})("loanProductDelete",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.lpSvc.loanProductDelete(o))}),t.k0s()(),t.j41(12,"p-card",8),t.nrm(13,"app-modify-loan-products"),t.k0s()(),t.j41(14,"div",9)(15,"p-tabView",10),t.bIt("activeIndexChange",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.activeIndexChange(o))}),t.j41(16,"p-tabPanel"),t.DNE(17,ce,2,0,"ng-template",11),t.j41(18,"app-loan-products-builder",12),t.nI1(19,"async"),t.nI1(20,"async"),t.bIt("formSubmit",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.lpSvc.loanProductAdd(o))}),t.k0s()(),t.j41(21,"p-tabPanel"),t.DNE(22,ue,3,1,"ng-template",11),t.j41(23,"div",13)(24,"div"),t.nrm(25,"span",14),t.EFF(26,"Customer Is Online"),t.k0s(),t.j41(27,"div",15),t.DNE(28,pe,1,0)(29,me,1,0),t.j41(30,"p-inputSwitch",16),t.bIt("onChange",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.isOnline.set(o.checked))}),t.k0s()()(),t.j41(31,"lib-quote-form",17),t.nI1(32,"async"),t.bIt("quoteFormChanged",function(o){t.eBV(n);const r=t.XpG();return t.Njj(r.quoteFormChanged(o))}),t.k0s()()()()()()()()}if(2&e){let n;const i=a.ngIf,o=t.XpG();t.R7$(),t.Y8G("fullWidth",!0),t.R7$(9),t.Y8G("loanProducts",t.bMT(11,10,o.loanProducts$))("isLocked",null==i.state?null:i.state.isLocked),t.R7$(8),t.Y8G("state",i.state)("assets",t.bMT(19,12,o.assets$))("creditors",t.bMT(20,14,o.creditors$))("isLocked",null!==(n=null==i.state?null:i.state.isLocked)&&void 0!==n&&n)("formDefaults",o.loanProductToEdit()),t.R7$(10),t.vxM(o.isOnline()?28:29),t.R7$(3),t.Y8G("formDefaults",t.bMT(32,16,o.storage.quote$))}}let D=(()=>{class e{constructor(n,i,o,r){this.lpSvc=n,this.dialogService=i,this.storage=o,this.route=r,this.loanProducts$=this.route.params.pipe((0,p.T)(s=>s.loanId),(0,k.Z)(s=>"533854"===s?this.lpSvc.loanProducts$:(0,L.of)([]))),this.assets$=this.route.params.pipe((0,p.T)(s=>s.loanId),(0,k.Z)(s=>"533854"===s?this.lpSvc.assets$:(0,L.of)([]))),this.creditors$=this.route.params.pipe((0,p.T)(s=>s.loanId),(0,k.Z)(s=>"533854"===s?this.lpSvc.creditors$:(0,L.of)([]))),this.loanProductToEdit=(0,t.vPA)(null),this.isOnline=(0,t.vPA)(!1),this.lpSvc.plaidStore.state$.subscribe(s=>console.warn(s.data?.plaid?.link))}modalOpen({parentId:n,type:i,product:o}){const s=i===u.SubProductType.Credit?"Credit":"Non-Credit";this.dialogService.open(i===u.SubProductType.Credit?W:J,{header:o?.id?`Edit ${s} Product`:`Add ${s} Product`,data:{parentId:n,type:i,...o},modal:!0,closable:!0,dismissableMask:!0}).onClose.subscribe(h=>this.lpSvc.nonCreditProductSave(h))}loanProductEdit(n){this.loanProductToEdit.update(()=>n)}activeIndexChange(n){1===n&&this.lpSvc.stateChange({hasCustomerUpdate:!1})}quoteFormChanged(n){}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(_),t.rXU(m.o3),t.rXU(E.w5),t.rXU(f.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loan-products"]],decls:2,vars:5,consts:[["id","loan-products",4,"ngIf"],["id","loan-products"],[3,"fullWidth"],[1,"row"],[1,"col","col-12","col-md-8","mb-3"],["styleClass","p-2 mb-3"],["icon","money-check-alt"],[3,"modalOpen","loanProductEdit","loanProductDelete","loanProducts","isLocked"],["styleClass","p-2"],[1,"col","col-12","col-md-4","mb-3"],[3,"activeIndexChange"],["pTemplate","header"],[3,"formSubmit","state","assets","creditors","isLocked","formDefaults"],[1,"online-status"],[1,"circle","me-2"],[1,"align"],[1,"ms-2",3,"onChange"],[3,"quoteFormChanged","formDefaults"],["icon","money-check-alt",1,"me-2"],["icon","eye",1,"me-2"],[1,"circle","updated"]],template:function(i,o){1&i&&(t.DNE(0,he,33,18,"div",0),t.nI1(1,"async")),2&i&&t.Y8G("ngIf",t.eq3(3,le,t.bMT(1,1,o.lpSvc.state$)))},dependencies:[d.bT,C.G,mt.Y,N.z,v.HW,G.Card,O.Ei,I.JQ,I.Kp,bt,Xt,re,se,d.Jj],styles:[".align[_ngcontent-%COMP%]{display:flex;align-items:center}.online-status[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.circle[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border-radius:50%;background:green;margin-right:.5rem;animation:_ngcontent-%COMP%_pulse 1.5s infinite ease-in-out}.circle.updated[_ngcontent-%COMP%]{animation:none;background:red;width:.5rem;height:.5rem;margin-left:5px;position:relative;top:-3px}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}"],changeDetection:0})}return e})(),S=(()=>{class e{constructor(n){this.route=n,this.title$=this.route.url.pipe((0,p.T)(i=>this.toTitleCase(i[i.length-1].path)))}toTitleCase(n){return n.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(f.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-no-content"]],decls:4,vars:4,consts:[[3,"fullWidth"]],template:function(i,o){1&i&&(t.j41(0,"lib-masterpage",0)(1,"h1"),t.EFF(2),t.nI1(3,"async"),t.k0s()()),2&i&&(t.Y8G("fullWidth",!0),t.R7$(2),t.SpI("",t.bMT(3,2,o.title$)," Coming Soon!"))},dependencies:[N.z,d.Jj]})}return e})(),fe=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-select-loan-id"]],decls:2,vars:0,template:function(i,o){1&i&&(t.j41(0,"p"),t.EFF(1,"select-loan-id works!"),t.k0s())}})}return e})(),be=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-select-loan-task"]],decls:2,vars:0,template:function(i,o){1&i&&(t.j41(0,"p"),t.EFF(1,"select-loan-task works!"),t.k0s())}})}return e})();const ge=[...E.t7.map(e=>({path:`:loanId/${e.path}`,component:"loan-products"===e.path?D:S,data:{title:e.label},children:[]})),{path:":loanId",component:be,data:{title:"Loan Products"},children:[]},{path:"",component:fe,data:{title:"Loan Products"},children:[]},{path:":loanId/*",component:S,data:{title:"Loan Products"},children:[]},{path:"**",component:S,data:{title:"Loan Products"},children:[]}];var _e=l(9997),Ce=l(7848);const Pe="https://income-verification-subgraph-dev-egg.cherrypie.alt.meanion.com/";function w(e){return{link:e.create({uri:Pe}),cache:new _e.D}}let ye=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.$C({type:e,bootstrap:[D]});static#n=this.\u0275inj=t.G2t({providers:[m.o3,_,(0,Q.$x)(),{provide:x.APOLLO_OPTIONS,useFactory:w,deps:[Ce.PR]}],imports:[d.MD,V.r,f.iI.forChild(ge),Y.Vx,X.e,v.H_,B.FormsLibModule,c.FormsModule,G.CardModule,I.fd,$.q4,A.J,U.d,H.u,c.ReactiveFormsModule,y.ButtonModule,b.TableModule,m.k_,M.StateManagementModule]})}return e})()}}]);