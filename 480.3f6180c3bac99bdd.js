"use strict";(self.webpackChunkapp_shell=self.webpackChunkapp_shell||[]).push([[480],{480:(Pe,R,s)=>{s.r(R),s.d(R,{LoanProductsModule:()=>Ce,createApollo:()=>w});var B=s(4236),V=s(2929),X=s(6718),Y=s(8937),c=s(177),d=s(4341),Q=s(345),g=s(430),C=s(1141),G=s(491),$=s(5430),m=s(660),P=s(1631),H=s(2242),O=s(7983),A=s(3682),h=s(1452),T=s(4945),S=s(7802),t=s(3953),p=s(6354),I=s(1397),E=s(7673),L=s(2026);let U=(()=>{class e{constructor(n,o,i){this.fb=n,this.ref=o,this.config=i,this.creditProductForm=this.fb.group({id:null,parentId:null,label:null,insured:null,type:null,benefitAmount:null,fee:null,dateEffective:null,term:null}),this.formOptions={},this.formModel=[{type:"row",columns:[{type:"column",width:6,content:[{label:"Insured Name",type:"formField",formFieldType:"radio",field:"insured",options:[{label:"Colleen Denning",value:"Colleen Denning"}],validators:{required:!0}},{label:"Product Type",type:"formField",formFieldType:"radio",field:"label",options:[{label:"Life Insurance",value:"Life Insurance"},{label:"Loan Insurance",value:"Loan Insurance"},{label:"Unemployment Insurance",value:"Unemployment Insurance"}],validators:{required:!0}}]},{type:"column",width:6,content:[{label:"Benefit Amount",type:"formField",formFieldType:"number",field:"benefitAmount",placeholder:"$1,000",mode:"currency",validators:{required:!0}},{label:"Premium or Fee",type:"formField",formFieldType:"number",mode:"currency",field:"fee",placeholder:"$100",validators:{required:!0}},{label:"Effective Date",type:"formField",formFieldType:"date",field:"dateEffective",validators:{required:!0}},{label:"Term",type:"formField",formFieldType:"number",field:"term",placeholder:"24",validators:{required:!0}}]}]}]}ngOnInit(){this.config.data&&this.creditProductForm.patchValue(this.config.data)}submit(){this.ref.close(this.creditProductForm.getRawValue())}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(d.FormBuilder),t.rXU(m.Pw),t.rXU(m.sb))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-credit-products-builder"]],decls:1,vars:3,consts:[[3,"completed","formModel","formGroup","options"]],template:function(o,i){1&o&&(t.j41(0,"lib-form-generator",0),t.bIt("completed",function(){return i.submit()}),t.k0s()),2&o&&t.Y8G("formModel",i.formModel)("formGroup",i.creditProductForm)("options",i.formOptions)},dependencies:[L.v,d.NgControlStatusGroup,d.FormGroupDirective],changeDetection:0})}return e})(),W=(()=>{class e{constructor(n,o,i){this.fb=n,this.ref=o,this.config=i,this.nonCreditProductForm=this.fb.group({id:null,parentId:null,label:null,insured:null,type:null,benefitAmount:null,fee:null,dateEffective:null,term:null}),this.formOptions={},this.formModel=[{type:"row",columns:[{type:"column",width:6,content:[{label:"Insured Name",type:"formField",formFieldType:"radio",field:"insured",options:[{label:"Colleen Denning",value:"Colleen Denning"}],validators:{required:!0}},{label:"Product Type",type:"formField",formFieldType:"radio",field:"label",options:[{label:"Auto Plan",value:"Auto Plan"},{label:"Home & Auto Plan",value:"Home & Auto Plan"},{label:"Silver Safeguard Plan",value:"Silver Safeguard Plan"}],validators:{required:!0}}]},{type:"column",width:6,content:[{label:"Benefit Amount",type:"formField",formFieldType:"number",field:"benefitAmount",placeholder:"$1,000",mode:"currency",validators:{required:!0}},{label:"Premium or Fee",type:"formField",formFieldType:"number",mode:"currency",field:"fee",placeholder:"$100",validators:{required:!0}},{label:"Effective Date",type:"formField",formFieldType:"date",field:"dateEffective",validators:{required:!0}},{label:"Term",type:"formField",formFieldType:"number",field:"term",placeholder:"24",validators:{required:!0}}]}]}]}ngOnInit(){this.config.data&&this.nonCreditProductForm.patchValue(this.config.data)}submit(){this.ref.close(this.nonCreditProductForm.getRawValue())}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(d.FormBuilder),t.rXU(m.Pw),t.rXU(m.sb))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-non-credit-products-builder"]],decls:1,vars:3,consts:[[3,"completed","formModel","formGroup","options"]],template:function(o,i){1&o&&(t.j41(0,"lib-form-generator",0),t.bIt("completed",function(){return i.submit()}),t.k0s()),2&o&&t.Y8G("formModel",i.formModel)("formGroup",i.nonCreditProductForm)("options",i.formOptions)},dependencies:[L.v,d.NgControlStatusGroup,d.FormGroupDirective],changeDetection:0})}return e})();var u;!function(e){let a;var i;(i=a=e.SubProductType||(e.SubProductType={}))[i.Credit=0]="Credit",i[i.Noncredit=1]="Noncredit",e.isCreditProduct=function n(i){return i.type===a.Credit},e.isNonCreditProduct=function o(i){return i.type===a.Noncredit}}(u||(u={}));var N=s(1331),y=s(4412),f=s(6697);const J=[{id:"1",cashOut:18500,loanAmount:22100,monthlyPayment:432,paymentImpact:250,term:66,apr:16.16,ndi:1325,status:{systemGenerated:!0,secured:!0},vehicles:["2020 TOYOTA RAV4"],creditors:[],payoffs:1288,baseCashAdvance:16e3,fees:500,creditProducts:[],nonCreditProducts:[{id:"0",parentId:"1",type:u.SubProductType.Noncredit,label:"Auto Plan",benefitAmount:1e3,insured:"Colleen Denning",term:66,fee:49.99,dateEffective:"04/11/24"},{id:"1",parentId:"1",type:u.SubProductType.Noncredit,label:"Silver Safeguard Plan",insured:"Colleen Denning",benefitAmount:750,term:33,fee:9.99,dateEffective:"03/08/24"}]},{id:"2",cashOut:19200,loanAmount:24200,monthlyPayment:455,paymentImpact:175,term:54,apr:17.28,ndi:1211,creditProducts:[],nonCreditProducts:[],status:{systemGenerated:!0,secured:!0},vehicles:["MULTI VEHICLE"],creditors:[],payoffs:6588,baseCashAdvance:12110,fees:254},{id:"3",cashOut:8500,loanAmount:12100,monthlyPayment:125,paymentImpact:-52,term:36,apr:22.96,ndi:980,status:{invalid:"Doesn't meet minumum NDI requirements"},vehicles:["2010 CHEVROLET SILVERADO"],payoffs:674,baseCashAdvance:2300,fees:97}],K=[{id:"0",label:"DISCOVER FIN SVCS",totalOwed:673,monthlyPayment:33,apr:29,selected:!1},{id:"1",label:"BANK CREDIT CARD",totalOwed:6430,monthlyPayment:33,apr:18,selected:!1},{id:"2",label:"ULTRAMAR DIAMOND S",totalOwed:1250,monthlyPayment:45,apr:21,selected:!1},{id:"3",label:"EXXON/MBGA",totalOwed:345,monthlyPayment:30,apr:14,selected:!1}],z=[{id:"1",label:"2020 TOYOTA RAV4",assetValue:36e3,totalOwed:0,monthlyPayment:0,apr:0,selected:!1},{id:"2",label:"2010 CHEVROLET SILVERADO",assetValue:10905,totalOwed:4e3,monthlyPayment:0,apr:0,selected:!1}];var k=s(6772);const ct=k.gql`
  query PingQuery {
    ping
  }
`,ut=k.gql`
  query Link($input: LinkInput!) {
    plaid {
      link(input: $input) {
        expiration
        reason
        status
        token
      }
    }
  }
`;let b=(()=>{class e{constructor(n){this.graphSvc=n,this.state$=new y.t({isCentral:!1,hasCustomerUpdate:!1,loanIsBeingWorkedOn:!0,isLocked:!1}),this.loanProducts$=new y.t(J.map(o=>this.creditProductsAdd(o))),this.assets$=new y.t(z),this.creditors$=new y.t(K),this.pingStore=this.graphSvc.createEntityStore({autoLoad:!1,getQuery:ct}),this.plaidStore=this.graphSvc.createEntityStore({autoLoad:!1,getQuery:ut})}stateChange(n){this.state$.pipe((0,f.s)(1)).subscribe(o=>this.state$.next({...o,...n}))}loanProductAdd(n){if(n.id)this.loanProducts$.pipe((0,f.s)(1)).subscribe(o=>{const i=o.map(r=>r.id===n.id?{...r,...n}:r);this.loanProducts$.next(i)});else{const o=n.assets?.filter(l=>l.selected).map(l=>l.label),i=n.creditors.filter(l=>l.selected).map(l=>l.totalOwed).reduce((l,_)=>l+_,0),r={...n,id:String(this.getRandomNumberInRange(100,1e6)),apr:this.getRandomNumberInRange(14,24),monthlyPayment:this.getRandomNumberInRange(200,400),paymentImpact:this.getRandomNumberInRange(50,300),ndi:this.getRandomNumberInRange(100,1200),loanAmount:(n.cashOut??0)+i,vehicles:(o??[])?.length>1?"MULTI-VEHICLE":o,status:{}};this.loanProducts$.pipe((0,f.s)(1)).subscribe(l=>this.loanProducts$.next([...l,this.creditProductsAdd(r)]))}}loanProductStatusChange(n,o){this.loanProducts$.pipe((0,f.s)(1)).subscribe(i=>{const r=i.map(l=>l.id===n?{...l,status:{...l.status,...o}}:l);this.loanProducts$.next(r)})}loanProductDelete(n){confirm("Are you sure you want to delete this loan product?")&&this.loanProducts$.pipe((0,f.s)(1)).subscribe(i=>this.loanProducts$.next(i.filter(r=>r.id!==n)))}nonCreditProductSave(n){n?.parentId&&this.loanProducts$.next(this.loanProducts$.value.map(o=>{if(o.id===n.parentId){let i=o.nonCreditProducts??[];return i=n.id?i?.map(r=>n.id===r.id?n:r):[...i,{...n,id:String(this.getRandomNumberInRange(1e3,1e7))}],{...o,nonCreditProducts:i}}return o}))}nonCreditProductDelete(n){!n?.parentId||!n.id||!confirm("Are you sure you want to delete this non-credit product?")||this.loanProducts$.next(this.loanProducts$.value.map(i=>{if(i.id===n.parentId){const l=(i.nonCreditProducts??[]).filter(_=>_.id!==n.id);return{...i,nonCreditProducts:l}}return i}))}modifyLoanAmount(n){this.loanProducts$.pipe((0,f.s)(1)).subscribe(o=>this.loanProducts$.next(o.map(i=>({...i,cashOut:(i.cashOut??0)+n,loanAmount:(i.loanAmount??0)+n}))))}creditProductsAdd(n){return{...n,creditProducts:[{id:"0",parentId:n.id??"0",type:u.SubProductType.Credit,label:"Life Insurance",insured:"Colleen Denning",benefitAmount:n.loanAmount,term:n.term,fee:(n.loanAmount??0)/200,dateEffective:new Date,selected:!0},{id:"1",parentId:n.id??"0",type:u.SubProductType.Credit,label:"Disability",insured:"Colleen Denning",benefitAmount:n.loanAmount,term:n.term,fee:(n.loanAmount??0)/300,dateEffective:new Date,selected:!0},{id:"2",parentId:n.id??"0",type:u.SubProductType.Credit,label:"Unemployment",insured:"Colleen Denning",benefitAmount:n.loanAmount,term:n.term,fee:(n.loanAmount??0)/600,dateEffective:new Date,selected:!0}]}}getRandomNumberInRange(n,o){const i=Math.random()*(o-n)+n;return parseFloat(i.toFixed(2))}static#t=this.\u0275fac=function(o){return new(o||e)(t.KVO(N.GraphQLStoreCreatorService))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var v=s(2961),pt=s(3401),M=s(8480),j=s(5779),mt=s(3294);function ht(e,a){1&e&&(t.j41(0,"div",6),t.nrm(1,"lib-icons",7),t.j41(2,"div",8)(3,"div",9),t.EFF(4,"Being worked on by:"),t.k0s(),t.j41(5,"div")(6,"a",10),t.EFF(7,"Adrianne Williams"),t.k0s()()()())}let ft=(()=>{class e{constructor(n,o){this.route=n,this.lpSvc=o,this.title$=this.route.params.pipe((0,p.T)(i=>{const r=i.loanId;return r?"533854"===r?`#${r} | Colleen Denning`:`#${r} | John Smith`:"No Loan ID Found"})),this.loanIsBeingWorkedOn$=this.lpSvc.state$.pipe((0,p.T)(i=>i.loanIsBeingWorkedOn),(0,mt.F)())}isCentral(n){this.lpSvc.stateChange({isCentral:n.checked})}isLocked(n){this.lpSvc.stateChange({isLocked:n.checked})}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(g.nX),t.rXU(b))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-title-bar"]],decls:13,vars:6,consts:[[1,"title-bar"],[1,"d-flex"],[1,"title"],[1,"align","ms-3"],[1,"ms-2",3,"onChange"],["class","align",4,"ngIf"],[1,"align"],["icon","exclamation-triangle",1,"red","title-icon"],[1,"title-workedon"],[1,"title-sub"],["href","tel:+1234567890"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.nI1(4,"async"),t.k0s(),t.j41(5,"div",3),t.EFF(6," Is Central: "),t.j41(7,"p-inputSwitch",4),t.bIt("onChange",function(l){return i.isCentral(l)}),t.k0s()(),t.j41(8,"div",3),t.EFF(9," Is Locked: "),t.j41(10,"p-inputSwitch",4),t.bIt("onChange",function(l){return i.isLocked(l)}),t.k0s()()(),t.DNE(11,ht,8,0,"div",5),t.nI1(12,"async"),t.k0s()),2&o&&(t.R7$(3),t.JRh(t.bMT(4,2,i.title$)),t.R7$(8),t.Y8G("ngIf",t.bMT(12,4,i.loanIsBeingWorkedOn$)))},dependencies:[c.bT,v.G,P.HW,c.Jj],styles:[".title-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:.5rem}.title-bar[_ngcontent-%COMP%]   .align[_ngcontent-%COMP%]{display:flex;align-items:center}@media (min-width: 768px){.title-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}}.title-bar[_ngcontent-%COMP%]   .title-workedon[_ngcontent-%COMP%]{line-height:14px}.title-bar[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:22px;margin-right:.5rem;position:relative;top:2px}.title-bar[_ngcontent-%COMP%]   .title-sub[_ngcontent-%COMP%]{font-size:10px}"],changeDetection:0})}return e})();var bt=s(8542);function _t(e,a){1&e&&(t.j41(0,"tr")(1,"th",3),t.EFF(2,"Product"),t.k0s(),t.j41(3,"th",4),t.EFF(4,"Type"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Insured"),t.k0s(),t.j41(7,"th",6),t.EFF(8,"Term"),t.k0s(),t.j41(9,"th",7),t.EFF(10,"Benefit"),t.k0s(),t.j41(11,"th",7),t.EFF(12,"Premium/Fee"),t.k0s(),t.j41(13,"th",8),t.EFF(14,"Effective Date"),t.k0s(),t.j41(15,"th",9),t.EFF(16,"Actions"),t.k0s()())}function gt(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",11)(1,"p-inputSwitch",12),t.mxI("ngModelChange",function(i){t.eBV(n);const r=t.XpG().$implicit;return t.DH7(r.selected,i)||(r.selected=i),t.Njj(i)}),t.k0s()()}if(2&e){const n=t.XpG().$implicit;t.R7$(),t.R50("ngModel",n.selected)}}function Ct(e,a){if(1&e){const n=t.RV6();t.j41(0,"a",13),t.bIt("click",function(){t.eBV(n);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.edit(i))}),t.nrm(1,"lib-icons",14),t.EFF(2," Edit"),t.k0s(),t.j41(3,"a",15),t.bIt("click",function(){t.eBV(n);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.lpSvc.nonCreditProductDelete(i))}),t.nrm(4,"lib-icons",16),t.EFF(5," Delete"),t.k0s()}}function Pt(e,a){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.nI1(11,"currency"),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"currency"),t.k0s(),t.j41(15,"td"),t.EFF(16),t.nI1(17,"date"),t.k0s(),t.j41(18,"td",10),t.DNE(19,gt,2,1,"div",11)(20,Ct,6,0),t.k0s()()),2&e){const n=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(n.type?"Non-Credit":"Credit"),t.R7$(2),t.JRh(n.label),t.R7$(2),t.JRh(n.insured),t.R7$(2),t.SpI("",n.term," mo"),t.R7$(2),t.JRh(t.i5U(11,8,n.benefitAmount,"USD")),t.R7$(3),t.JRh(t.i5U(14,11,n.fee,"USD")),t.R7$(3),t.JRh(t.i5U(17,14,n.dateEffective,"M/dd/yy")),t.R7$(3),t.vxM(n.type===o.subProductType.Credit?19:20)}}function yt(e,a){if(1&e&&(t.j41(0,"p-table",0),t.DNE(1,_t,17,0,"ng-template",1)(2,Pt,21,17,"ng-template",2),t.k0s()),2&e){const n=t.XpG();t.Y8G("value",n.products())}}let vt=(()=>{class e{constructor(n){this.lpSvc=n,this.creditProducts=(0,t.hFB)(null),this.nonCreditProducts=(0,t.hFB)(null),this.colLength=(0,t.hFB)(7),this.products=(0,t.EWP)(()=>[...this.creditProducts()??[],...this.nonCreditProducts()??[]].sort((o,i)=>o.type-i.type)),this.subProductType=u.SubProductType,this.modalOpen=new t.bkB}edit(n){this.modalOpen.emit({type:this.subProductType.Noncredit,parentId:n.parentId,product:n})}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(b))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-sub-products-grid"]],inputs:{creditProducts:[1,"creditProducts"],nonCreditProducts:[1,"nonCreditProducts"],colLength:[1,"colLength"]},outputs:{modalOpen:"modalOpen"},decls:1,vars:1,consts:[["dataKey","id","styleClass","mb-3",3,"value"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","type"],["pSortableColumn","label"],["pSortableColumn","insured"],["pSortableColumn","term"],["pSortableColumn","fee"],["pSortableColumn","dateEffective"],["pSortableColumn","",1,"text-end"],[1,"text-end"],[1,"toggle"],[3,"ngModelChange","ngModel"],["title","Edit this product",1,"me-2",3,"click"],["icon","cog",1,"me-1"],["title","Delete this product",3,"click"],["icon","trash",1,"me-1"]],template:function(o,i){1&o&&t.DNE(0,yt,3,1,"p-table",0),2&o&&t.vxM(i.products().length?0:-1)},dependencies:[v.G,P.HW,d.NgControlStatus,d.NgModel,j.Ei,h.Table,h.SortableColumn,c.oe,c.vh],styles:[".toggle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}"],changeDetection:0})}return e})();const Ft=()=>[],Tt=()=>({"min-width":"50rem"}),It=e=>({"text-end":e});function Et(e,a){if(1&e&&(t.j41(0,"th",7),t.nrm(1,"span",8),t.k0s()),2&e){const n=a.$implicit,o=a.$index,i=t.XpG(2);t.Y8G("pSortableColumn",n.prop)("ngClass",t.eq3(3,It,o===i.columns.length-1)),t.R7$(),t.Y8G("innerHTML",n.label,t.npT)}}function Lt(e,a){if(1&e&&(t.j41(0,"tr"),t.Z7z(1,Et,2,5,"th",7,t.fX1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Dyx(n.columns)}}function kt(e,a){1&e&&t.nrm(0,"lib-icons",10)}function jt(e,a){1&e&&t.nrm(0,"lib-icons",11)}function xt(e,a){if(1&e&&(t.EFF(0),t.nI1(1,"currency")),2&e){const n=t.XpG(),o=n.$implicit,i=n.rowIndex,r=t.XpG();t.SpI(" - ",t.ii3(1,1,o.monthlyPayment+r.monthlyPaymentRange()[i],"USD","symbol","1.0-2")," ")}}function Rt(e,a){if(1&e&&t.nrm(0,"lib-icons",12),2&e){const n=t.XpG().$implicit;t.Y8G("pTooltip","This loan product will save the customer $"+n.paymentImpact+" per month")}}function Gt(e,a){if(1&e&&t.nrm(0,"lib-icons",13),2&e){const n=t.XpG().$implicit;t.Y8G("pTooltip","Actual cost to the customer will be $"+-n.paymentImpact+" per month based on selected payoffs")}}function $t(e,a){1&e&&t.nrm(0,"lib-icons",14)}function Ot(e,a){1&e&&t.nrm(0,"lib-icons",15)}function At(e,a){1&e&&t.nrm(0,"lib-icons",16)}function St(e,a){1&e&&t.nrm(0,"lib-icons",17)}function Nt(e,a){if(1&e&&t.nrm(0,"lib-icons",18),2&e){const n=t.XpG().$implicit;t.Y8G("pTooltip",n.status.invalid)}}function Mt(e,a){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.nrm(2,"p-button",9),t.k0s(),t.j41(3,"td"),t.DNE(4,kt,1,0,"lib-icons",10)(5,jt,1,0,"lib-icons",11),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"currency"),t.k0s(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"currency"),t.k0s(),t.j41(14,"td"),t.EFF(15),t.nI1(16,"currency"),t.DNE(17,xt,2,6),t.k0s(),t.j41(18,"td"),t.EFF(19),t.nI1(20,"currency"),t.DNE(21,Rt,1,1,"lib-icons",12)(22,Gt,1,1,"lib-icons",13),t.k0s(),t.j41(23,"td"),t.EFF(24),t.k0s(),t.j41(25,"td"),t.EFF(26),t.k0s(),t.j41(27,"td"),t.EFF(28),t.nI1(29,"currency"),t.k0s(),t.j41(30,"td"),t.DNE(31,$t,1,0,"lib-icons",14)(32,Ot,1,0,"lib-icons",15)(33,At,1,0,"lib-icons",16)(34,St,1,0,"lib-icons",17)(35,Nt,1,1,"lib-icons",18),t.k0s(),t.j41(36,"td",19)(37,"p-splitButton",20),t.bIt("onClick",function(i){t.eBV(n);const r=t.sdS(39);return t.Njj(r.toggle(i))}),t.k0s(),t.j41(38,"p-overlayPanel",null,0)(40,"div",21)(41,"table",22)(42,"tbody")(43,"tr")(44,"td")(45,"strong"),t.EFF(46,"System Decision"),t.k0s()(),t.j41(47,"td"),t.EFF(48,"$18,500"),t.k0s()()()()()()()()}if(2&e){const n=a.$implicit,o=a.expanded,i=a.rowIndex,r=t.XpG();t.R7$(2),t.Y8G("pRowToggler",n)("text",!0)("rounded",!0)("plain",!0)("icon",o?"pi pi-chevron-down":"pi pi-chevron-right"),t.R7$(2),t.vxM(null!=n.status&&n.status.secured?4:5),t.R7$(3),t.JRh(n.vehicles.length?n.vehicles:"None"),t.R7$(2),t.JRh(t.ii3(10,22,n.cashOut,"USD","symbol","1.0-2")),t.R7$(3),t.SpI(" ",t.ii3(13,27,n.loanAmount,"USD","symbol","1.0-2")," "),t.R7$(3),t.SpI(" ",t.ii3(16,32,n.monthlyPayment,"USD","symbol","1.0-2")," "),t.R7$(2),t.vxM(r.monthlyPaymentRange()[i]?17:-1),t.R7$(2),t.SpI(" ",t.ii3(20,37,n.paymentImpact,"USD","symbol","1.0-2")," "),t.R7$(2),t.vxM(n.paymentImpact>0?21:22),t.R7$(3),t.SpI("",n.term," mos"),t.R7$(2),t.SpI("",n.apr,"%"),t.R7$(2),t.JRh(t.ii3(29,42,n.ndi,"USD","symbol","1.0-2")),t.R7$(3),t.vxM(n.status.systemGenerated?31:-1),t.R7$(),t.vxM(n.status.approved?32:-1),t.R7$(),t.vxM(n.status.rejected?33:-1),t.R7$(),t.vxM(n.status.customerSelected?34:-1),t.R7$(),t.vxM(n.status.invalid?35:-1),t.R7$(2),t.Y8G("model",r.actions()[i])}}function Dt(e,a){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td")(2,"div",23)(3,"app-sub-products-grid",24),t.bIt("modalOpen",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.modalOpen.emit(i))}),t.k0s(),t.j41(4,"div",19)(5,"p-button",25),t.bIt("click",function(){const i=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.modalOpen.emit({parentId:i.id,type:r.SubProductType.Noncredit}))}),t.EFF(6,"Add Non-Credit Product"),t.k0s()()()()()}if(2&e){const n=a.$implicit,o=t.XpG();t.R7$(),t.BMQ("colspan",o.columns.length+1),t.R7$(2),t.Y8G("creditProducts",n.creditProducts)("nonCreditProducts",n.nonCreditProducts)("colLength",o.columns.length+1)}}function wt(e,a){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2," No loan products have been created yet. "),t.k0s()()),2&e){const n=t.XpG();t.R7$(),t.BMQ("colspan",n.columns.length+1)}}let Bt=(()=>{class e{expandAll(){this.expandedRows.set((this.loanProducts()??[]).reduce((n,o)=>(n[o.id??""]=!0)&&n,{}))}constructor(n){this.lpSvc=n,this.loanProducts=(0,t.hFB)(null),this.isLocked=(0,t.hFB)(null),this.columns=[{label:"",prop:"droprow"},{label:"Type",prop:"product"},{label:"Vehicle",prop:"vehicle"},{label:"Cash Out",prop:"cashOut"},{label:"Total<br/> Loan Amount",prop:"loanAmount"},{label:"Monthly<br/> Payment Range",prop:"monthlyPayment"},{label:"Payment<br/> Impact",prop:"paymentImpact"},{label:"Term",prop:"term"},{label:"APR",prop:"apr"},{label:"NDI",prop:"ndi"},{label:"Status",prop:"status"},{label:"Actions",prop:"actions"}],this.SubProductType=u.SubProductType,this.actions=(0,t.EWP)(()=>(this.loanProducts()??[]).map(o=>[{label:"Edit",icon:"pi pi-pencil",command:()=>this.loanProductEdit.emit(o),disabled:this.isLocked()??!1},{label:"Escalate",icon:"pi pi-exclamation-triangle"},{label:"Approve",icon:"pi pi-thumbs-up",command:()=>{o.id&&this.lpSvc.loanProductStatusChange(o.id,o.status?.approved?{approved:!1,rejected:!1}:{approved:!0,rejected:!1})}},{label:"Reject",icon:"pi pi-thumbs-down",command:()=>{o.id&&this.lpSvc.loanProductStatusChange(o.id,o.status?.rejected?{approved:!1,rejected:!1}:{approved:!1,rejected:!0})}},{label:"Set Customer Selection",icon:"pi pi-check-square",command:()=>{console.log(o)}},{label:"Delete",icon:"pi pi-trash",disabled:this.isLocked()??!1,command:()=>{o.id&&this.lpSvc.loanProductDelete(o.id)}}])),this.monthlyPaymentRange=(0,t.EWP)(()=>(this.loanProducts()??[]).map(o=>(o.creditProducts??[]).reduce((i,r)=>i+(r.fee??0),0))),this.expandedRows=(0,t.vPA)({}),this.modalOpen=new t.bkB,this.loanProductEdit=new t.bkB,this.loanProductDelete=new t.bkB,this.loanProductStatusChange=new t.bkB}collapseAll(){this.expandedRows.set({})}onRowExpand(n){}onRowCollapse(n){}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(b))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loan-products-grid"]],inputs:{loanProducts:[1,"loanProducts"],isLocked:[1,"isLocked"]},outputs:{modalOpen:"modalOpen",loanProductEdit:"loanProductEdit",loanProductDelete:"loanProductDelete",loanProductStatusChange:"loanProductStatusChange"},decls:6,vars:5,consts:[["op",""],["id","loan-products-grid"],["dataKey","id",3,"onRowExpand","onRowCollapse","value","tableStyle","expandedRowKeys"],["pTemplate","header"],["pTemplate","body","pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"pSortableColumn","ngClass"],[1,"me-2",3,"innerHTML"],["type","button","pRipple","",3,"pRowToggler","text","rounded","plain","icon"],["icon","lock","pTooltip","Secured","tooltipPosition","bottom"],["icon","lock-open","pTooltip","Unsecured","tooltipPosition","bottom"],["icon","smile","tooltipPosition","bottom",3,"pTooltip"],["icon","arrow-down",3,"pTooltip"],["icon","info-circle","pTooltip","System generated quote, cannot be removed","tooltipPosition","bottom",1,"me-2","grey"],["icon","thumbsup","pTooltip","This quote is approved","tooltipPosition","bottom",1,"me-2","green"],["icon","thumbsdown","pTooltip","This quote is rejected","tooltipPosition","bottom",1,"me-2","orange"],["icon","user","pTooltip","This quote has been selected by the customer","tooltipPosition","bottom",1,"me-2","blue"],["icon","exclamation-triangle","tooltipPosition","bottom",1,"me-2","red",3,"pTooltip"],[1,"text-end"],["label","Info","appendTo","body","icon","pi pi-info-circle",3,"onClick","model"],[1,"p-2"],[1,"table","table-sm","table-striped","mb-0"],[1,"p-3"],[3,"modalOpen","creditProducts","nonCreditProducts","colLength"],[3,"click"]],template:function(o,i){if(1&o&&(t.j41(0,"div",1)(1,"p-table",2),t.bIt("onRowExpand",function(l){return i.onRowExpand(l)})("onRowCollapse",function(l){return i.onRowCollapse(l)}),t.DNE(2,Lt,3,0,"ng-template",3)(3,Mt,49,47,"ng-template",4)(4,Dt,7,4,"ng-template",5)(5,wt,3,1,"ng-template",6),t.k0s()()),2&o){let r;t.R7$(),t.Y8G("value",null!==(r=i.loanProducts())&&void 0!==r?r:t.lJ4(3,Ft))("tableStyle",t.lJ4(4,Tt))("expandedRowKeys",i.expandedRows())}},dependencies:[c.YU,v.G,j.Ei,A.f,C.Button,bt.m,O.j,h.Table,h.SortableColumn,h.RowToggler,vt,c.oe],styles:["#loan-products-grid .p-splitbutton,#loan-products-grid .p-splitbutton .p-splitbutton-defaultbutton{padding:0}#loan-products-grid .p-splitbutton .p-splitbutton-menubutton.p-button-icon-only{padding:0 .75rem}#loan-products-grid .p-splitbutton .p-button-icon{font-size:12px;padding-left:.5rem;padding-right:0;margin:0}#loan-products-grid .p-splitbutton .p-button-label{padding:0 .5rem}\n"],encapsulation:2,changeDetection:0})}return e})();var F=s(9172),Vt=s(152),Xt=s(4572);const Qt=e=>({isEditing:e});function Ht(e,a){if(1&e){const n=t.RV6();t.j41(0,"div")(1,"a",15),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.reset())}),t.EFF(2,"Cancel"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Editing Loan Product"),t.k0s()()}}function Ut(e,a){if(1&e&&(t.j41(0,"div")(1,"strong"),t.EFF(2,"Owed:"),t.k0s(),t.EFF(3),t.nI1(4,"currency"),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",t.ii3(4,1,n.value.totalOwed,"USD","symbol","1.0-0")," ")}}function Wt(e,a){if(1&e&&(t.j41(0,"div")(1,"strong"),t.EFF(2,"APR:"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",n.value.apr,"% ")}}function Jt(e,a){if(1&e&&(t.j41(0,"div",17),t.nrm(1,"p-checkbox",18),t.j41(2,"div",19)(3,"div")(4,"strong"),t.EFF(5,"Valued:"),t.k0s(),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.DNE(8,Ut,5,6,"div",20)(9,Wt,4,1,"div",20),t.k0s()()),2&e){const n=a.$implicit;t.Y8G("formGroupName",a.index),t.R7$(),t.Y8G("binary",!0)("label",n.value.label),t.R7$(5),t.SpI(" ",t.ii3(7,6,n.value.assetValue,"USD","symbol","1.0-0")," "),t.R7$(2),t.Y8G("ngIf",n.value.totalOwed),t.R7$(),t.Y8G("ngIf",n.value.apr)}}function Kt(e,a){if(1&e&&(t.j41(0,"div",7),t.DNE(1,Jt,10,11,"div",16),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.assetsFormArray.controls)}}function zt(e,a){1&e&&(t.j41(0,"p"),t.EFF(1,"No assets listed."),t.k0s())}function Zt(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",8)(1,"p-checkbox",22),t.bIt("onChange",function(){const i=t.eBV(n).index,r=t.XpG(3);return t.Njj(r.onSelectCreditor(i))}),t.k0s(),t.j41(2,"div",19)(3,"div")(4,"strong"),t.EFF(5,"Owed:"),t.k0s(),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"div")(9,"strong"),t.EFF(10,"Monthly:"),t.k0s(),t.EFF(11),t.nI1(12,"currency"),t.k0s(),t.j41(13,"div")(14,"strong"),t.EFF(15,"APR:"),t.k0s(),t.EFF(16),t.k0s()()()}if(2&e){const n=a.$implicit,o=t.XpG(3);t.R7$(),t.Y8G("binary",!0)("label",n.value.label)("disabled",o.isLocked()),t.R7$(5),t.SpI(" ",t.ii3(7,6,n.value.totalOwed,"USD","symbol","1.0-0")," "),t.R7$(5),t.SpI(" ",t.ii3(12,11,n.value.monthlyPayment,"USD","symbol","1.0-0")," "),t.R7$(5),t.SpI(" ",n.value.apr,"%")}}function qt(e,a){if(1&e&&t.DNE(0,Zt,17,16,"div",21),2&e){const n=t.XpG(2);t.Y8G("ngForOf",n.creditorsFormArray.controls)}}function te(e,a){1&e&&(t.j41(0,"p"),t.EFF(1,"No creditors listed."),t.k0s())}function ee(e,a){if(1&e&&(t.j41(0,"div",10)(1,"p",23)(2,"small"),t.EFF(3,"Additional Info"),t.k0s()(),t.j41(4,"table",24)(5,"tbody")(6,"tr")(7,"td")(8,"strong"),t.EFF(9,"NDI"),t.k0s()(),t.j41(10,"td"),t.EFF(11),t.nI1(12,"async"),t.nI1(13,"currency"),t.k0s()(),t.j41(14,"tr")(15,"td")(16,"strong"),t.EFF(17,"PTI"),t.k0s()(),t.j41(18,"td"),t.EFF(19,"36%"),t.k0s()(),t.j41(20,"tr")(21,"td")(22,"strong"),t.EFF(23,"LTV"),t.k0s()(),t.j41(24,"td"),t.EFF(25,"120"),t.k0s()()()()()),2&e){const n=t.XpG(2);t.R7$(11),t.SpI(" ",t.ii3(13,3,t.bMT(12,1,n.ndi$),"USD","symbol","1.0-0")," ")}}function ne(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",1)(1,"form",2),t.bIt("ngSubmit",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.onSubmit())}),t.DNE(2,Ht,5,0,"div"),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t.EFF(7,"Assets "),t.j41(8,"span",6),t.EFF(9,"Select for collateral"),t.k0s()(),t.DNE(10,Kt,2,1,"div",7)(11,zt,2,0,"p"),t.k0s(),t.j41(12,"div",5)(13,"h2"),t.EFF(14,"Creditors "),t.j41(15,"span",6),t.EFF(16,"Select for payoff"),t.k0s()(),t.DNE(17,qt,1,1,"div",8)(18,te,2,0,"p"),t.nrm(19,"hr"),t.j41(20,"div",9)(21,"h2"),t.EFF(22,"Total Payoff:"),t.k0s(),t.j41(23,"h2"),t.EFF(24),t.nI1(25,"async"),t.nI1(26,"currency"),t.k0s()(),t.nrm(27,"hr"),t.j41(28,"div",9)(29,"h2"),t.EFF(30,"Base Cash Advance:"),t.k0s(),t.j41(31,"h2"),t.EFF(32),t.nI1(33,"async"),t.nI1(34,"currency"),t.k0s()()(),t.DNE(35,ee,26,8,"div",10),t.k0s(),t.j41(36,"div",11),t.nrm(37,"lib-form-generator",12),t.k0s()(),t.j41(38,"div",13),t.nrm(39,"p-button",14),t.k0s()()()}if(2&e){let n;const o=a.ngIf,i=t.XpG();t.R7$(),t.Y8G("formGroup",i.loanProductsForm),t.R7$(),t.vxM(o.isEditing?2:-1),t.R7$(8),t.vxM(i.assetsFormArray.controls.length?10:11),t.R7$(7),t.vxM(i.creditorsFormArray.controls.length?17:18),t.R7$(7),t.SpI(" ",t.ii3(26,15,t.bMT(25,13,i.payoffsTotal$),"USD","symbol","1.0-0")," "),t.R7$(8),t.SpI(" ",t.ii3(34,22,t.bMT(33,20,i.baseCashAdvance$),"USD","symbol","1.0-0")," "),t.R7$(3),t.vxM(null!=(n=i.state())&&n.isCentral?35:-1),t.R7$(2),t.Y8G("formModel",i.loanProductsModel())("disabled",i.isLocked())("formGroup",i.loanProductsForm)("options",i.formOptions)("disableSubmit",!1),t.R7$(2),t.Y8G("label",o.isEditing?"Update Loan Product":"Add Loan Product")}}let oe=(()=>{class e{constructor(n){this.fb=n,this.state=(0,t.hFB)(null),this.assets=(0,t.hFB)(null),this.creditors=(0,t.hFB)(null),this.maxValues=(0,t.hFB)({cashOut:22e3,payoffs:1e4,baseCashAdvance:2e4}),this.formDefaults=(0,t.hFB)({id:"",cashOut:1e3,loanAmount:0,monthlyPayment:0,paymentImpact:0,term:24,apr:0,payoffs:10,baseCashAdvance:2e3,fees:100}),this.isLocked=(0,t.hFB)(!1),this.loanProductsModel=(0,t.EWP)(()=>(e=>[{label:"Cash to Customer",type:"formField",formFieldType:"number",mode:"currency",field:"cashOut",placeholder:"$1,000",max:e?.cashOut??null,hint:e?.cashOut?`Max cash out is $${e?.cashOut}`:null,validators:{required:!0}},{type:"html",html:"<hr/>"},{label:"Term",type:"formField",formFieldType:"number",field:"term",placeholder:"24",validators:{required:!0}},{label:"Side Loan Override",type:"formField",formFieldType:"radio",field:"sideLoan",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},{type:"row",columns:[{type:"column",width:6,content:[{label:"Fees",type:"formField",formFieldType:"number",mode:"currency",field:"fees"}]},{type:"column",width:6,content:[{cssClasses:"p-button w-100 text-center mt-4",type:"button",label:"Select",cmd:()=>{}}]}]}])(this.maxValues())),this.loanProductsForm=this.fb.group({id:"",cashOut:0,loanAmount:0,monthlyPayment:0,paymentImpact:0,term:0,apr:0,payoffs:0,baseCashAdvance:0,fees:0,sideLoan:!1,assets:this.fb.array([]),creditors:this.fb.array([])}),this.payoffsTotal$=this.loanProductsForm.controls.creditors.valueChanges.pipe((0,F.Z)(this.loanProductsForm.controls.creditors.value),(0,Vt.B)(250),(0,p.T)(o=>o.filter(i=>i?.selected).reduce((i,r)=>i+(r?.totalOwed??0),0))),this.baseCashAdvance$=(0,Xt.z)([this.payoffsTotal$,this.loanProductsForm.controls.cashOut.valueChanges.pipe((0,F.Z)(this.loanProductsForm.controls.cashOut.value))]).pipe((0,p.T)(([o,i])=>o+(i??0))),this.isEditing$=this.loanProductsForm.valueChanges.pipe((0,F.Z)(this.loanProductsForm.value),(0,p.T)(o=>!!o.id)),this.formOptions={submitButton:{hide:!0}},this.ndi$=this.loanProductsForm.valueChanges.pipe((0,F.Z)(this.loanProductsForm.value),(0,p.T)(o=>4e3-(o.cashOut??0))),this.formSubmit=new t.bkB,this.reset(),(0,t.QZP)(()=>this.populateAssets(this.assets())),(0,t.QZP)(()=>this.populateCreditors(this.creditors())),(0,t.QZP)(()=>this.loanProductsForm.patchValue(this.formDefaults()??{}))}reset(){this.loanProductsForm.reset(),this.populateAssets(this.assets()),this.populateCreditors(this.creditors())}populateAssets(n){this.assetsFormArray.clear(),n?.forEach(o=>{let i=!1;(o.selected||this.formDefaults()?.vehicles?.includes("MULTI VEHICLE")||this.formDefaults()?.vehicles?.includes(o.label))&&(i=!0),this.assetsFormArray.push(this.fb.group({id:[o.id],label:[o.label],totalOwed:[o.totalOwed],assetValue:[o.assetValue],monthlyPayment:[o.monthlyPayment],apr:[o.apr],selected:[i]}))})}populateCreditors(n){this.creditorsFormArray.clear(),n?.forEach(o=>{this.creditorsFormArray.push(this.fb.group({id:[o.id],label:[o.label],totalOwed:[o.totalOwed],monthlyPayment:[o.monthlyPayment],apr:[o.apr],selected:[o.selected]}))})}get assetsFormArray(){return this.loanProductsForm.get("assets")}get creditorsFormArray(){return this.loanProductsForm.get("creditors")}onSelectAsset(n){const o=this.assetsFormArray.at(n);o.patchValue({selected:!o.value.selected})}onSelectCreditor(n){const o=this.creditorsFormArray.at(n);o.patchValue({selected:!o.value.selected})}onSubmit(){this.loanProductsForm.patchValue(this.loanProductsForm.value),this.loanProductsForm.markAllAsTouched(),!this.loanProductsForm.invalid&&(this.formSubmit.emit(this.loanProductsForm.value),this.reset())}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(d.FormBuilder))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loan-products-builder"]],inputs:{state:[1,"state"],assets:[1,"assets"],creditors:[1,"creditors"],maxValues:[1,"maxValues"],formDefaults:[1,"formDefaults"],isLocked:[1,"isLocked"]},outputs:{formSubmit:"formSubmit"},decls:2,vars:5,consts:[["class","loan-form-container",4,"ngIf"],[1,"loan-form-container"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col","col-12","col-md-7","mb-3"],[1,"section"],[1,"sub-title"],["formArrayName","assets"],[1,"item"],[1,"d-flex","justify-content-between"],[1,"additional-info"],[1,"col","col-12","col-md-5","mb-3"],[3,"formModel","disabled","formGroup","options","disableSubmit"],[1,"text-end"],["type","submit",3,"label"],[1,"float-end",3,"click"],["class","item",3,"formGroupName",4,"ngFor","ngForOf"],[1,"item",3,"formGroupName"],["formControlName","selected",3,"binary","label"],[1,"sub-text"],[4,"ngIf"],["class","item",4,"ngFor","ngForOf"],[3,"onChange","binary","label","disabled"],[1,"mb-0"],[1,"table","table-sm","table-striped","mb-0"]],template:function(o,i){1&o&&(t.DNE(0,ne,40,27,"div",0),t.nI1(1,"async")),2&o&&t.Y8G("ngIf",t.eq3(3,Qt,t.bMT(1,1,i.isEditing$)))},dependencies:[c.Sq,c.bT,L.v,d.\u0275NgNoValidate,d.NgControlStatus,d.NgControlStatusGroup,$.Sc,C.Button,d.FormGroupDirective,d.FormControlName,d.FormGroupName,d.FormArrayName,c.Jj,c.oe],styles:["h2[_ngcontent-%COMP%]{margin-bottom:5px}.sub-title[_ngcontent-%COMP%]{font-size:12px;font-style:italic;font-weight:400}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:3px}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(odd){background:var(--color-bg-lt)}.sub-text[_ngcontent-%COMP%]{font-size:11px;padding-left:28px}.sub-text[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline;margin-right:.25rem}.additional-info[_ngcontent-%COMP%]{margin-top:1rem;border:1px solid #e2e8f0;padding:.5rem}"],changeDetection:0})}return e})();var ie=s(9859);let re=(()=>{class e{constructor(n,o){this.lpSvc=n,this.fb=o,this.modifyForm=this.fb.group({cashOut:null,maxPayment:null})}updateLoanAmount(){const n=this.modifyForm.value.cashOut;n&&(this.lpSvc.modifyLoanAmount(n),this.modifyForm.reset())}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(b),t.rXU(d.FormBuilder))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-modify-loan-products"]],decls:9,vars:1,consts:[[3,"formGroup"],[1,"d-flex","mb-3",2,"align-items","center"],["label","Cash Out","mode","currency","formControlName","cashOut","placeholder","$1,000","hint","Negative amounts are supported",1,"me-2"],["label","Add New Products",3,"click"],[1,"d-flex",2,"align-items","center"],["label","Max Payment","mode","currency","formControlName","maxPayment","placeholder","$500","hint","Max monthly payment",1,"me-2"]],template:function(o,i){1&o&&(t.j41(0,"h2"),t.EFF(1,"Modify All Loan Products"),t.k0s(),t.j41(2,"form",0)(3,"div",1),t.nrm(4,"lib-number",2),t.j41(5,"p-button",3),t.bIt("click",function(){return i.updateLoanAmount()}),t.k0s()(),t.j41(6,"div",4),t.nrm(7,"lib-number",5),t.j41(8,"p-button",3),t.bIt("click",function(){return i.updateLoanAmount()}),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("formGroup",i.modifyForm))},dependencies:[ie.j,d.\u0275NgNoValidate,d.NgControlStatus,d.NgControlStatusGroup,C.Button,d.FormGroupDirective,d.FormControlName]})}return e})();const ae=e=>({state:e});function se(e,a){1&e&&(t.nrm(0,"lib-icons",18),t.EFF(1," Loan Products "))}function le(e,a){1&e&&t.nrm(0,"span",20)}function de(e,a){if(1&e&&(t.nrm(0,"lib-icons",19),t.EFF(1," Customer View "),t.DNE(2,le,1,0,"span",20)),2&e){const n=t.XpG().ngIf;t.R7$(2),t.vxM(null!=n.state&&n.state.hasCustomerUpdate?2:-1)}}function ce(e,a){1&e&&t.EFF(0," Online: ")}function ue(e,a){1&e&&t.EFF(0," Offline: ")}function pe(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",1)(1,"lib-masterpage",2)(2,"div"),t.nrm(3,"app-title-bar"),t.j41(4,"div",3)(5,"div",4)(6,"p-card",5)(7,"h1"),t.nrm(8,"lib-icons",6),t.EFF(9," Loan Products "),t.k0s(),t.j41(10,"app-loan-products-grid",7),t.nI1(11,"async"),t.bIt("modalOpen",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.modalOpen(i))})("loanProductEdit",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.loanProductEdit(i))})("loanProductDelete",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.lpSvc.loanProductDelete(i))}),t.k0s()(),t.j41(12,"p-card",8),t.nrm(13,"app-modify-loan-products"),t.k0s()(),t.j41(14,"div",9)(15,"p-tabView",10),t.bIt("activeIndexChange",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.activeIndexChange(i))}),t.j41(16,"p-tabPanel"),t.DNE(17,se,2,0,"ng-template",11),t.j41(18,"app-loan-products-builder",12),t.nI1(19,"async"),t.nI1(20,"async"),t.bIt("formSubmit",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.lpSvc.loanProductAdd(i))}),t.k0s()(),t.j41(21,"p-tabPanel"),t.DNE(22,de,3,1,"ng-template",11),t.j41(23,"div",13)(24,"div"),t.nrm(25,"span",14),t.EFF(26,"Customer Is Online"),t.k0s(),t.j41(27,"div",15),t.DNE(28,ce,1,0)(29,ue,1,0),t.j41(30,"p-inputSwitch",16),t.bIt("onChange",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.isOnline.set(i.checked))}),t.k0s()()(),t.j41(31,"lib-quote-form",17),t.nI1(32,"async"),t.bIt("quoteFormChanged",function(i){t.eBV(n);const r=t.XpG();return t.Njj(r.quoteFormChanged(i))}),t.k0s()()()()()()()()}if(2&e){let n;const o=a.ngIf,i=t.XpG();t.R7$(),t.Y8G("fullWidth",!0),t.R7$(9),t.Y8G("loanProducts",t.bMT(11,10,i.loanProducts$))("isLocked",null==o.state?null:o.state.isLocked),t.R7$(8),t.Y8G("state",o.state)("assets",t.bMT(19,12,i.assets$))("creditors",t.bMT(20,14,i.creditors$))("isLocked",null!==(n=null==o.state?null:o.state.isLocked)&&void 0!==n&&n)("formDefaults",i.loanProductToEdit()),t.R7$(10),t.vxM(i.isOnline()?28:29),t.R7$(3),t.Y8G("formDefaults",t.bMT(32,16,i.storage.quote$))}}let D=(()=>{class e{constructor(n,o,i,r){this.lpSvc=n,this.dialogService=o,this.storage=i,this.route=r,this.loanProducts$=this.route.params.pipe((0,p.T)(l=>l.loanId),(0,I.Z)(l=>"533854"===l?this.lpSvc.loanProducts$:(0,E.of)([]))),this.assets$=this.route.params.pipe((0,p.T)(l=>l.loanId),(0,I.Z)(l=>"533854"===l?this.lpSvc.assets$:(0,E.of)([]))),this.creditors$=this.route.params.pipe((0,p.T)(l=>l.loanId),(0,I.Z)(l=>"533854"===l?this.lpSvc.creditors$:(0,E.of)([]))),this.loanProductToEdit=(0,t.vPA)(null),this.isOnline=(0,t.vPA)(!1)}modalOpen({parentId:n,type:o,product:i}){const l=o===u.SubProductType.Credit?"Credit":"Non-Credit";this.dialogService.open(o===u.SubProductType.Credit?U:W,{header:i?.id?`Edit ${l} Product`:`Add ${l} Product`,data:{parentId:n,type:o,...i},modal:!0,closable:!0,dismissableMask:!0}).onClose.subscribe(_=>this.lpSvc.nonCreditProductSave(_))}loanProductEdit(n){this.loanProductToEdit.update(()=>n)}activeIndexChange(n){1===n&&this.lpSvc.stateChange({hasCustomerUpdate:!1})}quoteFormChanged(n){}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(b),t.rXU(m.o3),t.rXU(S.w5),t.rXU(g.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loan-products"]],decls:2,vars:5,consts:[["id","loan-products",4,"ngIf"],["id","loan-products"],[3,"fullWidth"],[1,"row"],[1,"col","col-12","col-md-8","mb-3"],["styleClass","p-2 mb-3"],["icon","money-check-alt"],[3,"modalOpen","loanProductEdit","loanProductDelete","loanProducts","isLocked"],["styleClass","p-2"],[1,"col","col-12","col-md-4","mb-3"],[3,"activeIndexChange"],["pTemplate","header"],[3,"formSubmit","state","assets","creditors","isLocked","formDefaults"],[1,"online-status"],[1,"circle","me-2"],[1,"align"],[1,"ms-2",3,"onChange"],[3,"quoteFormChanged","formDefaults"],["icon","money-check-alt",1,"me-2"],["icon","eye",1,"me-2"],[1,"circle","updated"]],template:function(o,i){1&o&&(t.DNE(0,pe,33,18,"div",0),t.nI1(1,"async")),2&o&&t.Y8G("ngIf",t.eq3(3,ae,t.bMT(1,1,i.lpSvc.state$)))},dependencies:[c.bT,v.G,pt.Y,M.z,P.HW,G.Card,j.Ei,T.JQ,T.Kp,ft,Bt,oe,re,c.Jj],styles:[".align[_ngcontent-%COMP%]{display:flex;align-items:center}.online-status[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.circle[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border-radius:50%;background:green;margin-right:.5rem;animation:_ngcontent-%COMP%_pulse 1.5s infinite ease-in-out}.circle.updated[_ngcontent-%COMP%]{animation:none;background:red;width:.5rem;height:.5rem;margin-left:5px;position:relative;top:-3px}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}"],changeDetection:0})}return e})(),x=(()=>{class e{constructor(n){this.route=n,this.title$=this.route.url.pipe((0,p.T)(o=>this.toTitleCase(o[o.length-1].path)))}toTitleCase(n){return n.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(g.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-no-content"]],decls:4,vars:4,consts:[[3,"fullWidth"]],template:function(o,i){1&o&&(t.j41(0,"lib-masterpage",0)(1,"h1"),t.EFF(2),t.nI1(3,"async"),t.k0s()()),2&o&&(t.Y8G("fullWidth",!0),t.R7$(2),t.SpI("",t.bMT(3,2,i.title$)," Coming Soon!"))},dependencies:[M.z,c.Jj]})}return e})(),me=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-select-loan-id"]],decls:2,vars:0,template:function(o,i){1&o&&(t.j41(0,"p"),t.EFF(1,"select-loan-id works!"),t.k0s())}})}return e})(),he=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-select-loan-task"]],decls:2,vars:0,template:function(o,i){1&o&&(t.j41(0,"p"),t.EFF(1,"select-loan-task works!"),t.k0s())}})}return e})();const fe=[...S.t7.map(e=>({path:`:loanId/${e.path}`,component:"loan-products"===e.path?D:x,data:{title:e.label},children:[]})),{path:":loanId",component:he,data:{title:"Loan Products"},children:[]},{path:"",component:me,data:{title:"Loan Products"},children:[]},{path:":loanId/*",component:x,data:{title:"Loan Products"},children:[]},{path:"**",component:x,data:{title:"Loan Products"},children:[]}];var be=s(9997),_e=s(7848);const ge="https://income-verification-subgraph-dev-egg.cherrypie.alt.meanion.com/";function w(e){return{link:e.create({uri:ge}),cache:new be.D}}let Ce=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.$C({type:e,bootstrap:[D]});static#n=this.\u0275inj=t.G2t({providers:[m.o3,b,(0,Q.$x)(),{provide:k.APOLLO_OPTIONS,useFactory:w,deps:[_e.PR]}],imports:[c.MD,V.r,g.iI.forChild(fe),Y.Vx,X.e,P.H_,B.FormsLibModule,d.FormsModule,G.CardModule,T.fd,$.q4,A.J,O.d,H.u,d.ReactiveFormsModule,C.ButtonModule,h.TableModule,m.k_,N.StateManagementModule]})}return e})()}}]);