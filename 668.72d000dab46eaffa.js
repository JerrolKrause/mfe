"use strict";(self.webpackChunkapp_shell=self.webpackChunkapp_shell||[]).push([[668],{668:(Dt,K,y)=>{y.r(K),y.d(K,{UsersModule:()=>$e,createApollo:()=>le});var $=y(7288),J=y(1368),B=y(7048),X=y(5904),d=y(1316),M=y(5940),P=y(2216),I=y(6304),z=y(3900),x=y(9936),at=y(2412),Z=y(2220),st=function(){function i(){this.assumeImmutableResults=!1,this.getFragmentDoc=(0,P.em)(z.S,{max:x.Y["cache.fragmentQueryDocuments"]||1e3,cache:at.W})}return i.prototype.batch=function(t){var n,e=this;return this.performTransaction(function(){return n=t.update(e)},"string"==typeof t.optimistic?t.optimistic:!1===t.optimistic?null:void 0),n},i.prototype.recordOptimisticTransaction=function(t,e){this.performTransaction(t,e)},i.prototype.transformDocument=function(t){return t},i.prototype.transformForLink=function(t){return t},i.prototype.identify=function(t){},i.prototype.gc=function(){return[]},i.prototype.modify=function(t){return!1},i.prototype.readQuery=function(t,e){return void 0===e&&(e=!!t.optimistic),this.read((0,d.C3)((0,d.C3)({},t),{rootId:t.id||"ROOT_QUERY",optimistic:e}))},i.prototype.readFragment=function(t,e){return void 0===e&&(e=!!t.optimistic),this.read((0,d.C3)((0,d.C3)({},t),{query:this.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:e}))},i.prototype.writeQuery=function(t){var e=t.id,r=t.data,n=(0,d.sX)(t,["id","data"]);return this.write(Object.assign(n,{dataId:e||"ROOT_QUERY",result:r}))},i.prototype.writeFragment=function(t){var e=t.id,r=t.data,n=t.fragment,a=t.fragmentName,s=(0,d.sX)(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(n,a),dataId:e,result:r}))},i.prototype.updateQuery=function(t,e){return this.batch({update:function(r){var n=r.readQuery(t),a=e(n);return null==a?n:(r.writeQuery((0,d.C3)((0,d.C3)({},t),{data:a})),a)}})},i.prototype.updateFragment=function(t,e){return this.batch({update:function(r){var n=r.readFragment(t),a=e(n);return null==a?n:(r.writeFragment((0,d.C3)((0,d.C3)({},t),{data:a})),a)}})},i}();!1!==globalThis.__DEV__&&(st.prototype.getMemoryInternals=Z.Cw);var A=function(i){function t(e,r,n,a){var s,o=i.call(this,e)||this;if(o.message=e,o.path=r,o.query=n,o.variables=a,Array.isArray(o.path)){o.missing=o.message;for(var u=o.path.length-1;u>=0;--u)o.missing=((s={})[o.path[u]]=o.missing,s)}else o.missing=o.path;return o.__proto__=t.prototype,o}return(0,d.ct)(t,i),t}(Error),ot=y(316),vt=y(1220),q=y(304),ye=y(4736),m=y(3924),Ut=y(7632),tt=y(92),zt=y(4908),W=y(4876),N=y(3824),mt=y(40),k=y(8144);function gt(i){return!1!==globalThis.__DEV__&&function ve(i){var t=new Set([i]);return t.forEach(function(e){(0,k.a)(e)&&function me(i){if(!1!==globalThis.__DEV__&&!Object.isFrozen(i))try{Object.freeze(i)}catch(t){if(t instanceof TypeError)return null;throw t}return i}(e)===e&&Object.getOwnPropertyNames(e).forEach(function(r){(0,k.a)(e[r])&&t.add(e[r])})}),i}(i),i}var ct=y(9200),S=y(204),F=Object.prototype.hasOwnProperty;function et(i){return null==i}function kt(i,t){var e=i.__typename,r=i.id,n=i._id;if("string"==typeof e&&(t&&(t.keyObject=et(r)?et(n)?void 0:{_id:n}:{id:r}),et(r)&&!et(n)&&(r=n),!et(r)))return"".concat(e,":").concat("number"==typeof r||"string"==typeof r?r:JSON.stringify(r))}var jt={dataIdFromObject:kt,addTypename:!0,resultCaching:!0,canonizeResults:!1};function It(i){var t=i.canonizeResults;return void 0===t?jt.canonizeResults:t}var Bt=/^[_a-z][_0-9a-z]*/i;function L(i){var t=i.match(Bt);return t?t[0]:i}function bt(i,t,e){return!!(0,k.a)(t)&&((0,S.c)(t)?t.every(function(r){return bt(i,r,e)}):i.selections.every(function(r){if((0,m.sh)(r)&&(0,mt.UN)(r,e)){var n=(0,m.ue)(r);return F.call(t,n)&&(!r.selectionSet||bt(r.selectionSet,t[n],e))}return!0}))}function H(i){return(0,k.a)(i)&&!(0,m.Ez)(i)&&!(0,S.c)(i)}function xt(i,t){var e=(0,z.uC)((0,W._A)(i));return{fragmentMap:e,lookupFragment:function(r){var n=e[r];return!n&&t&&(n=t.lookup(r)),n||null}}}var i,t,ut=Object.create(null),Ct=function(){return ut},At=Object.create(null),rt=function(){function i(t,e){var r=this;this.policies=t,this.group=e,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(n,a){return gt((0,m.Ez)(n)?r.get(n.__ref,a):n&&n[a])},this.canRead=function(n){return(0,m.Ez)(n)?r.has(n.__ref):"object"==typeof n},this.toReference=function(n,a){if("string"==typeof n)return(0,m.Yz)(n);if((0,m.Ez)(n))return n;var s=r.policies.identify(n)[0];if(s){var o=(0,m.Yz)(s);return a&&r.merge(s,n),o}}}return i.prototype.toObject=function(){return(0,d.C3)({},this.data)},i.prototype.has=function(t){return void 0!==this.lookup(t,!0)},i.prototype.get=function(t,e){if(this.group.depend(t,e),F.call(this.data,t)){var r=this.data[t];if(r&&F.call(r,e))return r[e]}return"__typename"===e&&F.call(this.policies.rootTypenamesById,t)?this.policies.rootTypenamesById[t]:this instanceof Q?this.parent.get(t,e):void 0},i.prototype.lookup=function(t,e){return e&&this.group.depend(t,"__exists"),F.call(this.data,t)?this.data[t]:this instanceof Q?this.parent.lookup(t,e):this.policies.rootTypenamesById[t]?Object.create(null):void 0},i.prototype.merge=function(t,e){var n,r=this;(0,m.Ez)(t)&&(t=t.__ref),(0,m.Ez)(e)&&(e=e.__ref);var a="string"==typeof t?this.lookup(n=t):t,s="string"==typeof e?this.lookup(n=e):e;if(s){(0,M.ON)("string"==typeof n,1);var o=new N.kL(Ee).merge(a,s);if(this.data[n]=o,o!==a&&(delete this.refs[n],this.group.caching)){var u=Object.create(null);a||(u.__exists=1),Object.keys(s).forEach(function(c){if(!a||a[c]!==o[c]){u[c]=1;var f=L(c);f!==c&&!r.policies.hasKeyArgs(o.__typename,f)&&(u[f]=1),void 0===o[c]&&!(r instanceof Q)&&delete o[c]}}),u.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[n]===o.__typename&&delete u.__typename,Object.keys(u).forEach(function(c){return r.group.dirty(n,c)})}}},i.prototype.modify=function(t,e){var r=this,n=this.lookup(t);if(n){var a=Object.create(null),s=!1,o=!0,u={DELETE:ut,INVALIDATE:At,isReference:m.Ez,toReference:this.toReference,canRead:this.canRead,readField:function(c,f){return r.policies.readField("string"==typeof c?{fieldName:c,from:f||(0,m.Yz)(t)}:c,{store:r})}};if(Object.keys(n).forEach(function(c){var f=L(c),l=n[c];if(void 0!==l){var h="function"==typeof e?e:e[c]||e[f];if(h){var p=h===Ct?ut:h(gt(l),(0,d.C3)((0,d.C3)({},u),{fieldName:f,storeFieldName:c,storage:r.getStorage(t,c)}));if(p===At)r.group.dirty(t,c);else if(p===ut&&(p=void 0),p!==l&&(a[c]=p,s=!0,l=p,!1!==globalThis.__DEV__)){var v=function(w){if(void 0===r.lookup(w.__ref))return!1!==globalThis.__DEV__&&M.ON.warn(2,w),!0};if((0,m.Ez)(p))v(p);else if(Array.isArray(p))for(var b=!1,C=void 0,R=0,O=p;R<O.length;R++){var g=O[R];if((0,m.Ez)(g)){if(b=!0,v(g))break}else"object"==typeof g&&g&&r.policies.identify(g)[0]&&(C=g);if(b&&void 0!==C){!1!==globalThis.__DEV__&&M.ON.warn(3,C);break}}}}void 0!==l&&(o=!1)}}),s)return this.merge(t,a),o&&(this instanceof Q?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},i.prototype.delete=function(t,e,r){var n,a=this.lookup(t);if(a){var s=this.getFieldValue(a,"__typename"),o=e&&r?this.policies.getStoreFieldName({typename:s,fieldName:e,args:r}):e;return this.modify(t,o?((n={})[o]=Ct,n):Ct)}return!1},i.prototype.evict=function(t,e){var r=!1;return t.id&&(F.call(this.data,t.id)&&(r=this.delete(t.id,t.fieldName,t.args)),this instanceof Q&&this!==e&&(r=this.parent.evict(t,e)||r),(t.fieldName||r)&&this.group.dirty(t.id,t.fieldName||"__exists")),r},i.prototype.clear=function(){this.replace(null)},i.prototype.extract=function(){var t=this,e=this.toObject(),r=[];return this.getRootIdSet().forEach(function(n){F.call(t.policies.rootTypenamesById,n)||r.push(n)}),r.length&&(e.__META={extraRootIds:r.sort()}),e},i.prototype.replace=function(t){var e=this;if(Object.keys(this.data).forEach(function(a){t&&F.call(t,a)||e.delete(a)}),t){var r=t.__META,n=(0,d.sX)(t,["__META"]);Object.keys(n).forEach(function(a){e.merge(a,n[a])}),r&&r.extraRootIds.forEach(this.retain,this)}},i.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},i.prototype.release=function(t){if(this.rootIds[t]>0){var e=--this.rootIds[t];return e||delete this.rootIds[t],e}return 0},i.prototype.getRootIdSet=function(t){return void 0===t&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof Q?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},i.prototype.gc=function(){var t=this,e=this.getRootIdSet(),r=this.toObject();e.forEach(function(s){F.call(r,s)&&(Object.keys(t.findChildRefIds(s)).forEach(e.add,e),delete r[s])});var n=Object.keys(r);if(n.length){for(var a=this;a instanceof Q;)a=a.parent;n.forEach(function(s){return a.delete(s)})}return n},i.prototype.findChildRefIds=function(t){if(!F.call(this.refs,t)){var e=this.refs[t]=Object.create(null),r=this.data[t];if(!r)return e;var n=new Set([r]);n.forEach(function(a){(0,m.Ez)(a)&&(e[a.__ref]=!0),(0,k.a)(a)&&Object.keys(a).forEach(function(s){var o=a[s];(0,k.a)(o)&&n.add(o)})})}return this.refs[t]},i.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},i}(),Lt=function(){function i(t,e){void 0===e&&(e=null),this.caching=t,this.parent=e,this.d=null,this.resetCaching()}return i.prototype.resetCaching=function(){this.d=this.caching?(0,P.S6)():null,this.keyMaker=new ct.f(tt.Oc)},i.prototype.depend=function(t,e){if(this.d){this.d(Ot(t,e));var r=L(e);r!==e&&this.d(Ot(t,r)),this.parent&&this.parent.depend(t,e)}},i.prototype.dirty=function(t,e){this.d&&this.d.dirty(Ot(t,e),"__exists"===e?"forget":"setDirty")},i}();function Ot(i,t){return t+"#"+i}function Qt(i,t){it(i)&&i.group.depend(t,"__exists")}t=function(e){function r(n){var s=n.resultCaching,u=n.seed,c=e.call(this,n.policies,new Lt(void 0===s||s))||this;return c.stump=new Oe(c),c.storageTrie=new ct.f(tt.Oc),u&&c.replace(u),c}return(0,d.ct)(r,e),r.prototype.addLayer=function(n,a){return this.stump.addLayer(n,a)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(i=rt||(rt={})),i.Root=t;var Q=function(i){function t(e,r,n,a){var s=i.call(this,r.policies,a)||this;return s.id=e,s.parent=r,s.replay=n,s.group=a,n(s),s}return(0,d.ct)(t,i),t.prototype.addLayer=function(e,r){return new t(e,this,r,this.group)},t.prototype.removeLayer=function(e){var r=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var s=r.data[a],o=n.lookup(a);o?s?s!==o&&Object.keys(s).forEach(function(u){(0,I.y)(s[u],o[u])||r.group.dirty(a,u)}):(r.group.dirty(a,"__exists"),Object.keys(o).forEach(function(u){r.group.dirty(a,u)})):r.delete(a)}),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return(0,d.C3)((0,d.C3)({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(e){var r=this.parent.findChildRefIds(e);return F.call(this.data,e)?(0,d.C3)((0,d.C3)({},r),i.prototype.findChildRefIds.call(this,e)):r},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(rt),Oe=function(i){function t(e){return i.call(this,"EntityStore.Stump",e,function(){},new Lt(e.group.caching,e.group))||this}return(0,d.ct)(t,i),t.prototype.removeLayer=function(){return this},t.prototype.merge=function(e,r){return this.parent.merge(e,r)},t}(Q);function Ee(i,t,e){var r=i[e],n=t[e];return(0,I.y)(r,n)?r:n}function it(i){return!!(i instanceof rt&&i.group.caching)}var Pt=function(){function i(){this.known=new(tt.qK?WeakSet:Set),this.pool=new ct.f(tt.Oc),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return i.prototype.isKnown=function(t){return(0,k.a)(t)&&this.known.has(t)},i.prototype.pass=function(t){if((0,k.a)(t)){var e=function Te(i){return(0,k.a)(i)?(0,S.c)(i)?i.slice(0):(0,d.C3)({__proto__:Object.getPrototypeOf(i)},i):i}(t);return this.passes.set(e,t),e}return t},i.prototype.admit=function(t){var e=this;if((0,k.a)(t)){var r=this.passes.get(t);if(r)return r;switch(Object.getPrototypeOf(t)){case Array.prototype:if(this.known.has(t))return t;var a=t.map(this.admit,this);return(s=this.pool.lookupArray(a)).array||(this.known.add(s.array=a),!1!==globalThis.__DEV__&&Object.freeze(a)),s.array;case null:case Object.prototype:if(this.known.has(t))return t;var o=Object.getPrototypeOf(t),u=[o],c=this.sortedKeys(t);u.push(c.json);var s,f=u.length;if(c.sorted.forEach(function(p){u.push(e.admit(t[p]))}),!(s=this.pool.lookupArray(u)).object){var l=s.object=Object.create(o);this.known.add(l),c.sorted.forEach(function(p,v){l[p]=u[f+v]}),!1!==globalThis.__DEV__&&Object.freeze(l)}return s.object}}return t},i.prototype.sortedKeys=function(t){var e=Object.keys(t),r=this.pool.lookupArray(e);if(!r.keys){e.sort();var n=JSON.stringify(e);(r.keys=this.keysByJSON.get(n))||this.keysByJSON.set(n,r.keys={sorted:e,json:n})}return r.keys},i}();function Gt(i){return[i.selectionSet,i.objectOrReference,i.context,i.context.canonizeResults]}var Se=function(){function i(t){var e=this;this.knownResults=new(tt.Oc?WeakMap:Map),this.config=(0,zt.g)(t,{addTypename:!1!==t.addTypename,canonizeResults:It(t)}),this.canon=t.canon||new Pt,this.executeSelectionSet=(0,P.em)(function(r){var n,a=r.context.canonizeResults,s=Gt(r);s[3]=!a;var o=(n=e.executeSelectionSet).peek.apply(n,s);return o?a?(0,d.C3)((0,d.C3)({},o),{result:e.canon.admit(o.result)}):o:(Qt(r.context.store,r.enclosingRef.__ref),e.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize||x.Y["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:Gt,makeCacheKey:function(r,n,a,s){if(it(a.store))return a.store.makeCacheKey(r,(0,m.Ez)(n)?n.__ref:n,a.varString,s)}}),this.executeSubSelectedArray=(0,P.em)(function(r){return Qt(r.context.store,r.enclosingRef.__ref),e.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize||x.Y["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(r){var n=r.field,a=r.array,s=r.context;if(it(s.store))return s.store.makeCacheKey(n,a,s.varString)}})}return i.prototype.resetCanon=function(){this.canon=new Pt},i.prototype.diffQueryAgainstStore=function(t){var e=t.store,r=t.query,n=t.rootId,a=void 0===n?"ROOT_QUERY":n,s=t.variables,o=t.returnPartialData,u=void 0===o||o,c=t.canonizeResults,f=void 0===c?this.config.canonizeResults:c,l=this.config.cache.policies;s=(0,d.C3)((0,d.C3)({},(0,W._W)((0,W.QR)(r))),s);var v,h=(0,m.Yz)(a),p=this.executeSelectionSet({selectionSet:(0,W.aG)(r).selectionSet,objectOrReference:h,enclosingRef:h,context:(0,d.C3)({store:e,query:r,policies:l,variables:s,varString:(0,q.s)(s),canonizeResults:f},xt(r,this.config.fragments))});if(p.missing&&(v=[new A(Me(p.missing),p.missing,r,s)],!u))throw v[0];return{result:p.result,complete:!v,missing:v}},i.prototype.isFresh=function(t,e,r,n){if(it(n.store)&&this.knownResults.get(t)===r){var a=this.executeSelectionSet.peek(r,e,n,this.canon.isKnown(t));if(a&&t===a.result)return!0}return!1},i.prototype.execSelectionSetImpl=function(t){var e=this,r=t.selectionSet,n=t.objectOrReference,a=t.enclosingRef,s=t.context;if((0,m.Ez)(n)&&!s.policies.rootTypenamesById[n.__ref]&&!s.store.has(n.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(n.__ref," object")};var h,o=s.variables,u=s.policies,f=s.store.getFieldValue(n,"__typename"),l=[],p=new N.kL;function v(g,E){var w;return g.missing&&(h=p.merge(h,((w={})[E]=g.missing,w))),g.result}this.config.addTypename&&"string"==typeof f&&!u.rootIdsByTypename[f]&&l.push({__typename:f});var b=new Set(r.selections);b.forEach(function(g){var E,w;if((0,mt.UN)(g,o))if((0,m.sh)(g)){var U=u.readField({fieldName:g.name.value,field:g,variables:s.variables,from:n},s),D=(0,m.ue)(g);void 0===U?vt.Go.added(g)||(h=p.merge(h,((E={})[D]="Can't find field '".concat(g.name.value,"' on ").concat((0,m.Ez)(n)?n.__ref+" object":"object "+JSON.stringify(n,null,2)),E))):(0,S.c)(U)?U=v(e.executeSubSelectedArray({field:g,array:U,enclosingRef:a,context:s}),D):g.selectionSet?null!=U&&(U=v(e.executeSelectionSet({selectionSet:g.selectionSet,objectOrReference:U,enclosingRef:(0,m.Ez)(U)?U:a,context:s}),D)):s.canonizeResults&&(U=e.canon.pass(U)),void 0!==U&&l.push(((w={})[D]=U,w))}else{var j=(0,z.gV)(g,s.lookupFragment);if(!j&&g.kind===Ut.U.FRAGMENT_SPREAD)throw(0,M.w1)(9,g.name.value);j&&u.fragmentMatches(j,f)&&j.selectionSet.selections.forEach(b.add,b)}});var R={result:(0,N.k5)(l),missing:h},O=s.canonizeResults?this.canon.admit(R):gt(R);return O.result&&this.knownResults.set(O.result,r),O},i.prototype.execSubSelectedArrayImpl=function(t){var o,e=this,r=t.field,n=t.array,a=t.enclosingRef,s=t.context,u=new N.kL;function c(f,l){var h;return f.missing&&(o=u.merge(o,((h={})[l]=f.missing,h))),f.result}return r.selectionSet&&(n=n.filter(s.store.canRead)),n=n.map(function(f,l){return null===f?null:(0,S.c)(f)?c(e.executeSubSelectedArray({field:r,array:f,enclosingRef:a,context:s}),l):r.selectionSet?c(e.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:f,enclosingRef:(0,m.Ez)(f)?f:a,context:s}),l):(!1!==globalThis.__DEV__&&function Re(i,t,e){if(!t.selectionSet){var r=new Set([e]);r.forEach(function(n){(0,k.a)(n)&&((0,M.ON)(!(0,m.Ez)(n),10,function be(i,t){return(0,m.Ez)(t)?i.get(t.__ref,"__typename"):t&&t.__typename}(i,n),t.name.value),Object.values(n).forEach(r.add,r))})}}(s.store,r,f),f)}),{result:s.canonizeResults?this.canon.admit(n):n,missing:o}},i}();function Me(i){try{JSON.stringify(i,function(t,e){if("string"==typeof e)throw e;return e})}catch(t){return t}}var we=y(5680),Fe=y(6952),nt=y(1648),Kt=Object.create(null);function Et(i){var t=JSON.stringify(i);return Kt[t]||(Kt[t]=Object.create(null))}function Wt(i){var t=Et(i);return t.keyFieldsFn||(t.keyFieldsFn=function(e,r){var n=function(s,o){return r.readField(o,s)},a=r.keyObject=Tt(i,function(s){var o=V(r.storeObject,s,n);return void 0===o&&e!==r.storeObject&&F.call(e,s[0])&&(o=V(e,s,Vt)),(0,M.ON)(void 0!==o,4,s.join("."),e),o});return"".concat(r.typename,":").concat(JSON.stringify(a))})}function Nt(i){var t=Et(i);return t.keyArgsFn||(t.keyArgsFn=function(e,r){var n=r.field,a=r.variables,s=r.fieldName,o=Tt(i,function(c){var f=c[0],l=f.charAt(0);if("@"!==l)if("$"!==l){if(e)return V(e,c)}else{var b=f.slice(1);if(a&&F.call(a,b)){var C=c.slice(0);return C[0]=b,V(a,C)}}else if(n&&(0,S.g)(n.directives)){var h=f.slice(1),p=n.directives.find(function(R){return R.name.value===h}),v=p&&(0,m.IL)(p,a);return v&&V(v,c.slice(1))}}),u=JSON.stringify(o);return(e||"{}"!==u)&&(s+=":"+u),s})}function Tt(i,t){var e=new N.kL;return Ht(i).reduce(function(r,n){var a,s=t(n);if(void 0!==s){for(var o=n.length-1;o>=0;--o)(a={})[n[o]]=s,s=a;r=e.merge(r,s)}return r},Object.create(null))}function Ht(i){var t=Et(i);if(!t.paths){var e=t.paths=[],r=[];i.forEach(function(n,a){(0,S.c)(n)?(Ht(n).forEach(function(s){return e.push(r.concat(s))}),r.length=0):(r.push(n),(0,S.c)(i[a+1])||(e.push(r.slice(0)),r.length=0))})}return t.paths}function Vt(i,t){return i[t]}function V(i,t,e){return e=e||Vt,Yt(t.reduce(function r(n,a){return(0,S.c)(n)?n.map(function(s){return r(s,a)}):n&&e(n,a)},i))}function Yt(i){return(0,k.a)(i)?(0,S.c)(i)?i.map(Yt):Tt(Object.keys(i).sort(),function(t){return V(i,t)}):i}function St(i){return void 0!==i.args?i.args:i.field?(0,m.IL)(i.field,i.variables):null}var De=function(){},_t=function(i,t){return t.fieldName},$t=function(i,t,e){return(0,e.mergeObjects)(i,t)},Jt=function(i,t){return t},Ue=function(){function i(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,d.C3)({dataIdFromObject:kt},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return i.prototype.identify=function(t,e){var r,n=this,a=e&&(e.typename||(null===(r=e.storeObject)||void 0===r?void 0:r.__typename))||t.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var u,s=e&&e.storeObject||t,o=(0,d.C3)((0,d.C3)({},e),{typename:a,storeObject:s,readField:e&&e.readField||function(){var h=Mt(arguments,s);return n.readField(h,{store:n.cache.data,variables:h.variables})}}),c=a&&this.getTypePolicy(a),f=c&&c.keyFn||this.config.dataIdFromObject;f;){var l=f((0,d.C3)((0,d.C3)({},t),s),o);if(!(0,S.c)(l)){u=l;break}f=Wt(l)}return u=u?String(u):void 0,o.keyObject?[u,o.keyObject]:[u]},i.prototype.addTypePolicies=function(t){var e=this;Object.keys(t).forEach(function(r){var n=t[r],a=n.queryType,s=n.mutationType,o=n.subscriptionType,u=(0,d.sX)(n,["queryType","mutationType","subscriptionType"]);a&&e.setRootTypename("Query",r),s&&e.setRootTypename("Mutation",r),o&&e.setRootTypename("Subscription",r),F.call(e.toBeAdded,r)?e.toBeAdded[r].push(u):e.toBeAdded[r]=[u]})},i.prototype.updateTypePolicy=function(t,e){var r=this,n=this.getTypePolicy(t),a=e.keyFields,s=e.fields;function o(u,c){u.merge="function"==typeof c?c:!0===c?$t:!1===c?Jt:u.merge}o(n,e.merge),n.keyFn=!1===a?De:(0,S.c)(a)?Wt(a):"function"==typeof a?a:n.keyFn,s&&Object.keys(s).forEach(function(u){var c=r.getFieldPolicy(t,u,!0),f=s[u];if("function"==typeof f)c.read=f;else{var l=f.keyArgs,h=f.read,p=f.merge;c.keyFn=!1===l?_t:(0,S.c)(l)?Nt(l):"function"==typeof l?l:c.keyFn,"function"==typeof h&&(c.read=h),o(c,p)}c.read&&c.merge&&(c.keyFn=c.keyFn||_t)})},i.prototype.setRootTypename=function(t,e){void 0===e&&(e=t);var r="ROOT_"+t.toUpperCase(),n=this.rootTypenamesById[r];e!==n&&((0,M.ON)(!n||n===t,5,t),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[e]=r,this.rootTypenamesById[r]=e)},i.prototype.addPossibleTypes=function(t){var e=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(r){e.getSupertypeSet(r,!0),t[r].forEach(function(n){e.getSupertypeSet(n,!0).add(r);var a=n.match(Bt);(!a||a[0]!==n)&&e.fuzzySubtypes.set(n,new RegExp(n))})})},i.prototype.getTypePolicy=function(t){var e=this;if(!F.call(this.typePolicies,t)){var r=this.typePolicies[t]=Object.create(null);r.fields=Object.create(null);var n=this.supertypeMap.get(t);!n&&this.fuzzySubtypes.size&&(n=this.getSupertypeSet(t,!0),this.fuzzySubtypes.forEach(function(s,o){if(s.test(t)){var u=e.supertypeMap.get(o);u&&u.forEach(function(c){return n.add(c)})}})),n&&n.size&&n.forEach(function(s){var o=e.getTypePolicy(s),u=o.fields,c=(0,d.sX)(o,["fields"]);Object.assign(r,c),Object.assign(r.fields,u)})}var a=this.toBeAdded[t];return a&&a.length&&a.splice(0).forEach(function(s){e.updateTypePolicy(t,s)}),this.typePolicies[t]},i.prototype.getFieldPolicy=function(t,e,r){if(t){var n=this.getTypePolicy(t).fields;return n[e]||r&&(n[e]=Object.create(null))}},i.prototype.getSupertypeSet=function(t,e){var r=this.supertypeMap.get(t);return!r&&e&&this.supertypeMap.set(t,r=new Set),r},i.prototype.fragmentMatches=function(t,e,r,n){var a=this;if(!t.typeCondition)return!0;if(!e)return!1;var s=t.typeCondition.name.value;if(e===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var o=this.getSupertypeSet(e,!0),u=[o],c=function(v){var b=a.getSupertypeSet(v,!1);b&&b.size&&u.indexOf(b)<0&&u.push(b)},f=!(!r||!this.fuzzySubtypes.size),l=!1,h=0;h<u.length;++h){var p=u[h];if(p.has(s))return o.has(s)||(l&&!1!==globalThis.__DEV__&&M.ON.warn(6,e,s),o.add(s)),!0;p.forEach(c),f&&h===u.length-1&&bt(t.selectionSet,r,n)&&(f=!1,l=!0,this.fuzzySubtypes.forEach(function(v,b){var C=e.match(v);C&&C[0]===e&&c(b)}))}return!1},i.prototype.hasKeyArgs=function(t,e){var r=this.getFieldPolicy(t,e,!1);return!(!r||!r.keyFn)},i.prototype.getStoreFieldName=function(t){var a,e=t.typename,r=t.fieldName,n=this.getFieldPolicy(e,r,!1),s=n&&n.keyFn;if(s&&e)for(var o={typename:e,fieldName:r,field:t.field||null,variables:t.variables},u=St(t);s;){var c=s(u,o);if(!(0,S.c)(c)){a=c||r;break}s=Nt(c)}return void 0===a&&(a=t.field?(0,m.CE)(t.field,t.variables):(0,m.k7)(r,St(t))),!1===a?r:r===L(a)?a:r+":"+a},i.prototype.readField=function(t,e){var r=t.from;if(r&&(t.field||t.fieldName)){if(void 0===t.typename){var a=e.store.getFieldValue(r,"__typename");a&&(t.typename=a)}var s=this.getStoreFieldName(t),o=L(s),u=e.store.getFieldValue(r,s),c=this.getFieldPolicy(t.typename,o,!1),f=c&&c.read;if(f){var l=Xt(this,r,t,e,e.store.getStorage((0,m.Ez)(r)?r.__ref:r,s));return nt.M1.withValue(this.cache,f,[u,l])}return u}},i.prototype.getReadFunction=function(t,e){var r=this.getFieldPolicy(t,e,!1);return r&&r.read},i.prototype.getMergeFunction=function(t,e,r){var n=this.getFieldPolicy(t,e,!1),a=n&&n.merge;return!a&&r&&(a=(n=this.getTypePolicy(r))&&n.merge),a},i.prototype.runMergeFunction=function(t,e,r,n,a){var s=r.field,o=r.typename,u=r.merge;return u===$t?Zt(n.store)(t,e):u===Jt?e:(n.overwrite&&(t=void 0),u(t,e,Xt(this,void 0,{typename:o,fieldName:s.name.value,field:s,variables:n.variables},n,a||Object.create(null))))},i}();function Xt(i,t,e,r,n){var a=i.getStoreFieldName(e),s=L(a),o=e.variables||r.variables,u=r.store,c=u.toReference,f=u.canRead;return{args:St(e),field:e.field||null,fieldName:s,storeFieldName:a,variables:o,isReference:m.Ez,toReference:c,storage:n,cache:i.cache,canRead:f,readField:function(){return i.readField(Mt(arguments,t,o),r)},mergeObjects:Zt(r.store)}}function Mt(i,t,e){var s,r=i[0];return"string"==typeof r?s={fieldName:r,from:i.length>1?i[1]:t}:(s=(0,d.C3)({},r),F.call(s,"from")||(s.from=t)),!1!==globalThis.__DEV__&&void 0===s.from&&!1!==globalThis.__DEV__&&M.ON.warn(7,(0,Fe._)(Array.from(i))),void 0===s.variables&&(s.variables=e),s}function Zt(i){return function(e,r){if((0,S.c)(e)||(0,S.c)(r))throw(0,M.w1)(8);if((0,k.a)(e)&&(0,k.a)(r)){var n=i.getFieldValue(e,"__typename"),a=i.getFieldValue(r,"__typename");if(n&&a&&n!==a)return r;if((0,m.Ez)(e)&&H(r))return i.merge(e.__ref,r),e;if(H(e)&&(0,m.Ez)(r))return i.merge(e,r.__ref),r;if(H(e)&&H(r))return(0,d.C3)((0,d.C3)({},e),r)}return r}}function Rt(i,t,e){var r="".concat(t).concat(e),n=i.flavors.get(r);return n||i.flavors.set(r,n=i.clientOnly===t&&i.deferred===e?i:(0,d.C3)((0,d.C3)({},i),{clientOnly:t,deferred:e})),n}var ze=function(){function i(t,e,r){this.cache=t,this.reader=e,this.fragments=r}return i.prototype.writeToStore=function(t,e){var r=this,n=e.query,a=e.result,s=e.dataId,o=e.variables,u=e.overwrite,c=(0,W.ED)(n),f=function Ce(){return new N.kL}();o=(0,d.C3)((0,d.C3)({},(0,W._W)(c)),o);var l=(0,d.C3)((0,d.C3)({store:t,written:Object.create(null),merge:function(p,v){return f.merge(p,v)},variables:o,varString:(0,q.s)(o)},xt(n,this.fragments)),{overwrite:!!u,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),h=this.processSelectionSet({result:a||Object.create(null),dataId:s,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:l});if(!(0,m.Ez)(h))throw(0,M.w1)(11,a);return l.incomingById.forEach(function(p,v){var b=p.storeObject,C=p.mergeTree,R=p.fieldNodeSet,O=(0,m.Yz)(v);if(C&&C.map.size){var g=r.applyMerges(C,O,b,l);if((0,m.Ez)(g))return;b=g}if(!1!==globalThis.__DEV__&&!l.overwrite){var E=Object.create(null);R.forEach(function(D){D.selectionSet&&(E[D.name.value]=!0)}),Object.keys(b).forEach(function(D){(function(D){return!0===E[L(D)]})(D)&&!function(D){var j=C&&C.map.get(D);return!!(j&&j.info&&j.info.merge)}(D)&&function ke(i,t,e,r){var n=function(l){var h=r.getFieldValue(l,e);return"object"==typeof h&&h},a=n(i);if(a){var s=n(t);if(s&&!(0,m.Ez)(a)&&!(0,I.y)(a,s)&&!Object.keys(a).every(function(l){return void 0!==r.getFieldValue(s,l)})){var o=r.getFieldValue(i,"__typename")||r.getFieldValue(t,"__typename"),u=L(e),c="".concat(o,".").concat(u);if(!re.has(c)){re.add(c);var f=[];!(0,S.c)(a)&&!(0,S.c)(s)&&[a,s].forEach(function(l){var h=r.getFieldValue(l,"__typename");"string"==typeof h&&!f.includes(h)&&f.push(h)}),!1!==globalThis.__DEV__&&M.ON.warn(14,u,o,f.length?"either ensure all objects of type "+f.join(" and ")+" have an ID or a custom merge function, or ":"",c,a,s)}}}}(O,b,D,l.store)})}t.merge(v,b)}),t.retain(h.__ref),h},i.prototype.processSelectionSet=function(t){var e=this,r=t.dataId,n=t.result,a=t.selectionSet,s=t.context,o=t.mergeTree,u=this.cache.policies,c=Object.create(null),f=r&&u.rootTypenamesById[r]||(0,m.A1)(n,a,s.fragmentMap)||r&&s.store.get(r,"__typename");"string"==typeof f&&(c.__typename=f);var l=function(){var g=Mt(arguments,c,s.variables);if((0,m.Ez)(g.from)){var E=s.incomingById.get(g.from.__ref);if(E){var w=u.readField((0,d.C3)((0,d.C3)({},g),{from:E.storeObject}),s);if(void 0!==w)return w}}return u.readField(g,s)},h=new Set;this.flattenFields(a,n,s,f).forEach(function(g,E){var w,U=(0,m.ue)(E),D=n[U];if(h.add(E),void 0!==D){var j=u.getStoreFieldName({typename:f,fieldName:E.name.value,field:E,variables:g.variables}),he=te(o,j),yt=e.processFieldValue(D,E,E.selectionSet?Rt(g,!1,!1):g,he),pe=void 0;E.selectionSet&&((0,m.Ez)(yt)||H(yt))&&(pe=l("__typename",yt));var de=u.getMergeFunction(f,E.name.value,pe);de?he.info={field:E,typename:f,merge:de}:ee(o,j),c=g.merge(c,((w={})[j]=yt,w))}else!1!==globalThis.__DEV__&&!g.clientOnly&&!g.deferred&&!vt.Go.added(E)&&!u.getReadFunction(f,E.name.value)&&!1!==globalThis.__DEV__&&M.ON.error(12,(0,m.ue)(E),n)});try{var p=u.identify(n,{typename:f,selectionSet:a,fragmentMap:s.fragmentMap,storeObject:c,readField:l}),b=p[1];r=r||p[0],b&&(c=s.merge(c,b))}catch(g){if(!r)throw g}if("string"==typeof r){var C=(0,m.Yz)(r),R=s.written[r]||(s.written[r]=[]);if(R.indexOf(a)>=0||(R.push(a),this.reader&&this.reader.isFresh(n,C,a,s)))return C;var O=s.incomingById.get(r);return O?(O.storeObject=s.merge(O.storeObject,c),O.mergeTree=wt(O.mergeTree,o),h.forEach(function(g){return O.fieldNodeSet.add(g)})):s.incomingById.set(r,{storeObject:c,mergeTree:ft(o)?void 0:o,fieldNodeSet:h}),C}return c},i.prototype.processFieldValue=function(t,e,r,n){var a=this;return e.selectionSet&&null!==t?(0,S.c)(t)?t.map(function(s,o){var u=a.processFieldValue(s,e,r,te(n,o));return ee(n,o),u}):this.processSelectionSet({result:t,selectionSet:e.selectionSet,context:r,mergeTree:n}):!1!==globalThis.__DEV__?(0,we.U)(t):t},i.prototype.flattenFields=function(t,e,r,n){void 0===n&&(n=(0,m.A1)(e,t,r.fragmentMap));var a=new Map,s=this.cache.policies,o=new ct.f(!1);return function u(c,f){var l=o.lookup(c,f.clientOnly,f.deferred);l.visited||(l.visited=!0,c.selections.forEach(function(h){if((0,mt.UN)(h,r.variables)){var p=f.clientOnly,v=f.deferred;if(!(p&&v)&&(0,S.g)(h.directives)&&h.directives.forEach(function(R){var O=R.name.value;if("client"===O&&(p=!0),"defer"===O){var g=(0,m.IL)(R,r.variables);(!g||!1!==g.if)&&(v=!0)}}),(0,m.sh)(h)){var b=a.get(h);b&&(p=p&&b.clientOnly,v=v&&b.deferred),a.set(h,Rt(r,p,v))}else{var C=(0,z.gV)(h,r.lookupFragment);if(!C&&h.kind===Ut.U.FRAGMENT_SPREAD)throw(0,M.w1)(13,h.name.value);C&&s.fragmentMatches(C,n,e,r.variables)&&u(C.selectionSet,Rt(r,p,v))}}}))}(t,r),a},i.prototype.applyMerges=function(t,e,r,n,a){var s,o=this;if(t.map.size&&!(0,m.Ez)(r)){var u=(0,S.c)(r)||!(0,m.Ez)(e)&&!H(e)?void 0:e,c=r;u&&!a&&(a=[(0,m.Ez)(u)?u.__ref:u]);var f,l=function(h,p){return(0,S.c)(h)?"number"==typeof p?h[p]:void 0:n.store.getFieldValue(h,String(p))};t.map.forEach(function(h,p){var v=l(u,p),b=l(c,p);if(void 0!==b){a&&a.push(p);var C=o.applyMerges(h,v,b,n,a);C!==b&&(f=f||new Map).set(p,C),a&&(0,M.ON)(a.pop()===p)}}),f&&(r=(0,S.c)(c)?c.slice(0):(0,d.C3)({},c),f.forEach(function(h,p){r[p]=h}))}return t.info?this.cache.policies.runMergeFunction(e,r,t.info,n,a&&(s=n.store).getStorage.apply(s,a)):r},i}(),qt=[];function te(i,t){var e=i.map;return e.has(t)||e.set(t,qt.pop()||{map:new Map}),e.get(t)}function wt(i,t){if(i===t||!t||ft(t))return i;if(!i||ft(i))return t;var e=i.info&&t.info?(0,d.C3)((0,d.C3)({},i.info),t.info):i.info||t.info,r=i.map.size&&t.map.size,a={info:e,map:r?new Map:i.map.size?i.map:t.map};if(r){var s=new Set(t.map.keys());i.map.forEach(function(o,u){a.map.set(u,wt(o,t.map.get(u))),s.delete(u)}),s.forEach(function(o){a.map.set(o,wt(t.map.get(o),i.map.get(o)))})}return a}function ft(i){return!i||!(i.info||i.map.size)}function ee(i,t){var e=i.map,r=e.get(t);r&&ft(r)&&(qt.push(r),e.delete(t))}var re=new Set,ie=function(i){function t(e){void 0===e&&(e={});var r=i.call(this)||this;return r.watches=new Set,r.addTypenameTransform=new ot._(vt.Go),r.assumeImmutableResults=!0,r.makeVar=nt.UT,r.txCount=0,r.config=function ge(i){return(0,zt.g)(jt,i)}(e),r.addTypename=!!r.config.addTypename,r.policies=new Ue({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return(0,d.ct)(t,i),t.prototype.init=function(){var e=this.data=new rt.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var r=this,n=this.storeReader,a=this.config.fragments;this.storeWriter=new ze(this,this.storeReader=new Se({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:It(this.config),canon:e?void 0:n&&n.canon,fragments:a}),a),this.maybeBroadcastWatch=(0,P.em)(function(s,o){return r.broadcastWatch(s,o)},{max:this.config.resultCacheMaxSize||x.Y["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(s){var o=s.optimistic?r.optimisticData:r.data;if(it(o))return o.makeCacheKey(s.query,s.callback,(0,q.s)({optimistic:s.optimistic,id:s.id,variables:s.variables}))}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(s){return s.resetCaching()})},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var r=e.returnPartialData,n=void 0!==r&&r;try{return this.storeReader.diffQueryAgainstStore((0,d.C3)((0,d.C3)({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:n})).result||null}catch(a){if(a instanceof A)return null;throw a}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{! --this.txCount&&!1!==e.broadcast&&this.broadcastWatches()}},t.prototype.modify=function(e){if(F.call(e,"id")&&!e.id)return!1;var r=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(e.id||"ROOT_QUERY",e.fields)}finally{! --this.txCount&&!1!==e.broadcast&&this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore((0,d.C3)((0,d.C3)({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var r=this;return this.watches.size||(0,nt.wT)(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){r.watches.delete(e)&&!r.watches.size&&(0,nt.Om)(r),r.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){var r;q.s.reset(),ye.S.reset(),this.addTypenameTransform.resetCache(),null===(r=this.config.fragments)||void 0===r||r.resetCaches();var n=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),n},t.prototype.retain=function(e,r){return(r?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,r){return(r?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if((0,m.Ez)(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(r){!1!==globalThis.__DEV__&&M.ON.warn(r)}},t.prototype.evict=function(e){if(!e.id){if(F.call(e,"id"))return!1;e=(0,d.C3)((0,d.C3)({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{! --this.txCount&&!1!==e.broadcast&&this.broadcastWatches()}},t.prototype.reset=function(e){var r=this;return this.init(),q.s.reset(),e&&e.discardWatches?(this.watches.forEach(function(n){return r.maybeBroadcastWatch.forget(n)}),this.watches.clear(),(0,nt.Om)(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var r=this.optimisticData.removeLayer(e);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},t.prototype.batch=function(e){var c,r=this,n=e.update,a=e.optimistic,s=void 0===a||a,o=e.removeOptimistic,u=e.onWatchUpdated,f=function(h){var v=r.data,b=r.optimisticData;++r.txCount,h&&(r.data=r.optimisticData=h);try{return c=n(r)}finally{--r.txCount,r.data=v,r.optimisticData=b}},l=new Set;return u&&!this.txCount&&this.broadcastWatches((0,d.C3)((0,d.C3)({},e),{onWatchUpdated:function(h){return l.add(h),!1}})),"string"==typeof s?this.optimisticData=this.optimisticData.addLayer(s,f):!1===s?f(this.data):f(),"string"==typeof o&&(this.optimisticData=this.optimisticData.removeLayer(o)),u&&l.size?(this.broadcastWatches((0,d.C3)((0,d.C3)({},e),{onWatchUpdated:function(h,p){var v=u.call(this,h,p);return!1!==v&&l.delete(h),v}})),l.size&&l.forEach(function(h){return r.maybeBroadcastWatch.dirty(h)})):this.broadcastWatches(e),c},t.prototype.performTransaction=function(e,r){return this.batch({update:e,optimistic:r||null!==r})},t.prototype.transformDocument=function(e){return this.addTypenameToDocument(this.addFragmentsToDocument(e))},t.prototype.broadcastWatches=function(e){var r=this;this.txCount||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n,e)})},t.prototype.addFragmentsToDocument=function(e){var r=this.config.fragments;return r?r.transform(e):e},t.prototype.addTypenameToDocument=function(e){return this.addTypename?this.addTypenameTransform.transformDocument(e):e},t.prototype.broadcastWatch=function(e,r){var n=e.lastDiff,a=this.diff(e);r&&(e.optimistic&&"string"==typeof r.optimistic&&(a.fromOptimisticTransaction=!0),r.onWatchUpdated&&!1===r.onWatchUpdated.call(this,e,a,n))||(!n||!(0,I.y)(n.result,a.result))&&e.callback(e.lastDiff=a,n)},t}(st);!1!==globalThis.__DEV__&&(ie.prototype.getMemoryInternals=Z.QX);var Y=y(1468),ne=y(2300),T=y(4496),Ft=y(5488),lt=y(4160),ht=y(3252),je=function(){function i(t){var e=t.batchDebounce,r=t.batchInterval,n=t.batchMax,a=t.batchHandler,s=t.batchKey;this.batchesByKey=new Map,this.scheduledBatchTimerByKey=new Map,this.batchDebounce=e,this.batchInterval=r,this.batchMax=n||0,this.batchHandler=a,this.batchKey=s||function(){return""}}return i.prototype.enqueueRequest=function(t){var e=this,r=(0,d.C3)((0,d.C3)({},t),{next:[],error:[],complete:[],subscribers:new Set}),n=this.batchKey(t.operation);return r.observable||(r.observable=new lt._(function(a){var s=e.batchesByKey.get(n);s||e.batchesByKey.set(n,s=new Set);var o=0===s.size,u=0===r.subscribers.size;return r.subscribers.add(a),u&&s.add(r),a.next&&r.next.push(a.next.bind(a)),a.error&&r.error.push(a.error.bind(a)),a.complete&&r.complete.push(a.complete.bind(a)),(o||e.batchDebounce)&&e.scheduleQueueConsumption(n),s.size===e.batchMax&&e.consumeQueue(n),function(){var c;r.subscribers.delete(a)&&r.subscribers.size<1&&s.delete(r)&&s.size<1&&(e.consumeQueue(n),null===(c=s.subscription)||void 0===c||c.unsubscribe())}})),r.observable},i.prototype.consumeQueue=function(t){void 0===t&&(t="");var e=this.batchesByKey.get(t);if(this.batchesByKey.delete(t),e&&e.size){var r=[],n=[],a=[],s=[],o=[],u=[];e.forEach(function(l){r.push(l.operation),n.push(l.forward),a.push(l.observable),s.push(l.next),o.push(l.error),u.push(l.complete)});var c=this.batchHandler(r,n)||lt._.of(),f=function(l){o.forEach(function(h){h&&h.forEach(function(p){return p(l)})})};return e.subscription=c.subscribe({next:function(l){if(Array.isArray(l)||(l=[l]),s.length!==l.length){var h=new Error("server returned results with length ".concat(l.length,", expected length of ").concat(s.length));return h.result=l,f(h)}l.forEach(function(p,v){s[v]&&s[v].forEach(function(b){return b(p)})})},error:f,complete:function(){u.forEach(function(l){l&&l.forEach(function(h){return h()})})}}),a}},i.prototype.scheduleQueueConsumption=function(t){var e=this;clearTimeout(this.scheduledBatchTimerByKey.get(t)),this.scheduledBatchTimerByKey.set(t,setTimeout(function(){e.consumeQueue(t),e.scheduledBatchTimerByKey.delete(t)},this.batchInterval))},i}();!function(i){function t(e){var r=i.call(this)||this,n=e||{},s=n.batchInterval,u=n.batchMax,f=n.batchHandler,h=n.batchKey;return r.batcher=new je({batchDebounce:n.batchDebounce,batchInterval:void 0===s?10:s,batchMax:void 0===u?0:u,batchHandler:void 0===f?function(){return null}:f,batchKey:void 0===h?function(){return""}:h}),e.batchHandler.length<=1&&(r.request=function(v){return r.batcher.enqueueRequest({operation:v})}),r}(0,d.ct)(t,i),t.prototype.request=function(e,r){return this.batcher.enqueueRequest({operation:e,forward:r})}}(Ft.A);class Be extends Ft.A{httpClient;options;requester;print=ne.S;constructor(t,e){super(),this.httpClient=t,this.options=e,this.options.operationPrinter&&(this.print=this.options.operationPrinter),this.requester=r=>new lt._(n=>{const a=r.getContext(),s=(O,g)=>function G(...i){const t=i.find(e=>typeof e<"u");return typeof t>"u"?i[i.length-1]:t}(a[O],this.options[O],g);let o=s("method","POST");const u=s("includeQuery",!0),c=s("includeExtensions",!1),f=s("uri","graphql"),l=s("withCredentials"),h=s("useMultipart"),p=!0===this.options.useGETForQueries,v=r.query.definitions.some(O=>"OperationDefinition"===O.kind&&"query"===O.operation);p&&v&&(o="GET");const b={method:o,url:"function"==typeof f?f(r):f,body:{operationName:r.operationName,variables:r.variables},options:{withCredentials:l,useMultipart:h,headers:this.options.headers}};c&&(b.body.extensions=r.extensions),u&&(b.body.query=this.print(r.query));const C=function oe(i){let t=i.headers&&i.headers instanceof B.HttpHeaders?i.headers:new B.HttpHeaders(i.headers);if(i.clientAwareness){const{name:e,version:r}=i.clientAwareness;e&&!t.has("apollographql-client-name")&&(t=t.set("apollographql-client-name",e)),r&&!t.has("apollographql-client-version")&&(t=t.set("apollographql-client-version",r))}return t}(a);b.options.headers=((i,t)=>i&&t?t.keys().reduce((r,n)=>r.set(n,t.getAll(n)),i):t||i)(b.options.headers,C);const R=((i,t,e)=>{const r=-1!==["POST","PUT","PATCH"].indexOf(i.method.toUpperCase()),a=i.body.length;let o,s=i.options&&i.options.useMultipart;if(s){if(a)return new ht._(c=>c.error(new Error("File upload is not available when combined with Batching")));if(!r)return new ht._(c=>c.error(new Error("File upload is not available when GET is used")));if(!e)return new ht._(c=>c.error(new Error('To use File upload you need to pass "extractFiles" function from "extract-files" library to HttpLink\'s options')));o=e(i.body),s=!!o.files.size}let u={};if(a){if(!r)return new ht._(c=>c.error(new Error("Batching is not available for GET requests")));u={body:i.body}}else u=r?{body:s?o.clone:i.body}:{params:Object.keys(i.body).reduce((l,h)=>{const p=i.body[h];return l[h]=-1!==["variables","extensions"].indexOf(h.toLowerCase())?JSON.stringify(p):p,l},{})};if(s&&r){const c=new FormData;c.append("operations",JSON.stringify(u.body));const f={},l=o.files;let h=0;l.forEach(p=>{f[++h]=p}),c.append("map",JSON.stringify(f)),h=0,l.forEach((p,v)=>{c.append(++h+"",v,v.name)}),u.body=c}return t.request(i.method,i.url,{observe:"response",responseType:"json",reportProgress:!1,...u,...i.options})})(b,this.httpClient,this.options.extractFiles).subscribe({next:O=>{r.setContext({response:O}),n.next(O.body)},error:O=>n.error(O),complete:()=>n.complete()});return()=>{R.closed||R.unsubscribe()}})}request(t){return this.requester(t)}}let xe=(()=>{class i{httpClient;constructor(e){this.httpClient=e}create(e){return new Be(this.httpClient,e)}static \u0275fac=function(r){return new(r||i)(T.CoB(B.HttpClient))};static \u0275prov=T.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ae=y(6700),Le=y(6040),ce=y(4704),Qe=y(4680),Pe=y(3992),dt=y(9212),Ge=y(7760);const _=Y.gql`
  query GetUsers($options: PageQueryOptions) {
    users(options: $options) {
      data {
        id
        username
        email
        address {
          geo {
            lat
            lng
          }
        }
      }
      meta {
        totalCount
      }
    }
  }
`,Ne=Y.gql`
  mutation CreateUser($input: CreateUserInput!) {
    createUser(input: $input) {
      id
      username
      email
      address {
        geo {
          lat
          lng
        }
      }
    }
  }
`,He=Y.gql`
  mutation UpdateUser($id: ID!, $input: UpdateUserInput!) {
    updateUser(id: $id, input: $input) {
      id
      username
      email
      address {
        geo {
          lat
          lng
        }
      }
    }
  }
`;let ue=(()=>{class i{constructor(e){this.apollo=e,this._state$=new Ae.g({loading:!1,error:null,modifying:!1,modifyError:null}),this.state$=(0,Le.E)([this.apollo.watchQuery({query:_}).valueChanges.pipe((0,ce.k)(r=>r.data.users?.data??null)),this._state$]).pipe((0,Qe.o)(1),(0,ce.k)(([r,n])=>({data:r,...n})))}stateChange(e){this._state$.pipe((0,Pe.U)(1)).subscribe(r=>this._state$.next({...r,...e}))}usersGet(){return this.stateChange({loading:!0}),this.apollo.watchQuery({query:_}).valueChanges.pipe((0,dt.y)(()=>this.stateChange({loading:!1})))}refresh(){return this.stateChange({loading:!0}),(0,Ge.Q)(this.apollo.client.refetchQueries({include:"active"})).pipe((0,dt.y)(()=>this.stateChange({loading:!1})))}userCreate(e){return this.stateChange({modifying:!0}),this.apollo.mutate({mutation:Ne,variables:{input:e},update:(r,{data:n})=>{const a=r.readQuery({query:_});a&&n?.createUser&&r.writeQuery({query:_,data:{users:{...a.users,data:[...a?.users?.data||[],n.createUser]}}})}}).pipe((0,dt.y)(()=>this.stateChange({modifying:!1})))}userUpdate(e,r){return this.stateChange({modifying:!0}),this.apollo.mutate({mutation:He,variables:{id:e,input:r},update:(n,{data:a})=>{const s=n.readQuery({query:_});if(s&&a?.updateUser){const o=(s?.users?.data||[]).map(u=>u?.id===a.updateUser?.id?a.updateUser:u);n.writeQuery({query:_,data:{users:{...s.users,data:o}}})}}}).pipe((0,dt.y)(()=>this.stateChange({modifying:!1})))}static#t=this.\u0275fac=function(r){return new(r||i)(T.CoB(Y.Apollo))};static#e=this.\u0275prov=T.wxM({token:i,factory:i.\u0275fac})}return i})();var Ve=y(48);let fe=(()=>{class i{constructor(e){this.svc=e}ngOnInit(){this.svc.state$.subscribe(e=>{e&&console.warn(e)})}userAdd(){this.svc.userCreate({username:"Test",name:"Test",email:"test@test.com"}).subscribe()}refresh(){this.svc.refresh().subscribe()}userUpdate(){this.svc.userUpdate("1",{email:"eat@joes.com"}).subscribe()}static#t=this.\u0275fac=function(r){return new(r||i)(T.GI1(ue))};static#e=this.\u0275cmp=T.In1({type:i,selectors:[["app-users"]],decls:12,vars:0,consts:[[1,"container"],["p-button","",3,"click"]],template:function(r,n){1&r&&(T.I0R(0,"lib-masterpage")(1,"div",0)(2,"h1"),T.OEk(3,"Users"),T.C$Y(),T.I0R(4,"button",1),T.qCj("click",function(){return n.userAdd()}),T.OEk(5,"Add User"),T.C$Y(),T.OEk(6," | "),T.I0R(7,"button",1),T.qCj("click",function(){return n.userUpdate()}),T.OEk(8,"Update User"),T.C$Y(),T.OEk(9," | "),T.I0R(10,"button",1),T.qCj("click",function(){return n.refresh()}),T.OEk(11,"Refresh Users"),T.C$Y()()())},dependencies:[Ve.I]})}return i})();const Ye=[{path:"",component:fe}],_e="https://graphqlzero.almansi.me/api";function le(i){return{link:i.create({uri:_e}),cache:new ie}}let $e=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=T.a4G({type:i,bootstrap:[fe]});static#r=this.\u0275inj=T.s3X({providers:[ue,{provide:Y.APOLLO_OPTIONS,useFactory:le,deps:[xe]}],imports:[B.HttpClientModule,J.MD,X.qQ.forChild(Ye),$.u,Y.ApolloModule]})}return i})()},4680:(Dt,K,y)=>{y.d(K,{o:()=>X});var $=y(112),J=y(5448),B=y(7773);function X(d,M=$.M){return(0,J.i)((P,I)=>{let z=null,x=null,at=null;const Z=()=>{if(z){z.unsubscribe(),z=null;const A=x;x=null,I.next(A)}};function st(){const A=at+d,ot=M.now();if(ot<A)return z=this.schedule(void 0,A-ot),void I.add(z);Z()}P.subscribe((0,B.e)(I,A=>{x=A,at=M.now(),z||(z=M.schedule(st,d),I.add(z))},()=>{Z(),I.complete()},void 0,()=>{x=z=null}))})}},112:(Dt,K,y)=>{y.d(K,{M:()=>B,a:()=>X});var $=y(1364);const B=new(y(9164).k)($.m),X=B}}]);